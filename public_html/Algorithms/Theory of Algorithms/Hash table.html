<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Hash table</title>
<!-- 2015-03-05 Thu 23:21 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link href="../../assets/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../../assets/bootstrap-responsive.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../../assets/stylesheet.css" />
<script src="assets/js/bootstrap.min.js"></script>

<script type="text/javascript" src="assets/js/org-info.js">
/**
 *
 * @source: assets/js/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in assets/js/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in assets/js/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "1");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "0");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "#dddddd");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "0");
org_html_manager.set("VIEW", "showall");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Hash table</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Hash table</a></li>
<li><a href="#sec-2">Cuckoo hashing</a></li>
<li><a href="#sec-3">Choosing a good hash function</a></li>
<li><a href="#sec-4">Collision resolution</a></li>
<li><a href="#sec-5">Features</a></li>
<li><a href="#sec-6">Independent packages</a></li>
<li><a href="#sec-7">comparison of Hash Table Libraries</a></li>
<li><a href="#sec-8">comparison of Hash Function</a></li>
<li><a href="#sec-9">General Purpose Hash Function Algorithms</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Hash table</h2>
<div class="outline-text-2" id="text-1">
<p>
In computing, a hash table (also hash map) is a data structure used to
implement an associative array, a structure that can map keys to
values. A hash table uses a hash function to compute an index into an
array of buckets, from which the correct value can be found.<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup>
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Cuckoo hashing<sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup></h2>
<div class="outline-text-2" id="text-2">
</div><ul class="org-ul"><li><a id="sec-2-1" name="sec-2-1"></a>Theory<br  /><div class="outline-text-3" id="text-2-1">
<p>
The basic idea is to use two hash functions instead of only one. This
provides two possible locations in the hash table for each key. In one
of the commonly used variants of the algorithm, the hash table is
split into two smaller tables of equal size, and each hash function
provides an index into one of these two tables.
</p>

<p>
When a new key is inserted, a greedy algorithm is used: The new key is
inserted in one of its two possible locations, "kicking out", that is,
displacing, any key that might already reside in this location. This
displaced key is then inserted in its alternative location, again
kicking out any key that might reside there, until a vacant position
is found, or the procedure enters an infinite loop. In the latter
case, the hash table is rebuilt in-place using new hash functions
</p>
</div>
</li>
<li><a id="sec-2-2" name="sec-2-2"></a>Cuckoo hash map written in C++<br  /><div class="outline-text-3" id="text-2-2">
<p>
<a href="http://sourceforge.net/projects/cuckoo-cpp/">http://sourceforge.net/projects/cuckoo-cpp/</a>
</p>
<div class="org-src-container">

<pre class="src src-c">  template &lt;class Key, <span style="color: #98fb98;">class</span> <span style="color: #eedd82;">Value</span>, <span style="color: #98fb98;">class</span> <span style="color: #eedd82;">Hash</span>, <span style="color: #98fb98;">class</span> <span style="color: #eedd82;">Equal</span>&gt; 
  class cuckoo {
    <span style="color: #00ffff;">typedef</span> <span style="color: #98fb98;">pair</span>&lt;Key, Value&gt; Data;
}
</pre>
</div>
</div>
</li>
<li><a id="sec-2-3" name="sec-2-3"></a>Static cuckoo hashtable generator for C/C++<br  /><div class="outline-text-3" id="text-2-3">
<p>
<a href="http://www.theiling.de/projects/lookuptable.html">http://www.theiling.de/projects/lookuptable.html</a>
</p>
</div>
<ul class="org-ul"><li><a id="sec-2-3-1" name="sec-2-3-1"></a>Example<br  /><div class="outline-text-4" id="text-2-3-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">If the input file looks like this:</span>
100
300
120
100043
2031
102
</pre>
</div>
<p>
The output file might look like this:
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #00ffff;">static</span> <span style="color: #98fb98;">map_t</span> <span style="color: #eedd82;">map_a</span>[3]= {
  300,
  100,
  102,
};
<span style="color: #00ffff;">static</span> <span style="color: #98fb98;">map_t</span> <span style="color: #eedd82;">map_b</span>[3]= {
  2031,
  120,
  100043,
};
<span style="color: #00ffff;">static</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">hash_a</span> (<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">x</span>) {
    <span style="color: #00ffff;">return</span> (((1544301215 * x) - (x ^ 616423921)) % 3);
}
<span style="color: #00ffff;">static</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">hash_b</span> (<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">x</span>) {
    <span style="color: #00ffff;">return</span> (((1521445927 * x) - (x ^ 1711634687)) % 3);
}
<span style="color: #00ffff;">static</span> map_t <span style="color: #00ffff;">const</span> *<span style="color: #87cefa;">lookup</span> (<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">x</span>)
{
    map_t <span style="color: #00ffff;">const</span> *<span style="color: #eedd82;">result</span>;
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">index</span>;
    index= hash_a (x);
    assert (index &gt;= 0 &amp;&amp; index &lt; 3);
    result= &amp;map_a[index];
    <span style="color: #00ffff;">if</span> (MAP_KEY_MATCH(result,x))
        <span style="color: #00ffff;">return</span> result;
    index= hash_b (x);
    assert (index &gt;= 0 &amp;&amp; index &lt; 3);
    result= &amp;map_b[index];
    <span style="color: #00ffff;">if</span> (MAP_KEY_MATCH(result,x))
        <span style="color: #00ffff;">return</span> result;
    <span style="color: #00ffff;">return</span> <span style="color: #7fffd4;">NULL</span>;
}

<span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">&lt;assert.h&gt;</span>
<span style="color: #00ffff;">typedef</span> <span style="color: #98fb98;">int</span> <span style="color: #98fb98;">map_t</span>;
<span style="color: #b0c4de;">#define</span> <span style="color: #87cefa;">MAP_KEY_MATCH</span>(<span style="color: #eedd82;">X</span>,<span style="color: #eedd82;">Y</span>) *(X) == (Y)
<span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">"inthash.inc"</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-3-2" name="sec-2-3-2"></a>Debian/Ubuntu<br  /><div class="outline-text-4" id="text-2-3-2">
<div class="org-src-container">

<pre class="src src-sh">deb     http://debian.theiling.de/  etch  contrib main non-free
deb-src http://debian.theiling.de/  etch  contrib main non-free

apt-get update
apt-get install mkhashtable
</pre>
</div>
</div>
</li></ul>
</li></ul>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Choosing a good hash function</h2>
<div class="outline-text-2" id="text-3">
<p>
Some authors claim that good hash functions should have the <a href="http://en.wikipedia.org/wiki/Avalanche_effect">avalanche
effect</a>; that is, a single-bit change in the input key should affect,
on average, half the bits in the output. Some popular hash functions
do not have this property.
</p>
</div>

<ul class="org-ul"><li><a id="sec-3-1" name="sec-3-1"></a>avalanche affect<br  /><div class="outline-text-3" id="text-3-1">
<p>
The avalanche effect is evident if, when an input is changed slightly
(for example, flipping a single bit) the output changes significantly
(e.g., half the output bits flip).
</p>

<p>
If a block cipher or cryptographic hash function does not exhibit the
avalanche effect to a significant degree, then it has poor
randomization, and thus a cryptanalyst can make predictions about the
input, being given only the output. This may be sufficient to
partially or completely break the algorithm. Thus, the avalanche
effect is a desirable condition from the point of view of the designer
of the cryptographic algorithm or device.
</p>

<p>
Constructing a cipher or hash to exhibit a substantial avalanche
effect is one of the primary design objectives. This is why most block
ciphers are product ciphers. <b>It is also why hash functions have large
data blocks.</b> Both of these features allow small changes to propagate
rapidly through iterations of the algorithm, such that every bit of
the output should depend on every bit of the input before the
algorithm terminates
</p>
</div>
</li></ul>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Collision resolution</h2>
<div class="outline-text-2" id="text-4">
</div><ul class="org-ul"><li><a id="sec-4-1" name="sec-4-1"></a>Separate chaining<br  /></li>
<li><a id="sec-4-2" name="sec-4-2"></a>Open addressing<br  /></li>
<li><a id="sec-4-3" name="sec-4-3"></a>Coalesced hashing<br  /></li>
<li><a id="sec-4-4" name="sec-4-4"></a>Robin Hood hashing<br  /></li>
<li><a id="sec-4-5" name="sec-4-5"></a>Cuckoo hashing<br  /></li>
<li><a id="sec-4-6" name="sec-4-6"></a>Hopscotch hashing<br  /></li></ul>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Features</h2>
<div class="outline-text-2" id="text-5">
</div><ul class="org-ul"><li><a id="sec-5-1" name="sec-5-1"></a>Advantages<br  /><div class="outline-text-3" id="text-5-1">
<p>
The main advantage of hash tables over other table data structures is
speed. This advantage is more apparent when the number of entries is
large. Hash tables are particularly efficient when the maximum number
of entries can be predicted in advance, so that the bucket array can
be allocated once with the optimum size and never resized.
</p>

<p>
If the set of key-value pairs is fixed and known ahead of time (so
insertions and deletions are not allowed), one may reduce the average
lookup cost by a careful choice of the hash function, bucket table
size, and internal data structures. In particular, one may be able to
devise a hash function that is collision-free, or even perfect (see
below). In this case the keys need not be stored in the table.
</p>
</div>
</li>

<li><a id="sec-5-2" name="sec-5-2"></a>Drawbacks<br  /><div class="outline-text-3" id="text-5-2">
<p>
Although operations on a hash table take constant time on average, the
cost of a good hash function can be significantly higher than the
inner loop of the lookup algorithm for a sequential list or search
tree. Thus hash tables are not effective when the number of entries is
very small. (However, in some cases the high cost of computing the
hash function can be mitigated by saving the hash value together with
the key.)
</p>

<p>
For certain string processing applications, such as spell-checking,
hash tables may be less efficient than tries, finite automata, or Judy
arrays. Also, if each key is represented by a small enough number of
bits, then, instead of a hash table, one may use the key directly as
the index into an array of values. Note that there are no collisions
in this case.
</p>

<p>
The entries stored in a hash table can be enumerated efficiently (at
constant cost per entry), but only in some pseudo-random order.
Therefore, there is no efficient way to locate an entry whose key is
nearest to a given key. Listing all n entries in some specific order
generally requires a separate sorting step, whose cost is proportional
to log(n) per entry. In comparison, ordered search trees have lookup
and insertion cost proportional to log(n), but allow finding the
nearest key at about the same cost, and ordered enumeration of all
entries at constant cost per entry.
</p>

<p>
If the keys are not stored (because the hash function is
collision-free), there may be no easy way to enumerate the keys that
are present in the table at any given moment.
</p>

<p>
Although the average cost per operation is constant and fairly small,
the cost of a single operation may be quite high. In particular, if
the hash table uses dynamic resizing, an insertion or deletion
operation may occasionally take time proportional to the number of
entries. This may be a serious drawback in real-time or interactive
applications.
</p>

<p>
Hash tables in general exhibit poor locality of reference—that is, the
data to be accessed is distributed seemingly at random in memory.
Because hash tables cause access patterns that jump around, this can
trigger microprocessor cache misses that cause long delays. Compact
data structures such as arrays searched with linear search may be
faster, if the table is relatively small and keys are integers or
other short strings. According to Moore's Law, cache sizes are growing
exponentially and so what is considered "small" may be increasing. The
optimal performance point varies from system to system.
</p>

<p>
Hash tables become quite inefficient when there are many collisions.
While extremely uneven hash distributions are extremely unlikely to
arise by chance, a malicious adversary with knowledge of the hash
function may be able to supply information to a hash that creates
worst-case behavior by causing excessive collisions, resulting in very
poor performance, e.g. a denial of service attack. In critical
applications, universal hashing can be used; a data structure with
better worst-case guarantees may be preferable.
</p>
</div>
</li></ul>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Independent packages</h2>
<div class="outline-text-2" id="text-6">
</div><ul class="org-ul"><li><a id="sec-6-1" name="sec-6-1"></a>SparseHash<br  /><div class="outline-text-3" id="text-6-1">
<p>
<a href="http://code.google.com/p/sparsehash/">http://code.google.com/p/sparsehash/</a>
</p>

<p>
SparseHash (formerly Google SparseHash) An extremely memory-efficient
hash<sub>map</sub> implementation, with only 2 bits/entry of overhead. The
SparseHash library has several C++ hash map implementations with
different performance characteristics, including one that optimizes
for memory use and another that optimizes for speed.
</p>
<ul class="org-ul">
<li>Modifying Google Sparsehash for the Intel Compiler
<a href="http://kyleteague.com/blog/modifying-google-sparsehash-intel-compiler.html">http://kyleteague.com/blog/modifying-google-sparsehash-intel-compiler.html</a>
</li>
<li>The Google Dense Hashtable Library
<a href="http://attractivechaos.wordpress.com/2008/09/12/the-google-hash-table-library/">http://attractivechaos.wordpress.com/2008/09/12/the-google-hash-table-library/</a>
<ul class="org-ul">
<li>Google dense hash table (google-dense) implements an open
addressing hash table with quardric probing. It requires users to
set an empty element and a deleted element which are distinct from
all the other valid keys in the hash table. Google-dense tests
whether a bucket is empty or deleted by performing key
comparisons. It is fast for integer keys where comparisons are
cheap but will have overhead for string keys.
</li>
<li>google-map keeps key-value pair in one array. Keeping one array
helps cache efficiency because we will not incur a cache miss when
we have located the bucket via a key. However, putting a key and a
value in one struct/class will waste memory when the key type and
the value type are not aligned. For example, on 64-bit systems, if
the key type is “const char*” and the value type is “int”, 25%
of memory is wasted on memory alignment. 
</li>
</ul>
</li>
</ul>
</div>
</li>
<li><a id="sec-6-2" name="sec-6-2"></a>SunriseDD [thread-safe,complex]<br  /><div class="outline-text-3" id="text-6-2">
<p>
<a href="http://www.sunrisetel.net/software/devtools/sunrise-data-dictionary.shtml">http://www.sunrisetel.net/software/devtools/sunrise-data-dictionary.shtml</a>
</p>

<p>
SunriseDD An open source C library for hash table storage of arbitrary
data objects with lock-free lookups, built-in reference counting and
guaranteed order iteration. The library can participate in external
reference counting systems or use its own built-in reference counting.
It comes with a variety of hash functions and allows the use of
runtime supplied hash functions via callback mechanism. Source code is
well documented.
</p>
</div>
</li>

<li><a id="sec-6-3" name="sec-6-3"></a>uthash<br  /><div class="outline-text-3" id="text-6-3">
<p>
<a href="http://uthash.sourceforge.net/">http://uthash.sourceforge.net/</a>
</p>

<p>
uthash This is an easy-to-use hash table for C structures.
</p>
</div>
</li>

<li><a id="sec-6-4" name="sec-6-4"></a>CMPH - C Minimal Perfect Hashing Library<br  /><div class="outline-text-3" id="text-6-4">
<p>
<a href="http://cmph.sourceforge.net/">http://cmph.sourceforge.net/</a>
</p>
</div>
</li>
<li><a id="sec-6-5" name="sec-6-5"></a>strmap<br  /><div class="outline-text-3" id="text-6-5">
<p>
<a href="http://pokristensson.com/strmap.html">http://pokristensson.com/strmap.html</a>
</p>
</div>
</li>
<li><a id="sec-6-6" name="sec-6-6"></a>Libcfu<br  /><div class="outline-text-3" id="text-6-6">
<p>
<a href="http://libcfu.sourceforge.net/libcfu.html">http://libcfu.sourceforge.net/libcfu.html</a>
</p>
</div>
</li>

<li><a id="sec-6-7" name="sec-6-7"></a>hash table<br  /><div class="outline-text-3" id="text-6-7">
<p>
<a href="http://burtleburtle.net/bob/hash/index.html">http://burtleburtle.net/bob/hash/index.html</a>
</p>
</div>
</li>

<li><a id="sec-6-8" name="sec-6-8"></a><code>hash_map/set</code> in SGI STL<br  /><div class="outline-text-3" id="text-6-8">
<div class="org-src-container">

<pre class="src src-c"><span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">&lt;hash_map&gt;</span>
<span style="color: #98fb98;">namespace</span> <span style="color: #eedd82;">std</span>
{
  using <span style="color: #98fb98;">namespace</span> <span style="color: #eedd82;">__gnu_cxx</span>;
  }

using <span style="color: #98fb98;">namespace</span> <span style="color: #eedd82;">std</span>;
<span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">str_hash</span>
{
  <span style="color: #98fb98;">size_t</span> <span style="color: #87cefa;">operator</span> () (<span style="color: #00ffff;">const</span> <span style="color: #98fb98;">string</span> &amp;str) <span style="color: #00ffff;">const</span>
  {
    <span style="color: #00ffff;">return</span> __stl_hash_string(str.c_str());
  }
};

  std::hash_map&lt;string, string, str_hash&gt; hash_str;
  <span style="color: #98fb98;">string</span> <span style="color: #87cefa;">str1</span>(<span style="color: #ffa07a;">"str1"</span>);
  <span style="color: #98fb98;">string</span> <span style="color: #87cefa;">str2</span>(<span style="color: #ffa07a;">"str2"</span>);

  hash_str[str1] = <span style="color: #ffa07a;">"hash_str1"</span>;
  hash_str[str2] = <span style="color: #ffa07a;">"hash_str2"</span>;

  cout &lt;&lt; hash_str[str1] &lt;&lt;endl;
  cout &lt;&lt; hash_str[str2] &lt;&lt;endl;
</pre>
</div>
</div>
</li>

<li><a id="sec-6-9" name="sec-6-9"></a>glibc hash table<br  /><div class="outline-text-3" id="text-6-9">
<p>
<a href="http://linux.die.net/man/3/hsearch">http://linux.die.net/man/3/hsearch</a>
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #00ffff;">typedef</span> <span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">entry</span> {
    <span style="color: #98fb98;">char</span> *<span style="color: #eedd82;">key</span>;
    <span style="color: #98fb98;">void</span> *<span style="color: #eedd82;">data</span>;
} <span style="color: #98fb98;">ENTRY</span>;

<span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">&lt;stdio.h&gt;</span>
<span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">&lt;stdlib.h&gt;</span>
<span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">&lt;search.h&gt;</span>

<span style="color: #98fb98;">char</span> *<span style="color: #eedd82;">data</span>[] = { <span style="color: #ffa07a;">"alpha"</span>, <span style="color: #ffa07a;">"bravo"</span>, <span style="color: #ffa07a;">"charlie"</span>, <span style="color: #ffa07a;">"delta"</span>,
     <span style="color: #ffa07a;">"echo"</span>, <span style="color: #ffa07a;">"foxtrot"</span>, <span style="color: #ffa07a;">"golf"</span>, <span style="color: #ffa07a;">"hotel"</span>, <span style="color: #ffa07a;">"india"</span>, <span style="color: #ffa07a;">"juliet"</span>,
     <span style="color: #ffa07a;">"kilo"</span>, <span style="color: #ffa07a;">"lima"</span>, <span style="color: #ffa07a;">"mike"</span>, <span style="color: #ffa07a;">"november"</span>, <span style="color: #ffa07a;">"oscar"</span>, <span style="color: #ffa07a;">"papa"</span>,
     <span style="color: #ffa07a;">"quebec"</span>, <span style="color: #ffa07a;">"romeo"</span>, <span style="color: #ffa07a;">"sierra"</span>, <span style="color: #ffa07a;">"tango"</span>, <span style="color: #ffa07a;">"uniform"</span>,
     <span style="color: #ffa07a;">"victor"</span>, <span style="color: #ffa07a;">"whisky"</span>, <span style="color: #ffa07a;">"x-ray"</span>, <span style="color: #ffa07a;">"yankee"</span>, <span style="color: #ffa07a;">"zulu"</span>
};

<span style="color: #98fb98;">int</span>
<span style="color: #87cefa;">main</span>(<span style="color: #98fb98;">void</span>)
{
    <span style="color: #98fb98;">ENTRY</span> <span style="color: #eedd82;">e</span>, *<span style="color: #eedd82;">ep</span>;
    <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>;

   hcreate(30);

   <span style="color: #00ffff;">for</span> (i = 0; i &lt; 24; i++) {
        e.key = data[i];
        <span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">data is just an integer, instead of a</span>
<span style="color: #ff7f24;">           pointer to something </span><span style="color: #ff7f24;">*/</span>
        e.data = (<span style="color: #98fb98;">void</span> *) i;
        ep = hsearch(e, ENTER);
        <span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">there should be no failures </span><span style="color: #ff7f24;">*/</span>
        <span style="color: #00ffff;">if</span> (ep == <span style="color: #7fffd4;">NULL</span>) {
            fprintf(stderr, <span style="color: #ffa07a;">"entry failed\n"</span>);
            exit(EXIT_FAILURE);
        }
    }

   <span style="color: #00ffff;">for</span> (i = 22; i &lt; 26; i++) {
        <span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">print two entries from the table, and</span>
<span style="color: #ff7f24;">           show that two are not in the table </span><span style="color: #ff7f24;">*/</span>
        e.key = data[i];
        ep = hsearch(e, FIND);
        printf(<span style="color: #ffa07a;">"%9.9s -&gt; %9.9s:%d\n"</span>, e.key,
               ep ? ep-&gt;key : <span style="color: #ffa07a;">"NULL"</span>, ep ? (<span style="color: #98fb98;">int</span>)(ep-&gt;data) : 0);
    }
    hdestroy();
    exit(EXIT_SUCCESS);
}
</pre>
</div>
</div>
</li>
<li><a id="sec-6-10" name="sec-6-10"></a>hashit<br  /><div class="outline-text-3" id="text-6-10">
<p>
<a href="http://freecode.com/projects/hashit">http://freecode.com/projects/hashit</a>
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">shash_t</span>;
<span style="color: #00ffff;">typedef</span> <span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">shash_t</span> *<span style="color: #98fb98;">hash_t</span>;

<span style="color: #98fb98;">hash_t</span> <span style="color: #87cefa;">hashit_create</span>(<span style="color: #98fb98;">uint32_t</span>, <span style="color: #98fb98;">size_t</span>, <span style="color: #98fb98;">uint32_t</span>(*)(), <span style="color: #98fb98;">int</span>(*)(<span style="color: #98fb98;">void</span> *, <span style="color: #98fb98;">void</span> *), <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span>);
<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">hashit_insert</span>(<span style="color: #98fb98;">hash_t</span>, <span style="color: #98fb98;">void</span> *, <span style="color: #98fb98;">void</span> *);
<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">hashit_delete</span>(<span style="color: #98fb98;">hash_t</span>, <span style="color: #98fb98;">void</span> *);
<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">hashit_replace</span>(<span style="color: #98fb98;">hash_t</span>, <span style="color: #98fb98;">void</span> *, <span style="color: #98fb98;">void</span> *);
<span style="color: #98fb98;">void</span> *<span style="color: #87cefa;">hashit_lookup</span>(<span style="color: #98fb98;">hash_t</span>, <span style="color: #98fb98;">void</span> *);
<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">hashit_destroy</span>(<span style="color: #98fb98;">hash_t</span>);
<span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">Accesors </span><span style="color: #ff7f24;">*/</span>
<span style="color: #98fb98;">void</span> **<span style="color: #87cefa;">hashit_getkeys</span>(<span style="color: #98fb98;">hash_t</span>);
<span style="color: #98fb98;">void</span> **<span style="color: #87cefa;">hashit_getvalues</span>(<span style="color: #98fb98;">hash_t</span>);
<span style="color: #98fb98;">size_t</span> <span style="color: #87cefa;">hashit_tablesize</span>(<span style="color: #98fb98;">hash_t</span>);
<span style="color: #98fb98;">size_t</span> <span style="color: #87cefa;">hashit_size</span>(<span style="color: #98fb98;">hash_t</span>);
</pre>
</div>
</div>
</li>

<li><a id="sec-6-11" name="sec-6-11"></a>Christopher Clark's hashtable<br  /><div class="outline-text-3" id="text-6-11">
<p>
<a href="./files/hashfunction/c-hashtable.zip">hashtable.zip</a>
</p>

<p>
Defined functions
</p>
<div class="org-src-container">

<pre class="src src-sh">create_hashtable
hashtable_insert
hashtable_search
hashtable_remove
hashtable_count
hashtable_destroy
</pre>
</div>
<p>
Example of use
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">hashtable</span>  *<span style="color: #eedd82;">h</span>;
      <span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">some_key</span>   *<span style="color: #eedd82;">k</span>;
      <span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">some_value</span> *<span style="color: #eedd82;">v</span>;

      <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span>         <span style="color: #87cefa;">hash_from_key_fn</span>( <span style="color: #98fb98;">void</span> *<span style="color: #eedd82;">k</span> );
      <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">int</span>                  <span style="color: #87cefa;">keys_equal_fn</span> ( <span style="color: #98fb98;">void</span> *<span style="color: #eedd82;">key1</span>, <span style="color: #98fb98;">void</span> *<span style="color: #eedd82;">key2</span> );

      h = create_hashtable(16, hash_from_key_fn, keys_equal_fn);

      insert_key   = (<span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">some_key</span> *) malloc(<span style="color: #00ffff;">sizeof</span>(<span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">some_key</span>));
      retrieve_key = (<span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">some_key</span> *) malloc(<span style="color: #00ffff;">sizeof</span>(<span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">some_key</span>));

      v = (<span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">some_value</span> *) malloc(<span style="color: #00ffff;">sizeof</span>(<span style="color: #00ffff;">struct</span> <span style="color: #98fb98;">some_value</span>));

      (You should <span style="color: #98fb98;">initialise</span> <span style="color: #eedd82;">insert_key</span>, retrieve_key and <span style="color: #98fb98;">v</span> <span style="color: #eedd82;">here</span>)

      <span style="color: #00ffff;">if</span> (! hashtable_insert(h,insert_key,v) )
      {     exit(-1);               }

      <span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">NULL</span> == (found = hashtable_search(h,retrieve_key) ))
      {    printf(<span style="color: #ffa07a;">"not found!"</span>);                  }

      <span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">NULL</span> == (found = hashtable_remove(h,retrieve_key) ))
      {    printf(<span style="color: #ffa07a;">"Not found\n"</span>);                 }

      hashtable_destroy(h,1); <span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">second arg indicates "free(value)" </span><span style="color: #ff7f24;">*/</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-6-12" name="sec-6-12"></a>glib hash table<br  /><div class="outline-text-3" id="text-6-12">
<p>
<a href="https://developer.gnome.org/glib/2.31/glib-Hash-Tables.html">https://developer.gnome.org/glib/2.31/glib-Hash-Tables.html</a>
</p>

<p>
Build with glib:
</p>
<ul class="org-ul">
<li><code>sudo apt-get install libglib2.0-dev</code>
</li>
<li><code>gcc test.c -Wall -o test `pkg-config --cflags --libs glib-2.0`</code>
</li>
</ul>

<p>
example:
<a href="http://www.ibm.com/developerworks/linux/tutorials/l-glib/section5.html">http://www.ibm.com/developerworks/linux/tutorials/l-glib/section5.html</a>
</p>

<div class="org-src-container">

<pre class="src src-c"><span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">&lt;stdio.h&gt;</span>
<span style="color: #b0c4de;">#include</span> <span style="color: #ffa07a;">&lt;glib.h&gt;</span>
<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">value_destroyed</span>(<span style="color: #98fb98;">gpointer</span> <span style="color: #eedd82;">data</span>) {
 printf(<span style="color: #ffa07a;">"Got a value destroy call for %d\n"</span>, GPOINTER_TO_INT(data));
}
<span style="color: #98fb98;">gboolean</span> <span style="color: #87cefa;">finder</span>(<span style="color: #98fb98;">gpointer</span> <span style="color: #eedd82;">key</span>, <span style="color: #98fb98;">gpointer</span> <span style="color: #eedd82;">value</span>, <span style="color: #98fb98;">gpointer</span> <span style="color: #eedd82;">user_data</span>) {
 <span style="color: #00ffff;">return</span> (GPOINTER_TO_INT(key) + GPOINTER_TO_INT(value)) == 42;
}
<span style="color: #98fb98;">int</span> <span style="color: #87cefa;">main</span>(<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">argc</span>, <span style="color: #98fb98;">char</span>** <span style="color: #eedd82;">argv</span>) {
 <span style="color: #98fb98;">GHashTable</span>* <span style="color: #eedd82;">hash</span> = g_hash_table_new_full(g_direct_hash, g_direct_equal,
  <span style="color: #7fffd4;">NULL</span>,
  (<span style="color: #98fb98;">GDestroyNotify</span>)value_destroyed);
 g_hash_table_insert(hash, GINT_TO_POINTER(6), GINT_TO_POINTER(36));
 g_hash_table_insert(hash, GINT_TO_POINTER(10), GINT_TO_POINTER(12));
 g_hash_table_insert(hash, GINT_TO_POINTER(20), GINT_TO_POINTER(22));
 <span style="color: #98fb98;">gpointer</span> <span style="color: #eedd82;">item_ptr</span> = g_hash_table_find(hash, (<span style="color: #98fb98;">GHRFunc</span>)finder, <span style="color: #7fffd4;">NULL</span>);
 <span style="color: #98fb98;">gint</span> <span style="color: #eedd82;">item</span> = GPOINTER_TO_INT(item_ptr);
 printf(<span style="color: #ffa07a;">"%d + %d == 42\n"</span>, item, 42-item);
 g_hash_table_destroy(hash);
 <span style="color: #00ffff;">return</span> 0;
}
</pre>
</div>
</div>
</li>

<li><a id="sec-6-13" name="sec-6-13"></a>ghthash<br  /><div class="outline-text-3" id="text-6-13">
<p>
<a href="http://www.bth.se/people/ska/sim_home/libghthash.html">http://www.bth.se/people/ska/sim_home/libghthash.html</a>
</p>
</div>
</li>
<li><a id="sec-6-14" name="sec-6-14"></a>khash<br  /><div class="outline-text-3" id="text-6-14">
<p>
<a href="http://attractivechaos.awardspace.com/khash.h.html">http://attractivechaos.awardspace.com/khash.h.html</a>
</p>
</div>
</li>

<li><a id="sec-6-15" name="sec-6-15"></a>hashlib library<br  /><div class="outline-text-3" id="text-6-15">
<p>
<a href="./files/hashfunction/hashlib.zip">hashlib.zip</a>
</p>
</div>
</li>
<li><a id="sec-6-16" name="sec-6-16"></a><code>rdestl::hash_map</code>: from RDESTL, another implementation of STL<br  /><div class="outline-text-3" id="text-6-16">
<p>
<a href="https://code.google.com/p/rdestl/">https://code.google.com/p/rdestl/</a>
<code>svn checkout http://rdestl.googlecode.com/svn/ rdestl-read-only</code>
</p>
</div>
</li>
<li><a id="sec-6-17" name="sec-6-17"></a>JudyL hash table<br  /><div class="outline-text-3" id="text-6-17">
<p>
<a href="http://judy.sourceforge.net/doc/JudyL_3x.htm">http://judy.sourceforge.net/doc/JudyL_3x.htm</a>
</p>
</div>
</li></ul>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">comparison of Hash Table Libraries</h2>
<div class="outline-text-2" id="text-7">
<ul class="org-ul">
<li><a href="http://attractivechaos.wordpress.com/2008/08/28/comparison-of-hash-table-libraries/">http://attractivechaos.wordpress.com/2008/08/28/comparison-of-hash-table-libraries/</a>
</li>
<li><a href="http://attractivechaos.wordpress.com/2008/10/07/another-look-at-my-old-benchmark/">http://attractivechaos.wordpress.com/2008/10/07/another-look-at-my-old-benchmark/</a>
</li>
<li>Benchmark of Dictionary Structures
<a href="http://lh3lh3.users.sourceforge.net/udb.shtml">http://lh3lh3.users.sourceforge.net/udb.shtml</a>
</li>
<li>Hash Table Performance Tests
<a href="http://preshing.com/20110603/hash-table-performance-tests">http://preshing.com/20110603/hash-table-performance-tests</a>
</li>
<li>Hash Collision Probabilities
<a href="http://preshing.com/page/5">http://preshing.com/page/5</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">comparison of Hash Function</h2>
<div class="outline-text-2" id="text-8">
</div><ul class="org-ul"><li><a id="sec-8-1" name="sec-8-1"></a>Useless hash test<br  /><div class="outline-text-3" id="text-8-1">
<p>
<a href="http://cbloomrants.blogspot.hk/2010/11/11-29-10-useless-hash-test.html">http://cbloomrants.blogspot.hk/2010/11/11-29-10-useless-hash-test.html</a>
</p>
</div>
</li>
<li><a id="sec-8-2" name="sec-8-2"></a>Hash functions: An empirical comparison<br  /><div class="outline-text-3" id="text-8-2">
<p>
<a href="http://www.strchr.com/hash_functions">http://www.strchr.com/hash_functions</a>
</p>
</div>
</li>
<li><a id="sec-8-3" name="sec-8-3"></a>SMHasher<br  /><div class="outline-text-3" id="text-8-3">
<p>
<a href="https://code.google.com/p/smhasher/wiki/SMHasher">SMHasher</a> is a test suite designed to test the distribution, collision,
and performance properties of non-cryptographic hash functions - it
aims to be the "<a href="http://www.phy.duke.edu/~rgb/General/dieharder.php">DieHarder</a>" of hash testing, and does a pretty good job
of finding flaws with a number of popular hashes. 
</p>
</div>
</li></ul>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">General Purpose Hash Function Algorithms<sup><a id="fnr.3" name="fnr.3" class="footref" href="#fn.3">3</a></sup></h2>
<div class="outline-text-2" id="text-9">
</div><ul class="org-ul"><li><a id="sec-9-1" name="sec-9-1"></a>choose the hash function<br  /><div class="outline-text-3" id="text-9-1">
<ul class="org-ul">
<li>Data Distribution
This is the measure of how well the hash function distributes the
hash values of elements within a set of data.
</li>
<li>Hash Function Efficiency
This is the measure of how efficiently the hash function produces
hash values for elements within a set of data.
</li>
</ul>
</div>
</li>
<li><a id="sec-9-2" name="sec-9-2"></a>Hashing Methodologies<br  /><div class="outline-text-3" id="text-9-2">
<p>
Hash functions are typically defined by the way they create hash
values from data. There are two main methodologies for a hash
algorithm to implement, they are:
</p>
<ul class="org-ul">
<li>Addative and Multiplicative Hashing
This is where the hash value is constructed by traversing through
the data and continually incrementing an initial value by a
calculated value relative to an element within the data. The
calculation done on the element value is usually in the form of a
multiplication by a prime number.


<div class="figure">
<p><img src="./files/hashfunction-img1.png" alt="hashfunction-img1.png" />
</p>
</div>
</li>
<li>Rotative Hashing
Same as additive hashing in that every element in the data string is
used to construct the hash, but unlike additive hashing the values
are put through a process of bitwise shifting. Usually a combination
of both left and right shifts, the shift amounts as before are
prime. The result of each process is added to some form of
accumulating count, the final result being the hash value is passed
back as the final accumulation.
<img src="./files/hashfunction-img2.png" alt="hashfunction-img2.png" />
</li>
</ul>
</div>
</li>

<li><a id="sec-9-3" name="sec-9-3"></a>Various Forms Of Hashing<br  /><div class="outline-text-3" id="text-9-3">
<ul class="org-ul">
<li>String Hashing
Used in the area of data storage access. Mainly within indexing of
data and as a structural back end to associative containers
</li>
<li>Cryptographic Hashing
Used for data/user verification and authentication. A strong
cryptographic hash function has the property of being very difficult
to reverse the result of the hash and hence reproduce the original
piece of data. 
</li>
<li>Geometric Hashing
 This form of hashing is used in the field of computer vision for
the detection of classified objects in arbitrary scenes.
</li>
<li>Bloom Filters
 A Bloom filter allows for the "state of existence" of a large set
of possible values to be represented with a much smaller piece of
memory than the sum size of the values. In computer science this is
known as a membership query and is core concept in associative
containers.
</li>
</ul>
</div>
</li>

<li><a id="sec-9-4" name="sec-9-4"></a>Available Hash Functions<br  /><ul class="org-ul"><li><a id="sec-9-4-1" name="sec-9-4-1"></a>MurmurHash1<sup><a id="fnr.4" name="fnr.4" class="footref" href="#fn.4">4</a></sup><br  /><div class="outline-text-4" id="text-9-4-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #eedd82;">h</span> += k;
<span style="color: #eedd82;">h</span> *= m;
<span style="color: #eedd82;">h</span> ^= h &gt;&gt; r;
</pre>
</div>
<p>
where 'k' is a block of the key, 'm' and 'r' are constants, and 'h' is
the 32-bit hash state.
</p>
</div>
</li>
<li><a id="sec-9-4-2" name="sec-9-4-2"></a>MurmurHash2<sup><a id="fnr.5" name="fnr.5" class="footref" href="#fn.5">5</a></sup><br  /><div class="outline-text-4" id="text-9-4-2">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #eedd82;">k</span> *= m;
<span style="color: #eedd82;">k</span> ^= k &gt;&gt; r;
<span style="color: #eedd82;">k</span> *= m;

<span style="color: #eedd82;">h</span> *= m;
<span style="color: #eedd82;">h</span> ^= k;
</pre>
</div>
<p>
where 'k' is a block of the key, 'm' and 'r' are constants, and 'h' is
the 32-bit hash state.
</p>
</div>
</li>
<li><a id="sec-9-4-3" name="sec-9-4-3"></a>MurmurHash3<sup><a id="fnr.6" name="fnr.6" class="footref" href="#fn.6">6</a></sup><br  /><div class="outline-text-4" id="text-9-4-3">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #eedd82;">k</span> *= c1; 
<span style="color: #eedd82;">k</span> = rotl(k,r1); 
<span style="color: #eedd82;">k</span> *= c2;

<span style="color: #eedd82;">h</span> ^= k;

<span style="color: #eedd82;">h</span> = rotl(h,r1); 
<span style="color: #eedd82;">h</span> = h*m1+n1;
</pre>
</div>
<p>
'k' is a block of the key, 'h' is a block of the hash state, and
'rN'/'mN'/'cN' are constants.
</p>

<p>
For each block of the key, we pre-mix it using two constants and a
rotate, xor it into the hash block, and them mix the hash block using
a rotate and a multiply-add.
</p>

<p>
MurmurHash3's 32-bit finalizer is 
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #eedd82;">h</span> ^= h &gt;&gt; 16;
<span style="color: #eedd82;">h</span> *= 0x85ebca6b;
<span style="color: #eedd82;">h</span> ^= h &gt;&gt; 13;
<span style="color: #eedd82;">h</span> *= 0xc2b2ae35;
<span style="color: #eedd82;">h</span> ^= h &gt;&gt; 16;
</pre>
</div>
<p>
and its 64-bit finalizer is 
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #eedd82;">h</span> ^= h &gt;&gt; 16;
<span style="color: #eedd82;">h</span> *= 0x85ebca6b;
<span style="color: #eedd82;">h</span> ^= h &gt;&gt; 13;
<span style="color: #eedd82;">h</span> *= 0xc2b2ae35;
<span style="color: #eedd82;">h</span> ^= h &gt;&gt; 16;
</pre>
</div>
</div>
</li>
<li><a id="sec-9-4-4" name="sec-9-4-4"></a>RS Hash Function<br  /><div class="outline-text-4" id="text-9-4-4">
<p>
A simple hash function from Robert Sedgwicks Algorithms in C book.
I've added some simple optimizations to the algorithm in order to
speed up its hashing process.
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">RSHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">b</span>    = 378551;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">a</span>    = 63689;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span> = 0;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>    = 0;

   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash = hash * a + (*str);
      a    = a * b;
   }

   <span style="color: #00ffff;">return</span> hash;
}
</pre>
</div>
</div>
</li>
<li><a id="sec-9-4-5" name="sec-9-4-5"></a>JS Hash Function<br  /><div class="outline-text-4" id="text-9-4-5">
<p>
A bitwise hash function written by Justin Sobel
</p>

<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">JSHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span> = 1315423911;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>    = 0;

   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash ^= ((hash &lt;&lt; 5) + (*str) + (hash &gt;&gt; 2));
   }

   <span style="color: #00ffff;">return</span> hash;
}
</pre>
</div>
</div>
</li>

<li><a id="sec-9-4-6" name="sec-9-4-6"></a>PJW Hash Function<br  /><div class="outline-text-4" id="text-9-4-6">
<p>
This hash algorithm is based on work by Peter J. Weinberger of AT&amp;T
Bell Labs. The book Compilers (Principles, Techniques and Tools) by
Aho, Sethi and Ulman, recommends the use of hash functions that employ
the hashing methodology found in this particular algorithm.
</p>

<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">PJWHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #00ffff;">const</span> <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">BitsInUnsignedInt</span> = (<span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span>)(<span style="color: #00ffff;">sizeof</span>(<span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span>) * 8);
   <span style="color: #00ffff;">const</span> <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">ThreeQuarters</span>     = (<span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span>)((BitsInUnsignedInt  * 3) / 4);
   <span style="color: #00ffff;">const</span> <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">OneEighth</span>         = (<span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span>)(BitsInUnsignedInt / 8);
   <span style="color: #00ffff;">const</span> <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">HighBits</span>          = (<span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span>)(0xFFFFFFFF) &lt;&lt; (BitsInUnsignedInt - OneEighth);
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span>              = 0;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">test</span>              = 0;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>                 = 0;

   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash = (hash &lt;&lt; OneEighth) + (*str);

      <span style="color: #00ffff;">if</span>((test = hash &amp; HighBits)  != 0)
      {
         hash = (( hash ^ (test &gt;&gt; ThreeQuarters)) &amp; (~HighBits));
      }
   }

   <span style="color: #00ffff;">return</span> hash;
}
</pre>
</div>
</div>
</li>

<li><a id="sec-9-4-7" name="sec-9-4-7"></a>ELF Hash Function<br  /><div class="outline-text-4" id="text-9-4-7">
<p>
Similar to the PJW Hash function, but tweaked for 32-bit processors.
Its the hash function widely used on most UNIX systems.
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">ELFHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span> = 0;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">x</span>    = 0;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>    = 0;

   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash = (hash &lt;&lt; 4) + (*str);
      <span style="color: #00ffff;">if</span>((x = hash &amp; 0xF0000000L) != 0)
      {
         hash ^= (x &gt;&gt; 24);
      }
      hash &amp;= ~x;
   }

   <span style="color: #00ffff;">return</span> hash;
}
</pre>
</div>
</div>
</li>
<li><a id="sec-9-4-8" name="sec-9-4-8"></a>BKDR Hash Function<br  /><div class="outline-text-4" id="text-9-4-8">
<p>
This hash function comes from Brian Kernighan and Dennis Ritchie's
book "The C Programming Language". It is a simple hash function using
a strange set of possible seeds which all constitute a pattern of
31&#x2026;.31&#x2026;31 etc, it seems to be very similar to the DJB hash
function.
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">BKDRHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">seed</span> = 131; <span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">31 131 1313 13131 131313 etc.. </span><span style="color: #ff7f24;">*/</span>
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span> = 0;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>    = 0;

   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash = (hash * seed) + (*str);
   }

   <span style="color: #00ffff;">return</span> hash;
}
</pre>
</div>
</div>
</li>

<li><a id="sec-9-4-9" name="sec-9-4-9"></a>SDBM Hash Function<br  /><div class="outline-text-4" id="text-9-4-9">
<p>
This is the algorithm of choice which is used in the open source SDBM
project. The hash function seems to have a good over-all distribution
for many different data sets. It seems to work well in situations
where there is a high variance in the MSBs of the elements in a data
set.
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">SDBMHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span> = 0;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>    = 0;

   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash = (*str) + (hash &lt;&lt; 6) + (hash &lt;&lt; 16) - hash;
   }

   <span style="color: #00ffff;">return</span> hash;
}
</pre>
</div>
</div>
</li>

<li><a id="sec-9-4-10" name="sec-9-4-10"></a>DJB Hash Function<br  /><div class="outline-text-4" id="text-9-4-10">
<p>
An algorithm produced by Professor Daniel J. Bernstein and shown first
to the world on the usenet newsgroup comp.lang.c. It is one of the
most efficient hash functions ever published.
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">DJBHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span> = 5381;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>    = 0;

   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash = ((hash &lt;&lt; 5) + hash) + (*str);
   }

   <span style="color: #00ffff;">return</span> hash;
}
</pre>
</div>
</div>
</li>

<li><a id="sec-9-4-11" name="sec-9-4-11"></a>DEK Hash Function<br  /><div class="outline-text-4" id="text-9-4-11">
<p>
An algorithm proposed by Donald E. Knuth in The Art Of Computer
Programming Volume 3, under the topic of sorting and search chapter
6.4.
</p>

<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">DEKHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span> = len;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>    = 0;

   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash = ((hash &lt;&lt; 5) ^ (hash &gt;&gt; 27)) ^ (*str);
   }
   <span style="color: #00ffff;">return</span> hash;
}
</pre>
</div>
</div>
</li>

<li><a id="sec-9-4-12" name="sec-9-4-12"></a>other<br  /><div class="outline-text-4" id="text-9-4-12">
<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">BPHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span> = 0;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>    = 0;
   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash = hash &lt;&lt; 7 ^ (*str);
   }

   <span style="color: #00ffff;">return</span> hash;
}
<span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">End Of BP Hash Function </span><span style="color: #ff7f24;">*/</span>


<span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">FNVHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #00ffff;">const</span> <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">fnv_prime</span> = 0x811C9DC5;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span>      = 0;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>         = 0;

   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash *= fnv_prime;
      hash ^= (*str);
   }

   <span style="color: #00ffff;">return</span> hash;
}
<span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">End Of FNV Hash Function </span><span style="color: #ff7f24;">*/</span>


<span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #87cefa;">APHash</span>(<span style="color: #98fb98;">char</span>* <span style="color: #eedd82;">str</span>, <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">len</span>)
{
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">hash</span> = 0xAAAAAAAA;
   <span style="color: #98fb98;">unsigned</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span>    = 0;

   <span style="color: #00ffff;">for</span>(i = 0; i &lt; len; str++, i++)
   {
      hash ^= ((i &amp; 1) == 0) ? (  (hash &lt;&lt;  7) ^ (*str) * (hash &gt;&gt; 3)) :
                               (~((hash &lt;&lt; 11) + ((*str) ^ (hash &gt;&gt; 5))));
   }

   <span style="color: #00ffff;">return</span> hash;
}
<span style="color: #ff7f24;">/* </span><span style="color: #ff7f24;">End Of AP Hash Function </span><span style="color: #ff7f24;">*/</span>
</pre>
</div>
</div>
</li></ul>
</li></ul>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
<a href="http://en.wikipedia.org/wiki/Hash_table">http://en.wikipedia.org/wiki/Hash_table</a>
</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara">
<a href="http://en.wikipedia.org/wiki/Cuckoo_hashing">http://en.wikipedia.org/wiki/Cuckoo_hashing</a>
</p></div>

<div class="footdef"><sup><a id="fn.3" name="fn.3" class="footnum" href="#fnr.3">3</a></sup> <p class="footpara">
<a href="http://www.partow.net/programming/hashfunctions/index.html#DJBHashFunction">http://www.partow.net/programming/hashfunctions/index.html#DJBHashFunction</a>
</p></div>

<div class="footdef"><sup><a id="fn.4" name="fn.4" class="footnum" href="#fnr.4">4</a></sup> <p class="footpara">
<a href="https://code.google.com/p/smhasher/wiki/MurmurHash1">https://code.google.com/p/smhasher/wiki/MurmurHash1</a>
</p></div>

<div class="footdef"><sup><a id="fn.5" name="fn.5" class="footnum" href="#fnr.5">5</a></sup> <p class="footpara">
<a href="https://code.google.com/p/smhasher/wiki/MurmurHash2">https://code.google.com/p/smhasher/wiki/MurmurHash2</a>
</p></div>

<div class="footdef"><sup><a id="fn.6" name="fn.6" class="footnum" href="#fnr.6">6</a></sup> <p class="footpara">
<a href="https://code.google.com/p/smhasher/wiki/MurmurHash3">https://code.google.com/p/smhasher/wiki/MurmurHash3</a>
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2015-03-05 Thu 23:21</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
