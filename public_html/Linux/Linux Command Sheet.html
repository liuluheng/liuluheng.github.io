<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Linux Command Sheet</title>
<!-- 2015-03-05 Thu 23:20 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link href="../assets/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../assets/bootstrap-responsive.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../assets/stylesheet.css" />
<script src="assets/js/bootstrap.min.js"></script>

<script type="text/javascript" src="assets/js/org-info.js">
/**
 *
 * @source: assets/js/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in assets/js/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in assets/js/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "2");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "0");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "#dddddd");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "0");
org_html_manager.set("VIEW", "showall");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Linux Command Sheet</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">System</a>
<ul>
<li><a href="#sec-1-1">Check the CPU info and so on</a></li>
<li><a href="#sec-1-2"><code>find_host_distribution</code></a></li>
<li><a href="#sec-1-3">ip</a></li>
<li><a href="#sec-1-4">set ip</a></li>
<li><a href="#sec-1-5">set MAC Addr</a></li>
<li><a href="#sec-1-6">Clear Memory Cache</a></li>
<li><a href="#sec-1-7">Clear Memory Cache</a></li>
<li><a href="#sec-1-8">Create swap</a></li>
</ul>
</li>
<li><a href="#sec-2">General</a>
<ul>
<li><a href="#sec-2-1">extract</a></li>
<li><a href="#sec-2-2">cut</a></li>
</ul>
</li>
<li><a href="#sec-3">Internet</a>
<ul>
<li><a href="#sec-3-1">FTP Server</a></li>
<li><a href="#sec-3-2">SCP</a></li>
</ul>
</li>
<li><a href="#sec-4">diff and patch</a>
<ul>
<li><a href="#sec-4-1">patch</a></li>
<li><a href="#sec-4-2">Creating patches with diff</a></li>
</ul>
</li>
<li><a href="#sec-5">Network</a>
<ul>
<li><a href="#sec-5-1">wireless analysis</a></li>
</ul>
</li>
<li><a href="#sec-6">To read</a>
<ul>
<li><a href="#sec-6-1">at</a></li>
<li><a href="#sec-6-2">badblocks</a></li>
<li><a href="#sec-6-3">cfdisk</a></li>
<li><a href="#sec-6-4">chattr 用于设置文件属性     lsattr 用于查看文件属性</a></li>
<li><a href="#sec-6-5">chgrp命令</a></li>
<li><a href="#sec-6-6">chown 命令</a></li>
<li><a href="#sec-6-7">chroot(change root)</a></li>
<li><a href="#sec-6-8">chsh</a></li>
<li><a href="#sec-6-9">cksum</a></li>
<li><a href="#sec-6-10">cmp</a></li>
<li><a href="#sec-6-11">col</a></li>
<li><a href="#sec-6-12">colrm</a></li>
<li><a href="#sec-6-13">comm</a></li>
<li><a href="#sec-6-14">cp</a></li>
<li><a href="#sec-6-15">tar(tape archive)</a></li>
<li><a href="#sec-6-16">tcpdump命令详解</a></li>
<li><a href="#sec-6-17">tee</a></li>
<li><a href="#sec-6-18">tload</a></li>
<li><a href="#sec-6-19">top</a></li>
<li><a href="#sec-6-20">touch - 创建文件或修改文件时间</a></li>
<li><a href="#sec-6-21">tty</a></li>
<li><a href="#sec-6-22">ulimit</a></li>
<li><a href="#sec-6-23">umask</a></li>
<li><a href="#sec-6-24">uname</a></li>
<li><a href="#sec-6-25">uniq</a></li>
<li><a href="#sec-6-26">useradd</a></li>
<li><a href="#sec-6-27">userdel</a></li>
<li><a href="#sec-6-28">usermod</a></li>
<li><a href="#sec-6-29">w</a></li>
<li><a href="#sec-6-30">wc(word count)</a></li>
<li><a href="#sec-6-31">wget</a></li>
<li><a href="#sec-6-32">Find</a></li>
<li><a href="#sec-6-33">whereis</a></li>
<li><a href="#sec-6-34">locate</a></li>
<li><a href="#sec-6-35">which</a></li>
<li><a href="#sec-6-36">who</a></li>
<li><a href="#sec-6-37">whoami</a></li>
<li><a href="#sec-6-38">whois</a></li>
<li><a href="#sec-6-39">xlsatoms</a></li>
<li><a href="#sec-6-40">xlsclients</a></li>
<li><a href="#sec-6-41">xlsfonts</a></li>
<li><a href="#sec-6-42">zip</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">System</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">Check the CPU info and so on</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">

<pre class="src src-sh">sudo dmidecode | more
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><code>find_host_distribution</code></h3>
<div class="outline-text-3" id="text-1-2">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #eedd82;">host</span>=<span style="color: #fa8072;">`lsb_release -a 2&gt;/dev/null | grep Codename: | awk {'print $2'}`</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">ip</h3>
<div class="outline-text-3" id="text-1-3">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #eedd82;">ipdefault</span>=<span style="color: #fa8072;">`ifconfig | grep 'inet addr:'| grep -v '127.0.0.1' | cut -d:</span>
<span style="color: #fa8072;">-f2 | awk '{ print $1 }'`</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">set ip</h3>
<div class="outline-text-3" id="text-1-4">
<div class="org-src-container">

<pre class="src src-sh">sudo ifconfig eth0 192.168.1.1 netmask 255.255.255.0 up
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5">set MAC Addr</h3>
<div class="outline-text-3" id="text-1-5">
<div class="org-src-container">

<pre class="src src-sh">/sbin/ifconfig eth0 down
/sbin/ifconfig eth0 hw ether xx:xx:xx:xx:xx:xx
/sbin/ifconfig eth0 up
&#25110;&#32773;
ip link set eth0 down
ip link set eth0 address xx:xx:xx:xx:xx:xx
ip link set eth0 up

Or Edit /etc/rcS.d/rc.local&#65292;

or Edit /etc/network/interfaces 
pre-up ifconfig eth0 hw ether xx:xx:xx:xx:xx:xx
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6">Clear Memory Cache</h3>
<div class="outline-text-3" id="text-1-6">
<div class="org-src-container">

<pre class="src src-sh">At the shell prompt type crontab -e &lt;enter&gt; as this will allow you to edit cron jobs for the root user.
0 * * * * /root/clearcache.sh

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">!/bin/sh </span>
sync; <span style="color: #b0c4de;">echo</span> 3 &gt; /proc/sys/vm/drop_caches

/sbin/sysctl -w vm.drop_caches=3
=1 --&gt; to free pagecache
=2 --&gt; to free dentries and inodes
=3 --&gt; to free pagecache, dentries and inodes
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7">Clear Memory Cache</h3>
<div class="outline-text-3" id="text-1-7">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">!/bin/</span><span style="color: #00ffff;">sh</span><span style="color: #ff7f24;"> </span>
sync; <span style="color: #b0c4de;">echo</span> 3 &gt; /proc/sys/vm/drop_caches
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8">Create swap</h3>
<div class="outline-text-3" id="text-1-8">
<div class="org-src-container">

<pre class="src src-sh"> sudo dd <span style="color: #eedd82;">if</span>=/dev/zero <span style="color: #eedd82;">of</span>=swapfile <span style="color: #eedd82;">bs</span>=1024 <span style="color: #eedd82;">count</span>=1655360
 mkswap swapfile
 swapon swapfile 
 vi /etc/fstab
add /&lt;path&gt;/swapfile               swap                    swap    defaults        0 0
 swapon -s
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">General</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">extract</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #87cefa;">extract</span> () {
   <span style="color: #00ffff;">if</span> [ -f $<span style="color: #eedd82;">1</span> ] ; <span style="color: #00ffff;">then</span>
       <span style="color: #00ffff;">case</span> $<span style="color: #eedd82;">1</span><span style="color: #00ffff;"> in</span>
        *.tar.bz2)      tar xvjf $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .tar.bz2) ;;
        *.tar.gz)       tar xvzf $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .tar.gz) ;;
        *.tar.xz)       tar Jxvf $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .tar.xz) ;;
        *.bz2)          bunzip2 $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> /bz2) ;;
        *.rar)          unrar x $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .rar) ;;
        *.gz)           gunzip $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .gz) ;;
        *.tar)          tar xvf $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .tar) ;;
        *.tbz2)         tar xvjf $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .tbz2) ;;
        *.tgz)          tar xvzf $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .tgz) ;;
        *.zip)          unzip $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .zip) ;;
        *.Z)            uncompress $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .Z) ;;
        *.7z)           7z x $<span style="color: #eedd82;">1</span> &amp;&amp; <span style="color: #b0c4de;">cd</span> $(basename <span style="color: #ffa07a;">"$1"</span> .7z) ;;
        *)              <span style="color: #b0c4de;">echo</span> <span style="color: #ffa07a;">"don't know how to extract '$1'..."</span> ;;
       <span style="color: #00ffff;">esac</span>
   <span style="color: #00ffff;">else</span>
       <span style="color: #b0c4de;">echo</span> <span style="color: #ffa07a;">"'$1' is not a valid file!"</span>
   <span style="color: #00ffff;">fi</span>
 }
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">cut</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">

<pre class="src src-sh">-b, --bytes=LIST
output only these bytes
-c, --characters=LIST
output only these characters
-d, --delimiter=DELIM
use DELIM instead of TAB for field delimiter
-f, --fields=LIST
output only these fields; also print any line that contains no delimiter character, unless the -s option is specified
-n
with -b: don<span style="color: #ffa07a;">'t split multibyte characters</span>
<span style="color: #ffa07a;">-s, --only-delimited</span>
<span style="color: #ffa07a;">do not print lines not containing delimiters</span>
<span style="color: #ffa07a;">--output-delimiter=STRING</span>
<span style="color: #ffa07a;">use STRING as the output delimiter the default is to use the input delimiter</span>

<span style="color: #ffa07a;">Use one, and only one of -b, -c or -f. Each LIST is made up of one range, or many ranges separated by commas. Each range is one of:</span>

<span style="color: #ffa07a;">N</span>
<span style="color: #ffa07a;">N'</span>th byte, character or field, counted from 1
N-
from N<span style="color: #ffa07a;">'th byte, character or field, to end of line</span>
<span style="color: #ffa07a;">N-M</span>
<span style="color: #ffa07a;">from N'</span>th to M<span style="color: #ffa07a;">'th (included) byte, character or field</span>
<span style="color: #ffa07a;">-M</span>
<span style="color: #ffa07a;">from first to M'</span>th (included) byte, character or field
With no FILE, or when FILE is -, read standard input.
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Internet</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">FTP Server</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">

<pre class="src src-sh">sudo apt-get install vsftpd

sudo useradd -m ftp
sudo passwd ftp

sudo chmod 777 /home/ftp
</pre>
</div>
<ul class="org-ul">
<li>Configured Files
</li>
</ul>
<p>
<code>sudo emacs /etc/vsftpd.conf</code>
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">&#29420;&#31435;&#27169;&#24335;&#21551;&#21160;</span>
<span style="color: #eedd82;">listen</span>=YES

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">&#21516;&#26102;&#20801;&#35768;4&#23458;&#25143;&#31471;&#36830;&#20837;&#65292;&#27599;&#20010;IP&#26368;&#22810;5&#20010;&#36827;&#31243;</span>
<span style="color: #eedd82;">max_clients</span>=200
<span style="color: #eedd82;">max_per_ip</span>=4

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">&#19981;&#20801;&#35768;&#21311;&#21517;&#29992;&#25143;&#35775;&#38382;&#65292;&#20801;&#35768;&#26412;&#22320;&#65288;&#31995;&#32479;&#65289;&#29992;&#25143;&#30331;&#24405;</span>
<span style="color: #eedd82;">anonymous_enable</span>=NO
<span style="color: #eedd82;">local_enable</span>=YES
<span style="color: #eedd82;">write_enable</span>=NO

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">&#26159;&#21542;&#37319;&#29992;&#31471;&#21475;20&#36827;&#34892;&#25968;&#25454;&#20256;&#36755;</span>
<span style="color: #eedd82;">connect_from_port_20</span>=YES

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">&#29983;&#25104;&#26085;&#24535;</span>
<span style="color: #eedd82;">xferlog_enable</span>=YES

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">&#25351;&#23450;&#30331;&#24405;&#36716;&#21521;&#30446;&#24405;</span>
<span style="color: #eedd82;">local_root</span>=/home/ftp/ftp
</pre>
</div>
<ul class="org-ul">
<li>Run
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">sudo /etc/init.d/vsftpd start
sudo /etc/init.d/vsftpd stop
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">SCP</h3>
<div class="outline-text-3" id="text-3-2">
<div class="org-src-container">

<pre class="src src-sh">scp name@IP:/home/xx/filename /home/localfolder
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">diff and patch</h2>
<div class="outline-text-2" id="text-4">
<p>
<a href="http://jungels.net/articles/diff-patch-ten-minutes.html">http://jungels.net/articles/diff-patch-ten-minutes.html</a>
</p>
</div>
<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">patch</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">

<pre class="src src-sh">patch &lt; foo.patch
patch foo.txt &lt; bar.patch

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">If you see a name like</span>
<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">/users/stephen/package/src/net/http.c</span>
<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">and you are working in a directory that contains net/http.c, use</span>

patch -p5 &lt; baz.patch

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">To remove a patch, use the -R flag, ie</span>
patch -p5 -R &lt; baz.patch
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2">Creating patches with diff</h3>
<div class="outline-text-3" id="text-4-2">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">To create a patch for a single file, use the form:</span>
diff -u original.c new.c &gt; original.patch

diff -rupN original/ new/ &gt; original.patch
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Network</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">wireless analysis<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup></h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">

<pre class="src src-sh">cat /etc/lsb-release; uname -a
lspci -nnk | grep -iA2 net
lsusb
iwconfig
rfkill list all
lsmod
</pre>
</div>
</div>
<ul class="org-ul"><li><a id="sec-5-1-1" name="sec-5-1-1"></a>do:<br  /><div class="outline-text-4" id="text-5-1-1">
<div class="org-src-container">

<pre class="src src-sh">gksudo gedit /etc/pm/config.d/config

<span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">add one line</span>
<span style="color: #eedd82;">SUSPEND_MODULES</span>=<span style="color: #ffa07a;">"iwl3945"</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-5-1-2" name="sec-5-1-2"></a>after you suspend your computer<br  /><div class="outline-text-4" id="text-5-1-2">
<p>
and before you connect the wireless again please post the output of:
</p>
<div class="org-src-container">

<pre class="src src-sh">rfkill list all
lsmod | grep iwl
dmesg | egrep <span style="color: #ffa07a;">'iwl|firm|etork|wlan0'</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-5-1-3" name="sec-5-1-3"></a>do:<br  /><div class="outline-text-4" id="text-5-1-3">
<div class="org-src-container">

<pre class="src src-sh">gksudo gedit /etc/modprobe.d/50-iwl3945.conf
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">add one line:</span>
options iwl3945 <span style="color: #eedd82;">debug</span>=10 <span style="color: #eedd82;">disable_hw_scan</span>=0 <span style="color: #eedd82;">swcrypto</span>=1
</pre>
</div>
</div>
</li></ul>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">To read</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1">at</h3>
<div class="outline-text-3" id="text-6-1">
<p>
atq 命令来查看系统没有执行工作任务。
</p>

<p>
atrm+任务号例:atrm 1 //删除计划任务1
</p>

<p>
使用权限 : 所有使用者
</p>

<p>
使用方式 : at -V [-q queue] [-f file] [-mldbv] TIME
</p>

<p>
说明 : at 可以让使用者指定在 TIME 这个特定时刻执行某个程式或指令，TIME 的格式是 HH:MM其中的 HH 为小时，MM 为分钟，甚至你也可以指定 am, pm, midnight, noon, teatime(就是下午 4 点锺)等口语词。
</p>

<p>
如果想要指定超过一天内的时间，则可以用 MMDDYY 或者 MM/DD/YY 的格式，其中 MM 是分钟，DD 是第几日，YY 是指年份。另外，使用者甚至也可以使用像是 now + 时间间隔来弹性指定时间，其中的时间间隔可以是 minutes, hours, days, weeks
</p>

<p>
另外，使用者也可指定 today 或 tomorrow 来表示今天或明天。当指定了时间并按下 enter 之后，at 会进入交谈模式并要求输入指令或程式，当你输入完后按下 ctrl+D 即可完成所有动作，至于执行的结果将会寄回你的帐号中。
</p>
<p class="verse">
-V : 印出版本编号<br  />
-q : 使用指定的伫列(Queue)来储存，at 的资料是存放在所谓的 queue 中，使用者可以同时使用多个 queue，而 queue 的编号为 a, b, c&#x2026; z 以及 A, B, &#x2026; Z 共 52 个<br  />
-m : 即使程式/指令执行完成后没有输出结果, 也要寄封信给使用者<br  />
-f file : 读入预先写好的命令档。使用者不一定要使用交谈模式来输入，可以先将所有的指定先写入档案后再一次读入<br  />
-l : 列出所有的指定 (使用者也可以直接使用 atq 而不用 at -l)<br  />
-d : 删除指定 (使用者也可以直接使用 atrm 而不用 at -d)<br  />
-v : 列出所有已经完成但尚未删除的指定<br  />
</p>
<p>
例子 :
三天后的下午 5 点锺执行 /bin/ls :
at 5pm + 3 days /bin/ls
</p>

<p>
三个星期后的下午 5 点锺执行 /bin/ls :
at 5pm + 2 weeks /bin/ls
</p>

<p>
明天的 17:20 执行 /bin/date :
at 17:20 tomorrow /bin/date
</p>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2">badblocks</h3>
<div class="outline-text-3" id="text-6-2">
<p>
badblocks &#x2013; 检查磁盘装置中损坏的区块
</p>

<div class="org-src-container">

<pre class="src src-sh">badblocks [ -svwnf ] [ -b block-size ] [ -c blocks_at_once ] [ -e max_bad_blocks ] [ -d read_delay_factor ] [ -i
      input_file ] [ -o output_file ] [ -p num_passes ] [ -t test_pattern ] device [ last-block ] [ first-block ]
</pre>
</div>

<p>
#+beign<sub>verse</sub>
-b blocksize 指定磁盘的区块大小，单位为字节，默认值为“block 4K ”(4K/block)
-c blocksize 每个区块检查的次数，默认是16次
-f 强制在一个已经挂载的设备上执行读写或非破坏性的写测试操作
Warning: 建议先umount设备，然后再进行坏道检测。仅当/etc/mtab出现误报设备挂载错误的时候可以使用该选项.
-i file 跳过已经显示在file文件中的坏道，而不进行检测（可以避免重复检测）
-o file 把检测结果输出到file文件 -p number 重复搜寻设备，直到在指定通过次数内都没有找到新的坏块位置，默认次数为0
-s 在检查时显示进度
-t pattern 通过按指定的模式读写来检测区块。你可以指定一个0到ULONG<sub>MAX</sub>-1的十进制正值，或使用random（随机）。如果你指定多个模式，badblocks将使用第一个模式检测所有的区块，然后再使用下一个模式检测所有的区块。
Read-only方式仅接受一个模式，它不能接受random模式的。
-v 执行时显示详细的信息
-w 对每个区块都先写入，然后再从它读取信息
[device] 指定要检查的磁盘装置。
[last-block] 指定磁盘装置的区块总数。
[start-block] 指定要从哪个区块开始检查
#+end<sub>verse</sub>
</p>
</div>

<ul class="org-ul"><li><a id="sec-6-2-1" name="sec-6-2-1"></a>example<br  /><div class="outline-text-4" id="text-6-2-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">badblocks -b 4096 -c 16 /dev/hda1 -o hda-badblocks-list</span>
&#20197;4096&#30340;&#19968;&#20010;block&#65292;&#27599;&#19968;&#20010;block&#26816;&#26597;16&#27425;&#65292;&#23558;&#32467;&#26524;&#36755;&#20986;&#21040;&#8220;hda-badblocks-list&#8221;&#25991;&#20214;&#37324;
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">badblocks -b 4096 -c 1 /dev/hda1 -o hda-badblocks-list.1 63000 51000</span>
&#20197;4096&#23383;&#33410;&#20026;&#19968;&#20010;&#8220;block&#8221;,&#27599;&#19968;&#20010;&#8220;block&#8221;&#26816;&#26597;1&#27425;, &#23558;&#32467;&#26524;&#36755;&#20986;&#21040;&#8220;hda-badblocks-list.1&#8221;&#25991;&#20214;&#20013;&#65292;&#30001;&#31532;51000 block&#24320;&#22987;&#65292;&#21040;63000 block&#32467;&#26463;
</pre>
</div>
</div>
</li></ul>
</div>



<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3">cfdisk</h3>
<div class="outline-text-3" id="text-6-3">
<p>
功能说明：磁盘分区。
</p>

<p>
语　　法：cfdisk [-avz][-c &lt;柱面数目&gt;-h &lt;磁头数目&gt;-s &lt;盘区数目&gt;][-P &lt;r,s,t&gt;][外围设备代号]
</p>

<p>
补充说明：cfdisk是用来磁盘分区的程序，它十分类似DOS的fdisk，具有互动式操作界面而非传统fdisk的问答式界面，您可以轻易地利用方向键来操控分区操作。
</p>

<p>
参　　数：
</p>
<p class="verse">
-a   在程序里不用反白代表选取，而以箭头表示。<br  />
-c&lt;柱面数目&gt;   忽略BIOS的数值，直接指定磁盘的柱面数目。<br  />
-h&lt;磁头数目&gt;   忽略BIOS的数值，直接指定磁盘的磁头数目。<br  />
-P&lt;r,s,t&gt;   显示分区表的内容，附加参数"r"会显示整个分区表的详细资料，附加参数"s"会依照磁区的顺序显示相关信息，附加参数"t"则会以磁头，磁区，柱面的方式来显示资料。<br  />
-s&lt;磁区数目&gt;   忽略BIOS的数值，直接指定磁盘的磁区数目。<br  />
-v   显示版本信息。<br  />
-z   不读取现有的分区，直接当作没有分区的新磁盘使用。<br  />
</p>
</div>
</div>

<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4">chattr 用于设置文件属性     lsattr 用于查看文件属性</h3>
<div class="outline-text-3" id="text-6-4">
<p>
1.作用
</p>

<p>
修改ext2和ext3文件系统属性(attribute)，使用权限超级用户。 
</p>

<p>
2.格式
</p>

<p>
chattr [-RV] [-+=AacDdijsSu] [-v version] 文件或目录 
</p>

<p>
3.主要参数
</p>

<p>
－R：递归处理所有的文件及子目录。
</p>

<p>
－V：详细显示修改内容，并打印输出。
</p>

<p>
－：失效属性。
</p>

<p>
＋：激活属性。
</p>

<p>
= ：指定属性。
</p>

<p>
A：Atime，告诉系统不要修改对这个文件的最后访问时间。
</p>

<p>
S：Sync，一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘。 
</p>

<p>
a：Append Only，系统只允许在这个文件之后追加数据，不允许任何进程覆盖或截断这个文件。如果目录具有这个属性，系统将只允许在这个目录下建立和修改文件，而不允许删除任何文件。 
</p>

<p>
i：Immutable，系统不允许对这个文件进行任何的修改。如果目录具有这个属性，那么任何的进程只能修改目录之下的文件，不允许建立和删除文件。 
</p>

<p>
D：检查压缩文件中的错误。
</p>

<p>
d：No dump，在进行文件系统备份时，dump程序将忽略这个文件。 
</p>

<p>
C：Compress，系统以透明的方式压缩这个文件。从这个文件读取时，返回的是解压之后的数据；而向这个文件中写入数据时，数据首先被压缩之后才写入磁盘。 
</p>

<p>
s：Secure Delete，让系统在删除这个文件时，使用0填充文件所在的区域。 
</p>

<p>
u：Undelete，当一个应用程序请求删除这个文件，系统会保留其数据块以便以后能够恢复删除这个文件。 
</p>

<p>
4.说明
</p>

<p>
chattr 命令的作用很大，其中一些功能是由Linux内核版本来支持的，如果Linux内核版本低于2.2，那么许多功能不能实现。同样－D检查压缩文件中的错误的功能，需要2.5.19以上内核才能支持。另外，通过chattr命令修改属性能够提高系统的安全性，但是它并不适合所有的目录。chattr命令不能保护/、/dev、/tmp、/var目录。
</p>


<p>
Linux命令：lsattr
功能说明：显示文件属性。 
</p>

<p>
语　　法：lsattr [-adlRvV][文件或目录&#x2026;]  
补充说明：用chattr执行改变文件或目录的属性，可执行lsattr指令查询其属性。参　　数：
 -a 　显示所有文件和目录，包括以"."为名称开头字符的额外内建，现行目录"."与上层目录".."。 
 -d 　显示，目录名称，而非其内容。 
 -l 　此参数目前没有任何作用。 
 -R 　递归处理，将指定目录下的所有文件及子目录一并处理。 
 -v 　显示文件或目录版本。 
 -V 　显示版本信息。 
</p>
</div>
</div>

<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5">chgrp命令</h3>
<div class="outline-text-3" id="text-6-5">
<p>
　　功能：改变文件或目录所属的组。
</p>

<p>
　　语法：chgrp [选项] group filename?
</p>

<p>
　　该命令改变指定指定文件所属的用户组。其中group可以是用户组ID，也可以是/etc/group文件中用户组的组名。文件名是以空格分开的要改变属组的文件列表，支持通配符。如果用户不是该文件的属主或超级用户，则不能改变该文件的组。
</p>

<p>
　　该命令的各选项含义为：
</p>

<p>
　　- R 递归式地改变指定目录及其下的所有子目录和文件的属组。
</p>
</div>
</div>

<div id="outline-container-sec-6-6" class="outline-3">
<h3 id="sec-6-6">chown 命令</h3>
<div class="outline-text-3" id="text-6-6">
<p>
　　功能：更改某个文件或目录的属主和属组。这个命令也很常用。例如root用户把自己的一个文件拷贝给用户xu，为了让用户xu能够存取这个文件，root用户应该把这个文件的属主设为xu，否则，用户xu无法存取这个文件。
</p>

<p>
　　语法：chown [选项] 用户或组 文件
</p>

<p>
　　说明：chown将指定文件的拥有者改为指定的用户或组。用户可以是用户名或用户ID。组可以是组名或组ID。文件是以空格分开的要改变权限的文件列表，支持通配符。
</p>

<p>
　　该命令的各选项含义如下：
</p>

<p>
　　- R 递归式地改变指定目录及其下的所有子目录和文件的拥有者。
</p>

<p>
　　- v 显示chown命令所做的工作。
</p>
</div>
</div>

<div id="outline-container-sec-6-7" class="outline-3">
<h3 id="sec-6-7">chroot(change root)</h3>
<div class="outline-text-3" id="text-6-7">
<p>
功能说明：改变根目录。
</p>

<p>
语　　法：chroot [&#x2013;help][&#x2013;version][目的目录][执行指令&#x2026;]
</p>

<p>
补充说明：把根目录换成指定的目的目录。
</p>


<p>
命令CHROOT 的意义何在: 
</p>
<ol class="org-ol">
<li>限制CHROOT环境下的使用者所能行的程式，如SetUid的程式，或是造成 Load 的 Compiler等等 
</li>
<li>防止使用者存取某些特定档案及配置文件，如/etc/passwd 
</li>
<li>防止入侵者/bin/rm -rf / 
</li>
<li>提供Guest服务及限制不守规矩的使用者。 
</li>
<li>增强系系统的安全。
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-6-8" class="outline-3">
<h3 id="sec-6-8">chsh</h3>
<div class="outline-text-3" id="text-6-8">
<p>
shell改成zsh
</p>

<p>
[rocrocket@jb51.net ~]$ chsh -s /bin/zsh
</p>
</div>
</div>

<div id="outline-container-sec-6-9" class="outline-3">
<h3 id="sec-6-9">cksum</h3>
<div class="outline-text-3" id="text-6-9">
<p>
语　　法：cksum [&#x2013;help][&#x2013;version][文件&#x2026;] 
</p>
</div>
</div>
<div id="outline-container-sec-6-10" class="outline-3">
<h3 id="sec-6-10">cmp</h3>
<div class="outline-text-3" id="text-6-10">
<p>
cmp（compare）功能说明：比较两个文件是否有差异
</p>

<p>
语法：cmp [-clsv] [-i&lt;字符数目&gt;] [&#x2013;help] [第一个文件] [第二个文件]
</p>

<p>
补充说明：当相互比较的两个文件完全一样时，不会显示任何信息，若发现差异，会显示出第一个不同之处的字符和列数缩号，若不指定任何文件名或是所给与的文件名为—，则cmp命令会从标准的输入设备读取数据。
</p>

<p>
参数：
</p>

<p>
-c 除了表明差异处的十进制字码外，一并显示该字符所对应字符。
</p>

<p>
-i&lt;字符数目&gt; 指定一个数目
</p>

<p>
-l 标示出所有不一样的地方
</p>

<p>
-s 不显示错误信息
</p>

<p>
-v 显示版本信息
</p>

<p>
&#x2013;help 在线帮助
</p>

<p>
参考dos下的comp及fc命令：
</p>

<p>
Comp 
逐字节地比较两个文件或几组文件的内容。Comp 可以比较相同驱动器或不同驱动器上的文件以及相同目录或不同目录中的文件。comp 比较文件时，它将显示文件的位置和文件名。如果在不含参数的情况下使用，则 comp 提示输入要进行比较的文件。语法 
comp [data1] [data2] [/d] [/a] [/l] [/n=number] [/c] 
参数 
data1 
指定要比较的第一个文件或文件集的位置和名称。使用通配字符（* 和 ?）可以指定多个文件。 
data2 
指定要比较的第二个文件或文件集的位置和名称。使用通配字符（* 和 ?）可以指定多个文件。 
/d 
用十进制格式显示差别。（默认格式为十六进制。） 
/a 
将差别显示为字符形式。 
/l 
显示出现差别的行编号，而不显示字节偏量。 
/n=number 
比较两个文件的第一个 number，即使两个文件的大小并不相同。 
/c 
执行不区分大小写的比较。 
/? 
在命令提示符显示帮助。 
</p>
</div>
</div>

<div id="outline-container-sec-6-11" class="outline-3">
<h3 id="sec-6-11">col</h3>
<div class="outline-text-3" id="text-6-11">
<p>
文档编辑
</p>

<p>
功能说明：过滤控制字符。
</p>

<p>
语　　法：col [-bfx][-l&lt;缓冲区列数&gt;]
</p>

<p>
补充说明：在许多UNIX说明文件里，都有RLF控制字符。当我们运用shell特殊字符"&gt;"和"&gt;&gt;"，把说明文件的内容输出成纯文本文件时，控制字符会变成乱码，col指令则能有效滤除这些控制字符。
</p>

<p>
参　　数：
</p>
<p class="verse">
-b   过滤掉所有的控制字符，包括RLF和HRLF。<br  />
-f   滤除RLF字符，但允许将HRLF字符呈现出来。<br  />
-x   以多个空格字符来表示跳格字符。<br  />
-l&lt;缓冲区列数&gt;   预设的内存缓冲区有128列，您可以自行指定缓冲区的大小。<br  />
</p>
</div>
</div>

<div id="outline-container-sec-6-12" class="outline-3">
<h3 id="sec-6-12">colrm</h3>
<div class="outline-text-3" id="text-6-12">
<p>
column remove
</p>

<p>
功能说明：滤掉指定的行。
</p>

<p>
语　　法：colrm [开始行数编号&lt;结束行数编号&gt;]
</p>

<p>
标准输入作为输入：   
</p>

<p>
colrm 3 abcd 终端会输出ab，即将第3列之后的删去输出。   
</p>

<p>
colrm 3 5 123456 终端会输出126，即将第3到5列删去。
</p>
</div>
</div>

<div id="outline-container-sec-6-13" class="outline-3">
<h3 id="sec-6-13">comm</h3>
<div class="outline-text-3" id="text-6-13">
<p>
功能说明：比较两个已排过序的文件。
</p>

<p>
语　　法：comm [-123][&#x2013;help][&#x2013;version][第1个文件][第2个文件]
</p>

<p>
补充说明：这项指令会一列列地比较两个已排序文件的差异，并将其结果显示出来，如果没有指定任何参数，则会把结果分成3行显示：第1行仅是在第1个文件中出现过的列，第2行是仅在第2个文件中出现过的列，第3行则是在第1与第2个文件里都出现过的列。若给予的文件名称为"-"，则comm指令会从标准输入设备读取数据。
</p>

<p>
参　　数：
</p>
<p class="verse">
-1   不显示只在第1个文件里出现过的列。<br  />
-2   不显示只在第2个文件里出现过的列。<br  />
-3   不显示只在第1和第2个文件里出现过的列。<br  />
&#x2013;help   在线帮助。<br  />
&#x2013;version   显示版本信息。<br  />
</p>
</div>
</div>

<div id="outline-container-sec-6-14" class="outline-3">
<h3 id="sec-6-14">cp</h3>
<div class="outline-text-3" id="text-6-14">
<p>
功能: 复制文件或目录说明: cp指令用于复制文件或目录，如同时指定两个以上的文件或目录，且最后的目的地是一个已经存在的目录，则它会把前面指定的所有文件或目录复制到此目录中。若同时指定多个文件或目录，而最后的目的地并非一个已存在的目录，则会出现错误信息参数:
</p>
<p class="verse">
-a 或 &#x2013;archive     此参数的效果和同时指定"-dpR"参数相同<br  />
-b 或 &#x2013;backup      删除、覆盖目的文件先备份，备份的文件或目录亦建立为符号链接，并指向源文件或目录链接的源文件或目录。假如没有加上这个参数，在复制过程中若遇到符号链接，则会直接复制源文件或目录<br  />
-f 或 &#x2013;force       强行复制文件或目录， 不论目的文件或目录是否已经存在<br  />
-i 或 &#x2013;interactive 覆盖文件之前先询问用户<br  />
-l 或 &#x2013;link        对源文件建立硬链接，而非复制文件<br  />
-p 或 &#x2013;preserve    保留源文件或目录的属性，包括所有者、所属组、权限与时间<br  />
-P 或 &#x2013;parents     保留源文件或目录的路径，此路径可以是绝对路径或相对路径，且目的目录必须已经丰在<br  />
-r                  递归处理，将指定目录下的文件与子目录一并处理。若源文件或目录的形态，不属于目录或符号链接，则一律视为普通文件处理<br  />
-R 或 &#x2013;recursive   递归处理，将指定目录下的文件及子目录一并处理<br  />
-s 或 &#x2013;symbolic-link  对源文件建立符号链接，而非复制文件<br  />
-S &lt;备份字尾字符串&gt; 或 &#x2013;suffix=&lt;备份字尾字符串&gt; 用"-b"参数备份目的文件后，备份文件的字尾会被加上一个备份字符串。默认的备份字尾符串是符号"~"<br  />
-u 或 &#x2013;update      使用这项参数之后，只会在源文件的修改时间(Modification Time)较目的文件更新时，或是名称相互对应的目的文件并不存在，才复制文件<br  />
-v 或 &#x2013;verbose     显示执行过程<br  />
-V &lt;备份方式&gt; 或 &#x2013;version-control=&lt;备份方式&gt;  指定当备份文件时，备份文件名的命名方式，有以下3种:<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.numbered或t, 将使用备份编号，会在字尾加上~1~字符串，其数字编号依次递增<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.simple或never 将使用简单备份，默认的备份字尾字符串是~, 也可通过-S来指定<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;3.existing或nil将使用当前方式，程序会先检查是否存在着备份编号，若有则采用备份编号，若无则采用简单备份<br  />
-x 或 &#x2013;one-file-system  复制的文件或目录存放的文件系统，必须与cp指令执行时所处的文件系统相同，否则不复制，亦不处理位于其他分区的文件<br  />
&#x2013;help              显示在线帮助<br  />
&#x2013;sparse=&lt;使用时机&gt;  设置保存希疏文件的时机<br  />
&#x2013;version           显示版本<br  />
</p>
</div>
<ul class="org-ul"><li><a id="sec-6-14-1" name="sec-6-14-1"></a>示例:<br  /><div class="outline-text-4" id="text-6-14-1">
<p>
.复制文件，只有源文件较目的文件的修改时间新时，才复制文件
 cp -u -v file1 file2
</p>

<p>
.将文件file1复制成文件file2
 cp file1 file2
</p>

<p>
.采用交互方式将文件file1复制成文件file2
 cp -i file1 file2
</p>

<p>
.将文件file1复制成file2，因为目的文件已经存在，所以指定使用强制复制的模式
 cp -f file1 file2
</p>

<p>
.将目录dir1复制成目录dir2
 cp -R file1 file2
</p>

<p>
    .同时将文件file1、file2、file3与目录dir1复制到dir2
　　 cp -R file1 file2 file3 dir1 dir2
</p>

<p>
.复制时保留文件属性
 cp -p a.txt tmp/
</p>

<p>
.复制时保留文件的目录结构
 cp -P  <i>var/tmp/a.txt  ./temp</i>
</p>

<p>
.复制时产生备份文件
 cp -b a.txt tmp/
</p>

<p>
.复制时产生备份文件，尾标 ~1~格式
 cp -b -V t   a.txt /tmp    
</p>

<p>
.指定备份文件尾标    
 cp -b -S _bak a.txt /tmp
</p>
</div>
</li></ul>
</div>








<div id="outline-container-sec-6-15" class="outline-3">
<h3 id="sec-6-15">tar(tape archive)</h3>
<div class="outline-text-3" id="text-6-15">
<p>
简介参数：
</p>
<p class="verse">
-c  ：建立一个压缩档案的参数指令(create 的意思)；<br  />
-x  ：解开一个压缩档案的参数指令！<br  />
-t  ：查看 tarfile 里面的档案！<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;特别注意，在参数的下达中， c/x/t 仅能存在一个！不可同时存在！<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;因为不可能同时压缩与解压缩。<br  />
-z  ：是否同时具有 gzip 的属性？亦即是否需要用 gzip 压缩？<br  />
-j  ：是否同时具有 bzip2 的属性？亦即是否需要用 bzip2 压缩？<br  />
-v  ：压缩的过程中显示档案！这个常用，但不建议用在背景执行过程！<br  />
-f  ：使用档名，请留意，在 f 之后要立即接档名喔！不要再加参数！<br  />
　　　例如使用『 tar -zcvfP tfile sfile』就是错误的写法，要写成<br  />
　　　『 tar -zcvPf tfile sfile』才对喔！<br  />
-p  ：使用原档案的原来属性（属性不会依据使用者而变）<br  />
-P  ：可以使用绝对路径来压缩！<br  />
-N  ：比后面接的日期(yyyy/mm/dd)还要新的才会被打包进新建的档案中！<br  />
&#x2013;exclude FILE：在压缩的过程中，不要将 FILE 打包！<br  />
</p>

<p>
范例：范例一：将整个 /etc 目录下的档案全部打包成为 /tmp/etc.tar
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# tar -cvf /tmp/etc.tar /etc  &lt;==&#20165;&#25171;&#21253;&#65292;&#19981;&#21387;&#32553;&#65281;
[root@linux ~]# tar -zcvf /tmp/etc.tar.gz /etc  &lt;==&#25171;&#21253;&#21518;&#65292;&#20197; gzip &#21387;&#32553;
[root@linux ~]# tar -jcvf /tmp/etc.tar.bz2 /etc  &lt;==&#25171;&#21253;&#21518;&#65292;&#20197; bzip2 &#21387;&#32553;
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#29305;&#21035;&#27880;&#24847;&#65292;&#22312;&#21442;&#25968; f &#20043;&#21518;&#30340;&#26723;&#26696;&#26723;&#21517;&#26159;&#33258;&#24049;&#21462;&#30340;&#65292;&#25105;&#20204;&#20064;&#24815;&#19978;&#37117;&#29992; .tar &#26469;&#20316;&#20026;&#36776;&#35782;&#12290;</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#22914;&#26524;&#21152; z &#21442;&#25968;&#65292;&#21017;&#20197; .tar.gz &#25110; .tgz &#26469;&#20195;&#34920; gzip &#21387;&#32553;&#36807;&#30340; tar file &#65374;</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#22914;&#26524;&#21152; j &#21442;&#25968;&#65292;&#21017;&#20197; .tar.bz2 &#26469;&#20316;&#20026;&#38468;&#26723;&#21517;&#21834;&#65374;</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#19978;&#36848;&#25351;&#20196;&#22312;&#25191;&#34892;&#30340;&#26102;&#20505;&#65292;&#20250;&#26174;&#31034;&#19968;&#20010;&#35686;&#21578;&#35759;&#24687;&#65306;</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#12302;tar: Removing leading `/' from member names&#12303;&#37027;&#26159;&#20851;&#20110;&#32477;&#23545;&#36335;&#24452;&#30340;&#29305;&#27530;&#35774;&#23450;&#12290;</span>
</pre>
</div>

<p>
范例二：查阅上述 /tmp/etc.tar.gz 档案内有哪些档案？
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# tar -ztvf /tmp/etc.tar.gz
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#30001;&#20110;&#25105;&#20204;&#20351;&#29992; gzip &#21387;&#32553;&#65292;&#25152;&#20197;&#35201;&#26597;&#38405;&#35813; tar file &#20869;&#30340;&#26723;&#26696;&#26102;&#65292;</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#23601;&#24471;&#35201;&#21152;&#19978; z &#36825;&#20010;&#21442;&#25968;&#20102;&#65281;&#36825;&#24456;&#37325;&#35201;&#30340;&#65281;</span>
</pre>
</div>

<p>
范例三：将 /tmp/etc.tar.gz 档案解压缩在 /usr/local/src 底下
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# cd /usr/local/src
[root@linux src]# tar -zxvf /tmp/etc.tar.gz
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#22312;&#39044;&#35774;&#30340;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558;&#21387;&#32553;&#26723;&#22312;&#20219;&#20309;&#22320;&#26041;&#35299;&#24320;&#30340;&#65281;&#20197;&#36825;&#20010;&#33539;&#20363;&#26469;&#35828;&#65292;</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#25105;&#20808;&#23558;&#24037;&#20316;&#30446;&#24405;&#21464;&#25442;&#21040; /usr/local/src &#24213;&#19979;&#65292;&#24182;&#19988;&#35299;&#24320; /tmp/etc.tar.gz &#65292;</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#21017;&#35299;&#24320;&#30340;&#30446;&#24405;&#20250;&#22312; /usr/local/src/etc &#21602;&#65281;&#21478;&#22806;&#65292;&#22914;&#26524;&#24744;&#36827;&#20837; /usr/local/src/etc</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#21017;&#20250;&#21457;&#29616;&#65292;&#35813;&#30446;&#24405;&#19979;&#30340;&#26723;&#26696;&#23646;&#24615;&#19982; /etc/ &#21487;&#33021;&#20250;&#26377;&#25152;&#19981;&#21516;&#21908;&#65281;</span>
</pre>
</div>

<p>
范例四：在 /tmp 底下，我只想要将 /tmp/etc.tar.gz 内的 etc/passwd 解开而已
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# cd /tmp
[root@linux tmp]# tar -zxvf /tmp/etc.tar.gz etc/passwd
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#25105;&#21487;&#20197;&#36879;&#36807; tar -ztvf &#26469;&#26597;&#38405; tarfile &#20869;&#30340;&#25991;&#20214;&#21517;&#31216;&#65292;&#22914;&#26524;&#21333;&#21482;&#35201;&#19968;&#20010;&#26723;&#26696;&#65292;</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#23601;&#21487;&#20197;&#36879;&#36807;&#36825;&#20010;&#26041;&#24335;&#26469;&#19979;&#36798;&#65281;&#27880;&#24847;&#21040;&#65281; etc.tar.gz &#20869;&#30340;&#26681;&#30446;&#24405; / &#26159;&#34987;&#25343;&#25481;&#20102;&#65281;</span>
</pre>
</div>

<p>
范例五：将 <i>etc</i> 内的所有档案备份下来，并且保存其权限！
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# tar -zcvpf /tmp/etc.tar.gz /etc
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#36825;&#20010; -p &#30340;&#23646;&#24615;&#26159;&#24456;&#37325;&#35201;&#30340;&#65292;&#23588;&#20854;&#26159;&#24403;&#24744;&#35201;&#20445;&#30041;&#21407;&#26412;&#26723;&#26696;&#30340;&#23646;&#24615;&#26102;&#65281;</span>
</pre>
</div>

<p>
范例六：在 /home 当中，比 2005/06/01 新的档案才备份
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# tar -N <span style="color: #ffa07a;">'2005/06/01'</span> -zcvf home.tar.gz /home
</pre>
</div>

<p>
范例七：我要备份 /home, /etc ，但不要 /home/dmtsai
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# tar --exclude /home/dmtsai -zcvf myfile.tar.gz /home/* /etc
</pre>
</div>

<p>
范例八：将 <i>etc</i> 打包后直接解开在 /tmp 底下，而不产生档案！
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# cd /tmp
[root@linux tmp]# tar -cvf - /etc | tar -xvf -
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#36825;&#20010;&#21160;&#20316;&#26377;&#28857;&#20687;&#26159; cp -r /etc /tmp &#21862;&#65374;&#20381;&#26087;&#26159;&#26377;&#20854;&#26377;&#29992;&#36884;&#30340;&#65281;</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#35201;&#27880;&#24847;&#30340;&#22320;&#26041;&#22312;&#20110;&#36755;&#20986;&#26723;&#21464;&#25104; - &#32780;&#36755;&#20837;&#26723;&#20063;&#21464;&#25104; - &#65292;&#21448;&#26377;&#19968;&#20010; | &#23384;&#22312;&#65374;</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#36825;&#20998;&#21035;&#20195;&#34920; standard output, standard input &#19982;&#31649;&#32447;&#21629;&#20196;&#21862;&#65281;</span>
</pre>
</div>
</div>
</div>




<div id="outline-container-sec-6-16" class="outline-3">
<h3 id="sec-6-16">tcpdump命令详解<sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup></h3>
<div class="outline-text-3" id="text-6-16">
<p>
用简单的话来定义tcpdump，就是：dump the traffic on a network，根据使用者的定义对网络上的数据包进行截获的包分析工具。 tcpdump可以将网络中传送的数据包的“头”完全截获下来提供分析。它支持针对网络层、协议、主机、网络或端口的过滤，并提供and、or、not等逻辑语句来帮助你去掉无用的信息。
</p>

<p>
实用命令实例默认启动
</p>

<p>
tcpdump
普通情况下，直接启动tcpdump将监视第一个网络接口上所有流过的数据包。
</p>

<p>
监视指定网络接口的数据包
</p>

<p>
tcpdump -i eth1
如果不指定网卡，默认tcpdump只会监视第一个网络接口，一般是eth0，下面的例子都没有指定网络接口。　
</p>

<p>
监视指定主机的数据包
</p>
<div class="org-src-container">

<pre class="src src-sh">&#25171;&#21360;&#25152;&#26377;&#36827;&#20837;&#25110;&#31163;&#24320;sundown&#30340;&#25968;&#25454;&#21253;.
tcpdump host sundown
&#20063;&#21487;&#20197;&#25351;&#23450;ip,&#20363;&#22914;&#25130;&#33719;&#25152;&#26377;210.27.48.1 &#30340;&#20027;&#26426;&#25910;&#21040;&#30340;&#21644;&#21457;&#20986;&#30340;&#25152;&#26377;&#30340;&#25968;&#25454;&#21253;

tcpdump host 210.27.48.1 
&#25171;&#21360;helios &#19982; hot &#25110;&#32773;&#19982; ace &#20043;&#38388;&#36890;&#20449;&#30340;&#25968;&#25454;&#21253;

tcpdump host helios and <span style="color: #ffa07a;">\(</span> hot or ace <span style="color: #ffa07a;">\)</span>
&#25130;&#33719;&#20027;&#26426;210.27.48.1 &#21644;&#20027;&#26426;210.27.48.2 &#25110;210.27.48.3&#30340;&#36890;&#20449;

tcpdump host 210.27.48.1 and <span style="color: #ffa07a;">\ </span>(210.27.48.2 or 210.27.48.3 <span style="color: #ffa07a;">\)</span> 
&#25171;&#21360;ace&#19982;&#20219;&#20309;&#20854;&#20182;&#20027;&#26426;&#20043;&#38388;&#36890;&#20449;&#30340;IP &#25968;&#25454;&#21253;, &#20294;&#19981;&#21253;&#25324;&#19982;helios&#20043;&#38388;&#30340;&#25968;&#25454;&#21253;.

tcpdump ip host ace and not helios
&#22914;&#26524;&#24819;&#35201;&#33719;&#21462;&#20027;&#26426;210.27.48.1&#38500;&#20102;&#21644;&#20027;&#26426;210.27.48.2&#20043;&#22806;&#25152;&#26377;&#20027;&#26426;&#36890;&#20449;&#30340;ip&#21253;&#65292;&#20351;&#29992;&#21629;&#20196;&#65306;

tcpdump ip host 210.27.48.1 and ! 210.27.48.2
&#25130;&#33719;&#20027;&#26426;hostname&#21457;&#36865;&#30340;&#25152;&#26377;&#25968;&#25454;

tcpdump -i eth0 src host hostname
&#30417;&#35270;&#25152;&#26377;&#36865;&#21040;&#20027;&#26426;hostname&#30340;&#25968;&#25454;&#21253;

tcpdump -i eth0 dst host hostname


&#30417;&#35270;&#25351;&#23450;&#20027;&#26426;&#21644;&#31471;&#21475;&#30340;&#25968;&#25454;&#21253;

&#22914;&#26524;&#24819;&#35201;&#33719;&#21462;&#20027;&#26426;210.27.48.1&#25509;&#25910;&#25110;&#21457;&#20986;&#30340;telnet&#21253;&#65292;&#20351;&#29992;&#22914;&#19979;&#21629;&#20196;

tcpdump tcp port 23 host 210.27.48.1
&#23545;&#26412;&#26426;&#30340;udp 123 &#31471;&#21475;&#36827;&#34892;&#30417;&#35270; 123 &#20026;ntp&#30340;&#26381;&#21153;&#31471;&#21475;

tcpdump udp port 123
</pre>
</div>

<p>
监视指定网络的数据包
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #87cefa;">&#25171;&#21360;&#26412;&#22320;&#20027;&#26426;&#19982;Berkeley&#32593;&#32476;&#19978;&#30340;&#20027;&#26426;&#20043;&#38388;&#30340;&#25152;&#26377;&#36890;&#20449;&#25968;&#25454;&#21253;</span>(nt: ucb-ether, &#27492;&#22788;&#21487;&#29702;&#35299;&#20026;<span style="color: #ffa07a;">'Berkeley&#32593;&#32476;'</span>&#30340;&#32593;&#32476;&#22320;&#22336;,&#27492;&#34920;&#36798;&#24335;&#26368;&#21407;&#22987;&#30340;&#21547;&#20041;&#21487;&#34920;&#36798;&#20026;: &#25171;&#21360;&#32593;&#32476;&#22320;&#22336;&#20026;ucb-ether&#30340;&#25152;&#26377;&#25968;&#25454;&#21253;)

tcpdump net ucb-ether
<span style="color: #87cefa;">&#25171;&#21360;&#25152;&#26377;&#36890;&#36807;&#32593;&#20851;snup&#30340;ftp&#25968;&#25454;&#21253;</span>(&#27880;&#24847;, &#34920;&#36798;&#24335;&#34987;&#21333;&#24341;&#21495;&#25324;&#36215;&#26469;&#20102;, &#36825;&#21487;&#20197;&#38450;&#27490;shell&#23545;&#20854;&#20013;&#30340;&#25324;&#21495;&#36827;&#34892;&#38169;&#35823;&#35299;&#26512;)

tcpdump <span style="color: #ffa07a;">'gateway snup and (port ftp or ftp-data)'</span>
&#25171;&#21360;&#25152;&#26377;&#28304;&#22320;&#22336;&#25110;&#30446;&#26631;&#22320;&#22336;&#26159;&#26412;&#22320;&#20027;&#26426;&#30340;IP&#25968;&#25454;&#21253;

(&#22914;&#26524;&#26412;&#22320;&#32593;&#32476;&#36890;&#36807;&#32593;&#20851;&#36830;&#21040;&#20102;&#21478;&#19968;&#32593;&#32476;, &#21017;&#21478;&#19968;&#32593;&#32476;&#24182;&#19981;&#33021;&#31639;&#20316;&#26412;&#22320;&#32593;&#32476;.(nt: &#27492;&#21477;&#32763;&#35793;&#26354;&#25240;,&#38656;&#34917;&#20805;).localnet &#23454;&#38469;&#20351;&#29992;&#26102;&#35201;&#30495;&#27491;&#26367;&#25442;&#25104;&#26412;&#22320;&#32593;&#32476;&#30340;&#21517;&#23383;)

tcpdump ip and not net localnet
</pre>
</div>

<p>
监视指定协议的数据包
</p>
<div class="org-src-container">

<pre class="src src-sh">&#25171;&#21360;TCP&#20250;&#35805;&#20013;&#30340;&#30340;&#24320;&#22987;&#21644;&#32467;&#26463;&#25968;&#25454;&#21253;, &#24182;&#19988;&#25968;&#25454;&#21253;&#30340;&#28304;&#25110;&#30446;&#30340;&#19981;&#26159;&#26412;&#22320;&#32593;&#32476;&#19978;&#30340;&#20027;&#26426;.(nt: localnet, &#23454;&#38469;&#20351;&#29992;&#26102;&#35201;&#30495;&#27491;&#26367;&#25442;&#25104;&#26412;&#22320;&#32593;&#32476;&#30340;&#21517;&#23383;))

tcpdump <span style="color: #ffa07a;">'tcp[tcpflags] &amp; (tcp-syn|tcp-fin) != 0 and not src and dst net localnet'</span>
&#25171;&#21360;&#25152;&#26377;&#28304;&#25110;&#30446;&#30340;&#31471;&#21475;&#26159;80, &#32593;&#32476;&#23618;&#21327;&#35758;&#20026;IPv4, &#24182;&#19988;&#21547;&#26377;&#25968;&#25454;,&#32780;&#19981;&#26159;SYN,FIN&#20197;&#21450;ACK-only&#31561;&#19981;&#21547;&#25968;&#25454;&#30340;&#25968;&#25454;&#21253;.(ipv6&#30340;&#29256;&#26412;&#30340;&#34920;&#36798;&#24335;&#21487;&#20570;&#32451;&#20064;)

tcpdump <span style="color: #ffa07a;">'tcp port 80 and (((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)'</span>
(nt: &#21487;&#29702;&#35299;&#20026;, ip[2:2]&#34920;&#31034;&#25972;&#20010;ip&#25968;&#25454;&#21253;&#30340;&#38271;&#24230;, (ip[0]&amp;0xf)&lt;&lt;2)&#34920;&#31034;ip&#25968;&#25454;&#21253;&#21253;&#22836;&#30340;&#38271;&#24230;(ip[0]&amp;0xf&#20195;&#34920;&#21253;&#20013;&#30340;IHL&#22495;, &#32780;&#27492;&#22495;&#30340;&#21333;&#20301;&#20026;32bit, &#35201;&#25442;&#31639;

<span style="color: #ffff00; font-weight: bold;">&#25104;&#23383;&#33410;&#25968;&#38656;&#35201;&#20056;&#20197;4,&#12288;&#21363;&#24038;&#31227;2.&#12288;(tcp[12]&amp;0xf0)&gt;&gt;4 &#34920;&#31034;tcp&#22836;&#30340;&#38271;&#24230;, &#27492;&#22495;&#30340;&#21333;&#20301;&#20063;&#26159;32bit,&#12288;&#25442;&#31639;&#25104;&#27604;&#29305;&#25968;&#20026; ((tcp[12]&amp;0xf0) &gt;&gt; 4)&#12288;&lt;&lt;&#12288;&#65298;,&#12288;</span>
<span style="color: #ffff00; font-weight: bold;">&#21363; ((tcp[12]&amp;0xf0)&gt;&gt;2).&#12288;((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0&#12288;&#34920;&#31034;: &#25972;&#20010;ip&#25968;&#25454;&#21253;&#30340;&#38271;&#24230;&#20943;&#21435;ip&#22836;&#30340;&#38271;&#24230;,&#20877;&#20943;&#21435;</span>
<span style="color: #ffff00; font-weight: bold;">tcp&#22836;&#30340;&#38271;&#24230;&#19981;&#20026;0, &#36825;&#23601;&#24847;&#21619;&#30528;, ip&#25968;&#25454;&#21253;&#20013;&#30830;&#23454;&#26159;&#26377;&#25968;&#25454;.&#23545;&#20110;ipv6&#29256;&#26412;&#21482;&#38656;&#32771;&#34385;ipv6&#22836;&#20013;&#30340;'Payload Length' &#19982; 'tcp&#22836;&#30340;&#38271;&#24230;'&#30340;&#24046;&#20540;, &#24182;&#19988;&#20854;&#20013;&#34920;&#36798;&#26041;&#24335;'ip[]'&#38656;&#25442;&#25104;'ip6[]'.)</span>

<span style="color: #ffff00; font-weight: bold;">&#25171;&#21360;&#38271;&#24230;&#36229;&#36807;576&#23383;&#33410;, &#24182;&#19988;&#32593;&#20851;&#22320;&#22336;&#26159;snup&#30340;IP&#25968;&#25454;&#21253;</span>

<span style="color: #ffff00; font-weight: bold;">tcpdump 'gateway snup and ip[2:2] &gt; 576'</span>
<span style="color: #ffff00; font-weight: bold;">&#25171;&#21360;&#25152;&#26377;IP&#23618;&#24191;&#25773;&#25110;&#22810;&#25773;&#30340;&#25968;&#25454;&#21253;&#65292; &#20294;&#19981;&#26159;&#29289;&#29702;&#20197;&#22826;&#32593;&#23618;&#30340;&#24191;&#25773;&#25110;&#22810;&#25773;&#25968;&#25454;&#25253;</span>

<span style="color: #ffff00; font-weight: bold;">tcpdump 'ether[0] &amp; 1 = 0 and ip[16] &gt;= 224'</span>
<span style="color: #ffff00; font-weight: bold;">&#25171;&#21360;&#38500;'echo request'&#25110;&#32773;'echo reply'&#31867;&#22411;&#20197;&#22806;&#30340;ICMP&#25968;&#25454;&#21253;( &#27604;&#22914;,&#38656;&#35201;&#25171;&#21360;&#25152;&#26377;&#38750;ping &#31243;&#24207;&#20135;&#29983;&#30340;&#25968;&#25454;&#21253;&#26102;&#21487;&#29992;&#21040;&#27492;&#34920;&#36798;&#24335; .</span>
<span style="color: #ffff00; font-weight: bold;">(nt: 'echo reuqest' &#19982; 'echo reply' &#36825;&#20004;&#31181;&#31867;&#22411;&#30340;ICMP&#25968;&#25454;&#21253;&#36890;&#24120;&#30001;ping&#31243;&#24207;&#20135;&#29983;))</span>

<span style="color: #ffff00; font-weight: bold;">tcpdump 'icmp[icmptype] != icmp-echo and icmp[icmptype] != icmp-echoreply'</span>
</pre>
</div>


<p>
Linux tcpdump的选项介绍
</p>
<div class="org-src-container">

<pre class="src src-sh">-a&#23558;&#32593;&#32476;&#22320;&#22336;&#21644;&#24191;&#25773;&#22320;&#22336;&#36716;&#21464;&#25104;&#21517;&#23383;&#65307;
-d&#23558;&#21305;&#37197;&#20449;&#24687;&#21253;&#30340;&#20195;&#30721;&#20197;&#20154;&#20204;&#33021;&#22815;&#29702;&#35299;&#30340;&#27719;&#32534;&#26684;&#24335;&#32473;&#20986;&#65307;
-dd&#23558;&#21305;&#37197;&#20449;&#24687;&#21253;&#30340;&#20195;&#30721;&#20197;c&#35821;&#35328;&#31243;&#24207;&#27573;&#30340;&#26684;&#24335;&#32473;&#20986;&#65307;
-ddd&#23558;&#21305;&#37197;&#20449;&#24687;&#21253;&#30340;&#20195;&#30721;&#20197;&#21313;&#36827;&#21046;&#30340;&#24418;&#24335;&#32473;&#20986;&#65307;
-e&#22312;&#36755;&#20986;&#34892;&#25171;&#21360;&#20986;&#25968;&#25454;&#38142;&#36335;&#23618;&#30340;&#22836;&#37096;&#20449;&#24687;&#65307;
-f&#23558;&#22806;&#37096;&#30340;Internet&#22320;&#22336;&#20197;&#25968;&#23383;&#30340;&#24418;&#24335;&#25171;&#21360;&#20986;&#26469;&#65307;
-l&#20351;&#26631;&#20934;&#36755;&#20986;&#21464;&#20026;&#32531;&#20914;&#34892;&#24418;&#24335;&#65307;
-n&#19981;&#25226;&#32593;&#32476;&#22320;&#22336;&#36716;&#25442;&#25104;&#21517;&#23383;&#65307;
-t&#22312;&#36755;&#20986;&#30340;&#27599;&#19968;&#34892;&#19981;&#25171;&#21360;&#26102;&#38388;&#25139;&#65307;
-v&#36755;&#20986;&#19968;&#20010;&#31245;&#24494;&#35814;&#32454;&#30340;&#20449;&#24687;&#65292;&#20363;&#22914;&#22312;ip&#21253;&#20013;&#21487;&#20197;&#21253;&#25324;ttl&#21644;&#26381;&#21153;&#31867;&#22411;&#30340;&#20449;&#24687;&#65307;
-vv&#36755;&#20986;&#35814;&#32454;&#30340;&#25253;&#25991;&#20449;&#24687;&#65307;
-c&#22312;&#25910;&#21040;&#25351;&#23450;&#30340;&#21253;&#30340;&#25968;&#30446;&#21518;&#65292;tcpdump&#23601;&#20250;&#20572;&#27490;&#65307;
-F&#20174;&#25351;&#23450;&#30340;&#25991;&#20214;&#20013;&#35835;&#21462;&#34920;&#36798;&#24335;,&#24573;&#30053;&#20854;&#23427;&#30340;&#34920;&#36798;&#24335;&#65307;
-i&#25351;&#23450;&#30417;&#21548;&#30340;&#32593;&#32476;&#25509;&#21475;&#65307;
<span style="color: #87cefa;">-r&#20174;&#25351;&#23450;&#30340;&#25991;&#20214;&#20013;&#35835;&#21462;&#21253;</span>(&#36825;&#20123;&#21253;&#19968;&#33324;&#36890;&#36807;-w&#36873;&#39033;&#20135;&#29983;)&#65307;
-w&#30452;&#25509;&#23558;&#21253;&#20889;&#20837;&#25991;&#20214;&#20013;&#65292;&#24182;&#19981;&#20998;&#26512;&#21644;&#25171;&#21360;&#20986;&#26469;&#65307;
-T&#23558;&#30417;&#21548;&#21040;&#30340;&#21253;&#30452;&#25509;&#35299;&#37322;&#20026;&#25351;&#23450;&#30340;&#31867;&#22411;&#30340;&#25253;&#25991;&#65292;&#24120;&#35265;&#30340;&#31867;&#22411;&#26377;rpc&#65288;&#36828;&#31243;&#36807;&#31243;&#35843;&#29992;&#65289;&#21644;snmp&#65288;&#31616;&#21333;&#32593;&#32476;&#31649;&#29702;&#21327;&#35758;&#65307;&#65289;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-17" class="outline-3">
<h3 id="sec-6-17">tee</h3>
<div class="outline-text-3" id="text-6-17">
<p>
功能说明：读取标准输入的数据，并将其内容输出成文件。
</p>

<p>
语 　 法：tee [-ai][&#x2013;help][&#x2013;version][文件…]
</p>

<p>
补充说明：tee指令会从标准输入设备读取数据，将其内容输出到标准输出设备,同时保存成文件。我们可利用tee把管道导入的数据存成文件，甚至一次保存数份文件。
</p>

<p>
参 　 数：-a 附加到既有文件的后面，而非覆盖它。如果给予tee指令的文件名称已经存在，预设会覆盖该文件的内容。加上此参数后，数据会新增在该文件内容的最后面，而不会删除原先之内容。
</p>

<p>
范 　 例：
</p>

<p>
列出文本文件slayers.story的内容，同时复制3份副本，文件名称分别为
ss-copy1、ss-copy2、ss-copy3：
</p>

<p>
$ cat slayers.story |tee ss-copy1 ss-copy2 ss-copy3
</p>
</div>
</div>

<div id="outline-container-sec-6-18" class="outline-3">
<h3 id="sec-6-18">tload</h3>
<div class="outline-text-3" id="text-6-18">
<p>
功能说明：显示系统负载状况。
</p>

<p>
语　　法：tload [-V][-d &lt;间隔秒数&gt;][-s &lt;刻度大小&gt;][终端机编号]
</p>

<p>
补充说明：tload指令使用ASCII字符简单地以文字模式显示系统负载状态。假设不给予终端机编号，则会在执行tload指令的终端机显示负载情形。
</p>

<p>
参　　数：　-d&lt;间隔秒数&gt; 　设置tload检测系统负载的间隔时间，单位以秒计算。 
</p>

<p>
　-s&lt;刻度大小&gt; 　设置图表的垂直刻度大小，单位以列计算。 
</p>

<p>
　-V 　显示版本信息。
</p>
</div>
</div>

<div id="outline-container-sec-6-19" class="outline-3">
<h3 id="sec-6-19">top<sup><a id="fnr.3" name="fnr.3" class="footref" href="#fn.3">3</a></sup></h3>
<div class="outline-text-3" id="text-6-19">
<p>
top：动态观察程序的变化
</p>

<p>
<code>[root@linux ~]# top [-d] | top [-bnp]</code>
</p>

<p>
参数：
</p>
<p class="verse">
-d ：后面可以接秒数，就是整个程序画面更新的秒数。预设是 5 秒；<br  />
-b ：以批次的方式执行 top ，还有更多的参数可以使用喔！<br  />
通常会搭配数据流重导向来将批次的结果输出成为档案。<br  />
-n ：与 -b 搭配，意义是，需要进行几次 top 的输出结果。<br  />
-p ：指定某些个 PID 来进行观察监测而已。<br  />
在 top 执行过程当中可以使用的按键指令：<br  />
? ：显示在 top 当中可以输入的按键指令；<br  />
P ：以 CPU 的使用资源排序显示；<br  />
M ：以 Memory 的使用资源排序显示；<br  />
N ：以 PID 来排序喔！<br  />
T ：由该 Process 使用的 CPU 时间累积 (TIME+) 排序。<br  />
k ：给予某个 PID 一个讯号 (signal)<br  />
r ：给予某个 PID 重新制订一个 nice 值。<br  />
</p>





<p>
范例1：每两秒钟更新一次 top ，观察整体信息
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# top -d 2
top - 18:30:36 up 30 days, 7 min, 1 user, load average: 0.42, 0.48, 0.45
Tasks: 163 total, 1 running, 161 sleeping, 1 stopped, 0 zombie
<span style="color: #87cefa;">Cpu</span>(s): 4.7% us, 4.0% sy, 6.3% ni, 82.5% id, 0.4% wa, 0.1% hi, 2.0% si
Mem: 1033592k total, 955252k used, 78340k free, 208648k buffers
Swap: 1052216k total, 728k used, 1051488k free, 360248k cached
&lt;==&#22914;&#26524;&#21152;&#20837; k &#25110; r &#26102;&#65292;&#23601;&#20250;&#26377;&#30456;&#20851;&#30340;&#23383;&#26679;&#20986;&#29616;&#22312;&#36825;&#37324;&#21908;&#65281;

PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
3981 apache 34 19 84012 11m 7352 S 17.3 1.2 0:00.09 httpd
1454 mysql 16 0 289m 40m 2228 S 3.8 4.0 115:01.32 mysqld
3985 dmtsai 15 0 2148 904 668 R 3.8 0.1 0:00.03 top
1 root 16 0 3552 552 472 S 0.0 0.1 0:08.90 init
2 root RT 0 0 0 0 S 0.0 0.0 0:52.76 migration/0
3 root 34 19 0 0 0 S 0.0 0.0 0:03.01 ksoftirqd/0
</pre>
</div>



<p>
范例2：将 top 的信息进行 2 次，然后将结果输出到 /tmp/top.txt
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# top -b -n 2 &gt; /tmp/top.txt
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#36825;&#26679;&#19968;&#26469;&#65292;&#22079;&#22079;&#65281;&#23601;&#21487;&#20197;&#23558; top &#30340;&#20449;&#24687;&#23384;&#21040; /tmp/top.txt &#26723;&#26696;&#20013;&#20102;&#12290;</span>
</pre>
</div>



<p>
范例3：假设 10604 是一个已经存在的 PID ，仅观察该程序？
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@linux ~]# top -d 2 -p10604
top - 13:53:00 up 51 days, 2:27, 1 user, load average: 0.00, 0.00, 0.00
Tasks: 1 total, 0 running, 1 sleeping, 0 stopped, 0 zombie
<span style="color: #87cefa;">Cpu</span>(s): 0.0% us, 0.0% sy, 0.0% ni, 100.0% id, 0.0% wa, 0.0% hi, 0.0% si
Mem: 385676k total, 371760k used, 13916k free, 131164k buffers
Swap: 1020116k total, 880k used, 1019236k free, 95772k cached

PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
10604 root 16 0 5396 1544 1244 S 0.0 0.4 0:00.07 bash
</pre>
</div>



<p>
范例四：承上题，上面的 NI 值是 0 ，想要改成 10 的话？
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#22312;&#33539;&#20363;&#19977;&#30340; top &#30011;&#38754;&#24403;&#20013;&#30452;&#25509;&#25353;&#19979; r &#20043;&#21518;&#65292;&#20250;&#20986;&#29616;&#22914;&#19979;&#30340;&#22270;&#26679;&#65281;</span>
top - 13:53:00 up 51 days, 2:27, 1 user, load average: 0.00, 0.00, 0.00
Tasks: 1 total, 0 running, 1 sleeping, 0 stopped, 0 zombie
<span style="color: #87cefa;">Cpu</span>(s): 0.0% us, 0.0% sy, 0.0% ni, 100.0% id, 0.0% wa, 0.0% hi, 0.0% si
Mem: 385676k total, 371760k used, 13916k free, 131164k buffers
Swap: 1020116k total, 880k used, 1019236k free, 95772k cached
PID to renice: 10604

PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
10604 root 16 0 5396 1544 1244 S 0.0 0.4 0:00.07 bash
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">&#20043;&#21518;&#65292;&#21487;&#20197;&#36755;&#20837; nice &#20540;&#20102;&#65281;</span>
top - 13:53:00 up 51 days, 2:27, 1 user, load average: 0.00, 0.00, 0.00
Tasks: 1 total, 0 running, 1 sleeping, 0 stopped, 0 zombie
<span style="color: #87cefa;">Cpu</span>(s): 0.0% us, 0.0% sy, 0.0% ni, 100.0% id, 0.0% wa, 0.0% hi, 0.0% si
Mem: 385676k total, 371760k used, 13916k free, 131164k buffers
Swap: 1020116k total, 880k used, 1019236k free, 95772k cached
Renice PID 10604 to value: 10

PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
10604 root 30 10 5396 1544 1244 S 0.0 0.4 0:00.07 bash
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-20" class="outline-3">
<h3 id="sec-6-20">touch - 创建文件或修改文件时间</h3>
<div class="outline-text-3" id="text-6-20">
<p>
-a
更改文件的讀取時間(access time)
</p>

<p>
-c, &#x2013;no-create
不建立任何新檔案
</p>

<p>
-m
更改文件的修改時間(modification time)
</p>

<p>
-t &lt;time&gt; 用于指定时间。格式可以是MMDDhhmm或者yyyyMMDDhhmm。
</p>

<p>
-r &lt;file&gt; 设置与file相同的时间。
</p>
</div>
</div>

<div id="outline-container-sec-6-21" class="outline-3">
<h3 id="sec-6-21">tty</h3>
<div class="outline-text-3" id="text-6-21">
<p>
Usage: tty [OPTION]&#x2026;
Print the file name of the terminal connected to standard input.
</p>
<div class="org-src-container">

<pre class="src src-sh">-s, --silent, --quiet   print nothing, only return an exit status
    --help     display this help and exit
    --version  output version information and exit
</pre>
</div>
</div>
</div>





<div id="outline-container-sec-6-22" class="outline-3">
<h3 id="sec-6-22">ulimit<sup><a id="fnr.4" name="fnr.4" class="footref" href="#fn.4">4</a></sup></h3>
<div class="outline-text-3" id="text-6-22">
<p>
ulimit 通过一些参数选项来管理不同种类的系统资源。在本节，我们将讲解这些参数的使用。
</p>

<p>
ulimit 命令的格式为：ulimit [options] [limit]
具体的 options 含义以及简单示例可以参考以下表格。
</p>

<p>
表 1. ulimit 参数说明
</p>
<div class="org-src-container">

<pre class="src src-sh">&#36873;&#39033; [options]  &#21547;&#20041;    &#20363;&#23376;
-H       &#35774;&#32622;&#30828;&#36164;&#28304;&#38480;&#21046;&#65292;&#19968;&#26086;&#35774;&#32622;&#19981;&#33021;&#22686;&#21152;&#12290;      ulimit &#8211; Hs 64&#65307;&#38480;&#21046;&#30828;&#36164;&#28304;&#65292;&#32447;&#31243;&#26632;&#22823;&#23567;&#20026; 64K&#12290;
-S       &#35774;&#32622;&#36719;&#36164;&#28304;&#38480;&#21046;&#65292;&#35774;&#32622;&#21518;&#21487;&#20197;&#22686;&#21152;&#65292;&#20294;&#26159;&#19981;&#33021;&#36229;&#36807;&#30828;&#36164;&#28304;&#35774;&#32622;&#12290;        ulimit &#8211; Sn 32&#65307;&#38480;&#21046;&#36719;&#36164;&#28304;&#65292;32 &#20010;&#25991;&#20214;&#25551;&#36848;&#31526;&#12290;
-a       &#26174;&#31034;&#24403;&#21069;&#25152;&#26377;&#30340; limit &#20449;&#24687;&#12290;     ulimit &#8211; a&#65307;&#26174;&#31034;&#24403;&#21069;&#25152;&#26377;&#30340; limit &#20449;&#24687;&#12290;
-c       &#26368;&#22823;&#30340; core &#25991;&#20214;&#30340;&#22823;&#23567;&#65292; &#20197; blocks &#20026;&#21333;&#20301;&#12290;     ulimit &#8211; c unlimited&#65307; &#23545;&#29983;&#25104;&#30340; core &#25991;&#20214;&#30340;&#22823;&#23567;&#19981;&#36827;&#34892;&#38480;&#21046;&#12290;
-d       &#36827;&#31243;&#26368;&#22823;&#30340;&#25968;&#25454;&#27573;&#30340;&#22823;&#23567;&#65292;&#20197; Kbytes &#20026;&#21333;&#20301;&#12290;      ulimit -d unlimited&#65307;&#23545;&#36827;&#31243;&#30340;&#25968;&#25454;&#27573;&#22823;&#23567;&#19981;&#36827;&#34892;&#38480;&#21046;&#12290;
-f       &#36827;&#31243;&#21487;&#20197;&#21019;&#24314;&#25991;&#20214;&#30340;&#26368;&#22823;&#20540;&#65292;&#20197; blocks &#20026;&#21333;&#20301;&#12290;    ulimit &#8211; f 2048&#65307;&#38480;&#21046;&#36827;&#31243;&#21487;&#20197;&#21019;&#24314;&#30340;&#26368;&#22823;&#25991;&#20214;&#22823;&#23567;&#20026; 2048 blocks&#12290;
-l       &#26368;&#22823;&#21487;&#21152;&#38145;&#20869;&#23384;&#22823;&#23567;&#65292;&#20197; Kbytes &#20026;&#21333;&#20301;&#12290;  ulimit &#8211; l 32&#65307;&#38480;&#21046;&#26368;&#22823;&#21487;&#21152;&#38145;&#20869;&#23384;&#22823;&#23567;&#20026; 32 Kbytes&#12290;
-m       &#26368;&#22823;&#20869;&#23384;&#22823;&#23567;&#65292;&#20197; Kbytes &#20026;&#21333;&#20301;&#12290;        ulimit &#8211; m unlimited&#65307;&#23545;&#26368;&#22823;&#20869;&#23384;&#19981;&#36827;&#34892;&#38480;&#21046;&#12290;
-n       &#21487;&#20197;&#25171;&#24320;&#26368;&#22823;&#25991;&#20214;&#25551;&#36848;&#31526;&#30340;&#25968;&#37327;&#12290;  ulimit &#8211; n 128&#65307;&#38480;&#21046;&#26368;&#22823;&#21487;&#20197;&#20351;&#29992; 128 &#20010;&#25991;&#20214;&#25551;&#36848;&#31526;&#12290;
-p       &#31649;&#36947;&#32531;&#20914;&#21306;&#30340;&#22823;&#23567;&#65292;&#20197; Kbytes &#20026;&#21333;&#20301;&#12290;    ulimit &#8211; p 512&#65307;&#38480;&#21046;&#31649;&#36947;&#32531;&#20914;&#21306;&#30340;&#22823;&#23567;&#20026; 512 Kbytes&#12290;
-s       &#32447;&#31243;&#26632;&#22823;&#23567;&#65292;&#20197; Kbytes &#20026;&#21333;&#20301;&#12290;  ulimit &#8211; s 512&#65307;&#38480;&#21046;&#32447;&#31243;&#26632;&#30340;&#22823;&#23567;&#20026; 512 Kbytes&#12290;
-t       &#26368;&#22823;&#30340; CPU &#21344;&#29992;&#26102;&#38388;&#65292;&#20197;&#31186;&#20026;&#21333;&#20301;&#12290;       ulimit &#8211; t unlimited&#65307;&#23545;&#26368;&#22823;&#30340; CPU &#21344;&#29992;&#26102;&#38388;&#19981;&#36827;&#34892;&#38480;&#21046;&#12290;
-u       &#29992;&#25143;&#26368;&#22823;&#21487;&#29992;&#30340;&#36827;&#31243;&#25968;&#12290;  ulimit &#8211; u 64&#65307;&#38480;&#21046;&#29992;&#25143;&#26368;&#22810;&#21487;&#20197;&#20351;&#29992; 64 &#20010;&#36827;&#31243;&#12290;
-v       &#36827;&#31243;&#26368;&#22823;&#21487;&#29992;&#30340;&#34394;&#25311;&#20869;&#23384;&#65292;&#20197; Kbytes &#20026;&#21333;&#20301;&#12290;      ulimit &#8211; v 200000&#65307;&#38480;&#21046;&#26368;&#22823;&#21487;&#29992;&#30340;&#34394;&#25311;&#20869;&#23384;&#20026; 200000 Kbytes&#12290;
</pre>
</div>

<p>
以下几种方式来使用 ulimit：
</p>

<ul class="org-ul">
<li>在用户的启动脚本中
</li>
</ul>
<p>
如果用户使用的是 bash，就可以在用户的目录下的 .bashrc 文件中，加入
ulimit – u 64，来限制用户最多可以使用 64 个进程。此外，可以在与
.bashrc 功能相当的启动脚本中加入 ulimt。
</p>

<ul class="org-ul">
<li>在应用程序的启动脚本中
</li>
</ul>
<p>
如果用户要对某个应用程序 myapp 进行限制，可以写一个简单的脚本 startmyapp。
 ulimit – s 512 
</p>

<p>
myapp 
</p>


<p>
以后只要通过脚本 startmyapp 来启动应用程序，就可以限制应用程序 myapp 的线程栈大小为 512K。
</p>

<ul class="org-ul">
<li>直接在控制台输入
user@tc511-ui:~&gt;ulimit – p 256 
</li>
</ul>


<p>
限制管道的缓冲区为 256K。
</p>
</div>
</div>

<div id="outline-container-sec-6-23" class="outline-3">
<h3 id="sec-6-23">umask</h3>
<div class="outline-text-3" id="text-6-23">
<p>
umask设置了用户创建文件的默认权限，它与chmod的效果刚好相反，umask设置的是权限“补码”，而chmod设置的是文件权限码。一般在=/etc/profile=、=$[HOME]/.bash<sub>profile</sub>=或=$[HOME]/.profile=中设置umask值。
</p>

<p>
记住u m a s k是从权限中“拿走”相应的位即可。
</p>
</div>
</div>

<div id="outline-container-sec-6-24" class="outline-3">
<h3 id="sec-6-24">uname</h3>
<div class="outline-text-3" id="text-6-24">
<p>
用法：uname [选项]&#x2026;
输出一组系统信息。如果不跟随选项，则视为只附加-s 选项。
</p>

<div class="org-src-container">

<pre class="src src-sh">  -a, --all &#20197;&#22914;&#19979;&#27425;&#24207;&#36755;&#20986;&#25152;&#26377;&#20449;&#24687;&#12290;&#20854;&#20013;&#33509;-p &#21644;
-i &#30340;&#25506;&#27979;&#32467;&#26524;&#19981;&#21487;&#30693;&#21017;&#34987;&#30465;&#30053;&#65306;
  -s, --kernel-name &#36755;&#20986;&#20869;&#26680;&#21517;&#31216;
  -n, --nodename &#36755;&#20986;&#32593;&#32476;&#33410;&#28857;&#19978;&#30340;&#20027;&#26426;&#21517;
  -r, --kernel-release &#36755;&#20986;&#20869;&#26680;&#21457;&#34892;&#21495;
  -v, --kernel-version &#36755;&#20986;&#20869;&#26680;&#29256;&#26412;
  -m, --machine &#36755;&#20986;&#20027;&#26426;&#30340;&#30828;&#20214;&#26550;&#26500;&#21517;&#31216;
  -p, --processor &#36755;&#20986;&#22788;&#29702;&#22120;&#31867;&#22411;&#25110;<span style="color: #ffa07a;">"unknown"</span>
  -i, --hardware-platform &#36755;&#20986;&#30828;&#20214;&#24179;&#21488;&#25110;<span style="color: #ffa07a;">"unknown"</span>
  -o, --operating-system &#36755;&#20986;&#25805;&#20316;&#31995;&#32479;&#21517;&#31216;
      --help &#26174;&#31034;&#27492;&#24110;&#21161;&#20449;&#24687;&#24182;&#36864;&#20986;
      --version &#26174;&#31034;&#29256;&#26412;&#20449;&#24687;&#24182;&#36864;&#20986;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-25" class="outline-3">
<h3 id="sec-6-25">uniq</h3>
<div class="outline-text-3" id="text-6-25">
<p>
uniq [选项] 文件
</p>

<p>
说明：这个命令读取输入文件，并比较相邻的行。在正常情况下，第二个及以后更多个重复行将被删去，行比较是根据所用字符集的排序序列进行的。该命令加工后的结果写到输出文件中。输入文件和输出文件必须不同。如果输入文件用“-
”表示，则从标准输入读取。
</p>

<p>
该命令各选项含义如下：、
</p>

<p>
– c 显示输出中，在每行行首加上本行在文件中出现的次数。它可取代- u和- d选项。
</p>

<p>
– d 只显示重复行。
</p>

<p>
– u 只显示文件中不重复的各行。
</p>

<p>
– n 前n个字段与每个字段前的空白一起被忽略。一个字段是一个非空格、非制表符的字符串，彼此由制表符和空格隔开(字段从0开始编号)。
</p>

<p>
+n 前n个字符被忽略，之前的字符被跳过(字符从0开始编号)。
</p>

<p>
– f n 与- n相同，这里n是字段数。
</p>

<p>
– s n 与+n相同，这里n是字符数。
</p>

<p>
接下来通过实践实例说明：
</p>

<p>
<code>=========================================</code>
</p>

<p>
[root@stu100 ~]# cat test
boy took bat home
boy took bat home
girl took bat home
boy took bat home
boy took bat home
dog brought hat home
dog brought hat home
dog brought hat home
看test文件的内容
</p>

<p>
<code>==========================================</code>
</p>

<p>
[root@stu100 ~]# uniq test
boy took bat home
girl took bat home
boy took bat home
dog brought hat home
uniq命令不加任何参数，仅显示连续重复的行一次
</p>

<p>
<code>==========================================</code>
</p>

<p>
[root@stu100 ~]# uniq -c test
2 boy took bat home
1 girl took bat home
2 boy took bat home
3 dog brought hat home
1
-c 参数显示文件中每行连续出现的次数。
</p>

<p>
<code>==========================================</code>
</p>

<p>
[root@stu100 ~]# cat test |sort | uniq -c
1
4 boy took bat home
3 dog brought hat home
1 girl took bat home
排序后再显示
</p>

<p>
<code>==========================================</code>
</p>

<p>
[root@stu100 ~]# uniq -d test
boy took bat home
boy took bat home
dog brought hat home
-d选项仅显示文件中连续重复出现的行。
</p>

<p>
<code>==========================================</code>
</p>

<p>
[root@stu100 ~]# uniq -u test
girl took bat home
-u选项显示文件中没有连续出现的行。
</p>

<p>
<code>==========================================</code>
</p>

<p>
[root@stu100 ~]# uniq -f 2 -s 2 test
boy took bat home
忽略每行的前2个字段，忽略第二 个空白字符和第三个字段的首字符，结果at home
</p>

<p>
<code>==========================================</code>
</p>

<p>
[root@stu100 ~]# uniq -f 1 test
boy took bat home
dog brought hat home
忽 略每行的第一个字段，这样boy ，girl开头的行看起来是连续重复的行。
</p>

<p>
<code>==========================================</code>
</p>

<p>
[root@stu100 ~]# uniq -D test
boy took bat home
boy took bat home
boy took bat home
boy took bat home
dog brought hat home
dog brought hat home
dog brought hat home
显示所有重复的行，每个重复的行都显示
</p>
</div>
</div>

<div id="outline-container-sec-6-26" class="outline-3">
<h3 id="sec-6-26">useradd</h3>
<div class="outline-text-3" id="text-6-26">
<p>
功能说明：建立用户帐号。
</p>

<p>
语　　法：useradd [-mMnr][-c &lt;备注&gt;][-d &lt;登入目录&gt;][-e &lt;有效期限&gt;][-f &lt;缓冲天数&gt;][-g &lt;群组&gt;][-G &lt;群组&gt;][-s &lt;shell&gt;][-u &lt;uid&gt;][用户帐号] 或 useradd -D [-b][-e &lt;有效期限&gt;][-f &lt;缓冲天数&gt;][-g &lt;群组&gt;][-G &lt;群组&gt;][-s &lt;shell&gt;]
</p>

<p>
补充说明：useradd可用来建立用户帐号。帐号建好之后，再用passwd设定帐号的密码．而可用userdel删除帐号。使用useradd指令所建立的帐号，实际上是保存在/etc/passwd文本文件中。
</p>

<p>
参　　数：
</p>
<div class="org-src-container">

<pre class="src src-sh">&#12288;-c&lt;&#22791;&#27880;&gt; &#12288;&#21152;&#19978;&#22791;&#27880;&#25991;&#23383;&#12290;&#22791;&#27880;&#25991;&#23383;&#20250;&#20445;&#23384;&#22312;passwd&#30340;&#22791;&#27880;&#26639;&#20301;&#20013;&#12290;&#12288; 
&#12288;-d&lt;&#30331;&#20837;&#30446;&#24405;&gt; &#12288;&#25351;&#23450;&#29992;&#25143;&#30331;&#20837;&#26102;&#30340;&#21551;&#22987;&#30446;&#24405;&#12290; 
&#12288;-D &#12288;&#21464;&#26356;&#39044;&#35774;&#20540;&#65294; 
&#12288;-e&lt;&#26377;&#25928;&#26399;&#38480;&gt; &#12288;&#25351;&#23450;&#24080;&#21495;&#30340;&#26377;&#25928;&#26399;&#38480;&#12290; 
&#12288;-f&lt;&#32531;&#20914;&#22825;&#25968;&gt; &#12288;&#25351;&#23450;&#22312;&#23494;&#30721;&#36807;&#26399;&#21518;&#22810;&#23569;&#22825;&#21363;&#20851;&#38381;&#35813;&#24080;&#21495;&#12290; 
&#12288;-g&lt;&#32676;&#32452;&gt; &#12288;&#25351;&#23450;&#29992;&#25143;&#25152;&#23646;&#30340;&#32676;&#32452;&#12290; 
&#12288;-G&lt;&#32676;&#32452;&gt; &#12288;&#25351;&#23450;&#29992;&#25143;&#25152;&#23646;&#30340;&#38468;&#21152;&#32676;&#32452;&#12290; 
&#12288;-m &#12288;&#33258;&#21160;&#24314;&#31435;&#29992;&#25143;&#30340;&#30331;&#20837;&#30446;&#24405;&#12290; 
&#12288;-M &#12288;&#19981;&#35201;&#33258;&#21160;&#24314;&#31435;&#29992;&#25143;&#30340;&#30331;&#20837;&#30446;&#24405;&#12290; 
&#12288;-n &#12288;&#21462;&#28040;&#24314;&#31435;&#20197;&#29992;&#25143;&#21517;&#31216;&#20026;&#21517;&#30340;&#32676;&#32452;&#65294; 
&#12288;-r &#12288;&#24314;&#31435;&#31995;&#32479;&#24080;&#21495;&#12290; 
&#12288;-s&lt;shell&gt;&#12288; &#12288;&#25351;&#23450;&#29992;&#25143;&#30331;&#20837;&#21518;&#25152;&#20351;&#29992;&#30340;shell&#12290; 
&#12288;-u&lt;uid&gt; &#12288;&#25351;&#23450;&#29992;&#25143;ID&#12290;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-27" class="outline-3">
<h3 id="sec-6-27">userdel</h3>
<div class="outline-text-3" id="text-6-27">
<p>
　userdel - 删 除 使 用 者 帐 号 及 相 关 档 案
</p>

<p>
　　语法
</p>

<p>
　　userdel [-r] login
</p>

<p>
　　描述
</p>

<p>
　　userdel 命 令 修 改 系 统 帐 号 档 删 除 所 有 login 会 参 考 的 部 份 。 使 用 者 名 称 必 须是 存 在 的 。
</p>

<p>
　　-r
</p>

<p>
　　使 用 者 目 录 下 的 档 案 一 并 移 除 。 在 其 他 位 置 上 的 档 案 也 将 一 一 找 出 并 删 除 。
</p>

<p>
　　档案
</p>

<p>
　　/etc/passwd - 使 用 者 帐 号 资 料 /etc/shadow - 使 用 者 帐 号 资 讯 加 密 /etc/group - 群 组 资 讯
</p>

<p>
　　警告
</p>

<p>
　　userdel 不 允 许 你 移 除 正 在线 上 的 使 用 者 帐 号 。 你 必 须砍 掉 此 帐 号 现 在 在 系 统 上 执 行 的 程 序 才 能 进 行 帐 号 删除 。 不 能 在 NIS client 端 移 除 NIS 属 性 的 东 西 。 这 动 做 须在 NIS server 端 上 执 行 。
</p>
</div>
</div>

<div id="outline-container-sec-6-28" class="outline-3">
<h3 id="sec-6-28">usermod</h3>
<div class="outline-text-3" id="text-6-28">
<p>
功能说明：修改用户帐号。　　语　　法：usermod [-LU][-c &lt;备注&gt;][-d &lt;登入目录&gt;][-e &lt;有效期限&gt;][-f &lt;缓冲天数&gt;][-g &lt;群组&gt;][-G &lt;群组&gt;][-l &lt;帐号名称&gt;][-s ][-u ][用户帐号]
</p>

<p>
　　补充说明：usermod可用来修改用户帐号的各项设定。
</p>

<p>
　　参　　数：
</p>

<p>
　　-c&lt;备注&gt; 　修改用户帐号的备注文字。
</p>

<p>
　　-d登入目录&gt; 　修改用户登入时的目录。
</p>

<p>
　　-e&lt;有效期限&gt; 　修改帐号的有效期限。
</p>

<p>
　　-f&lt;缓冲天数&gt; 　修改在密码过期后多少天即关闭该帐号。
</p>

<p>
　　-g&lt;群组&gt; 　修改用户所属的群组。
</p>

<p>
　　-G&lt;群组&gt; 　修改用户所属的附加群组。
</p>

<p>
　　-l&lt;帐号名称&gt; 　修改用户帐号名称。
</p>

<p>
　　-L 　锁定用户密码，使密码无效。
</p>

<p>
　　-s 　修改用户登入后所使用的shell。
</p>

<p>
　　-u 　修改用户ID。
</p>

<p>
　　-U 　解除密码锁定。
</p>
</div>
</div>

<div id="outline-container-sec-6-29" class="outline-3">
<h3 id="sec-6-29">w</h3>
<div class="outline-text-3" id="text-6-29">
<p>
打印当前系统活动摘要。
</p>
<p class="verse">
语法<br  />
w [ -h ] [ -u ] [ -w ] [ -l | -s ] [ User ]<br  />
描述<br  />
w 命令打印系统中当前活动的摘要。该摘要包含以下内容：<br  />
用户 登录的用户。<br  />
tty 用户使用的 tty 名称。<br  />
注册 @ 用户登录的日期和时间。<br  />
空闲 自一个程序上次试图从终端读取开始所持续的分钟数。<br  />
JCPU 该终端上的所有进程及其子进程使用的系统部件时间。<br  />
PCPU 当前活动进程所使用的系统部件时间。<br  />
<br  />
-h 禁用标题。<br  />
-l 用长格式打印摘要。这是缺省值。<br  />
-s 用短格式打印摘要。在短格式中，tty 是缩写，并且登录时间、系统部件时间和命令参数都被省略。<br  />
-u 打印日期和时间、自上次系统启动以来的时间总计、登录的用户数和正在运行的进程数。这是缺省值。指定 -u 标志而不指定 -w 或 -h 标志等效于 uptime 命令。<br  />
-w 等效于同时指定 -u 和 -l 标志，这是缺省值。<br  />
</p>
</div>
</div>

<div id="outline-container-sec-6-30" class="outline-3">
<h3 id="sec-6-30">wc(word count)</h3>
<div class="outline-text-3" id="text-6-30">
<p>
wc -c filename：显示一个文件的字节数
</p>

<p>
wc -m filename：显示一个文件的字符数
</p>

<p>
wc -l filename：显示一个文件的行数
</p>

<p>
wc -L filename：显示一个文件中的最长行的长度
</p>

<p>
wc -w filename：显示一个文件的字数
</p>
<div class="org-src-container">

<pre class="src src-sh">[rocrocket@rocrocket programming]$ cat wc1.txt
1 2
34 5
&#20320;&#22909;
[rocrocket@rocrocket programming]$ wc -c wc1.txt
16 wc1.txt 
[rocrocket@rocrocket programming]$ wc -m wc1.txt
12 wc1.txt 
[rocrocket@rocrocket programming]$ wc -l wc1.txt
3 wc1.txt 
[rocrocket@rocrocket programming]$ wc -L wc1.txt
4 wc1.txt 
[rocrocket@rocrocket programming]$ wc -w wc1.txt
5 wc1.txt
</pre>
</div>
<p>
每行结尾的换行符也算一个字符，空格也算一个字符。
</p>

<p>
由于采用UTF-8编码，所以一个汉字在这里被转换为3字节，所以wc -c显示的结果是16，即“第一行的4个字节＋第二行的5个字节＋第三行的7个字节”＝4+5+7=16。
</p>

<p>
而当使用-m选项时，一个汉字就作为一个字符计算，所以是4+5+3=12。
</p>

<p>
当使用-L时，是给出最长行的长度，第二行最长，有4个字符长。（显然是不把换行符计算在内）
</p>

<p>
使用-w是计算字数，一个字是一个word，所以“34”表示一个word，一个“你好”表示一个word(我试过了，当中文是连在一起的，不管多少个，在计算字数word时，只有一个)，因此2+2+1=5。
</p>

<p>
插孔说说tab制表符，这个符号比较特殊，当使用-L时，制表符算7个字符（这要依据一个制表符的长度而定，在我的系统中一个制表符算7个空格长度）。而当使用-w时，制表符和空格没有两样，都作为字的间隔来看待。当用-c时，一个制表符也就算一个字符，因为它的确就只是一个字符而已。
</p>

<p>
如果你直接执行wc wc1.txt，则显示：
</p>

<p>
[rocrocket@rocrocket programming]$ wc wc1.txt 3  5 16 wc1.txt
输出信息依次是：行数 字数 字节数 文件名称。
</p>
</div>
</div>

<div id="outline-container-sec-6-31" class="outline-3">
<h3 id="sec-6-31">wget</h3>
<div class="outline-text-3" id="text-6-31">
<p>
$ wget -r -np -nd <a href="http://example.com/packages/">http://example.com/packages/</a>
这条命令可以下载 <a href="http://example.com">http://example.com</a> 网站上 packages 目录中的所有文件。其中，-np 的作用是不遍历父目录，-nd 表示不在本机重新创建目录结构。
</p>

<p>
$ wget -r -np -nd &#x2013;accept=iso <a href="http://example.com/centos-5/i386/">http://example.com/centos-5/i386/</a>
与上一条命令相似，但多加了一个 &#x2013;accept=iso 选项，这指示 wget 仅下载 i386 目录中所有扩展名为 iso 的文件。你也可以指定多个扩展名，只需用逗号分隔即可。
</p>

<p>
$ wget -i filename.txt
此命令常用于批量下载的情形，把所有需要下载文件的地址放到 filename.txt 中，然后 wget 就会自动为你下载所有文件了。
</p>

<p>
$ wget -c <a href="http://example.com/really-big-file.iso">http://example.com/really-big-file.iso</a>
这里所指定的 -c 选项的作用为断点续传。
</p>

<p>
$ wget -m -k (-H) <a href="http://www.example.com/">http://www.example.com/</a>
该命令可用来镜像一个网站，wget 将对链接进行转换。如果网站中的图像是放在另外的站点，那么可以使用 -H 选项。
</p>
</div>
</div>

<div id="outline-container-sec-6-32" class="outline-3">
<h3 id="sec-6-32">Find</h3>
<div class="outline-text-3" id="text-6-32">
<p>
Find是一个非常有效的工具，它可以遍历当前目录甚至于整个文件系统来查找某些文件或目录. 
</p>

<p>
主要选项: 
</p>
<div class="org-src-container">

<pre class="src src-sh">-name    &#25353;&#29031;&#25991;&#20214;&#21517;&#26597;&#25214;&#25991;&#20214; 
-perm    &#25353;&#29031;&#25991;&#20214;&#26435;&#38480;&#26469;&#26597;&#25214;&#25991;&#20214; 
-prune   &#19981;&#22312;&#24403;&#21069;&#25351;&#23450;&#30340;&#30446;&#24405;&#20013;&#26597;&#25214; 
-user    &#25353;&#29031;&#25991;&#20214;&#23646;&#20027;&#26469;&#26597;&#25214;&#25991;&#20214; 
-group   &#25353;&#29031;&#25991;&#20214;&#25152;&#23646;&#30340;&#32452;&#26469;&#26597;&#25214;&#25991;&#20214; 
-mtime -n +n    &#25353;&#29031;&#25991;&#20214;&#30340;&#26356;&#25913;&#26102;&#38388;&#26469;&#26597;&#25214;&#25991;&#20214;&#65292;-n&#34920;&#31034;&#25991;&#20214;&#26356;&#25913;&#26102;&#38388;&#36317;&#29616;&#22312;n&#22825;&#20197;&#20869;&#65292;+n&#34920;&#31034;&#25991;&#20214;&#26356;&#25913;&#26102;&#38388;&#36317;&#29616;&#22312;n&#22825;&#20197;&#21069;. 
-nogroup        &#26597;&#25214;&#26080;&#26377;&#25928;&#25152;&#23646;&#32452;&#30340;&#25991;&#20214;&#65292;&#21363;&#35813;&#25991;&#20214;&#25152;&#23646;&#30340;&#32452;&#19981;&#23384;&#22312; 
-nouser  &#26597;&#25214;&#26080;&#26377;&#25928;&#23646;&#20027;&#30340;&#25991;&#20214; 
-newer file1 ! file2    &#26597;&#25214;&#26356;&#25913;&#26102;&#38388;&#27604;&#25991;&#20214;file1&#26032;&#20294;&#27604;&#25991;&#20214;file2&#26087;&#30340;&#25991;&#20214; 
-type    &#26597;&#25214;&#26576;&#19968;&#31867;&#22411;&#30340;&#25991;&#20214; 

[       &#25991;&#20214;&#31867;&#22411;&#65306; 
b       &#22359;&#35774;&#22791;&#25991;&#20214; 
d       &#30446;&#24405; 
c       &#23383;&#31526;&#35774;&#22791;&#25991;&#20214; 
p       &#31649;&#36947;&#25991;&#20214; 
l       &#31526;&#21495;&#38142;&#25509;&#25991;&#20214; 
f       &#26222;&#36890;&#25991;&#20214; 
]       

-size n[c]      &#26597;&#25214;&#25991;&#20214;&#38271;&#24230;&#20026;n&#22359;&#30340;&#25991;&#20214;&#65292;&#24102;&#26377;c&#26102;&#34920;&#31034;&#25991;&#20214;&#38271;&#24230;&#20197;&#23383;&#33410;&#35745; 
-depth   &#22312;&#26597;&#25214;&#25991;&#20214;&#26102;&#65292;&#39318;&#20808;&#26597;&#25214;&#24403;&#21069;&#30446;&#24405;&#20013;&#30340;&#25991;&#20214;&#65292;&#28982;&#21518;&#20877;&#22312;&#20854;&#23376;&#30446;&#24405;&#20013;&#26597;&#25214; 
-mount   &#22312;&#26597;&#25214;&#25991;&#20214;&#26102;&#19981;&#36328;&#36234;&#25991;&#20214;&#31995;&#32479;mount&#28857; 
-follow  &#22914;&#26524;find&#21629;&#20196;&#36935;&#21040;&#31526;&#21495;&#38142;&#25509;&#25991;&#20214;&#65292;&#23601;&#36319;&#36394;&#21040;&#38142;&#25509;&#25152;&#25351;&#21521;&#30340;&#25991;&#20214; 
-cpio    &#23545;&#21305;&#37197;&#30340;&#25991;&#20214;&#20351;&#29992;cpio&#21629;&#20196;&#65292;&#23601;&#23558;&#36825;&#20123;&#25991;&#20214;&#22791;&#20221;&#21040;&#30913;&#30424;&#35774;&#22791;&#20013;
</pre>
</div>

<p>
(其余选项，请man find，进一步查看) 
对find命令选项的一些例子： 
</p>
<div class="org-src-container">

<pre class="src src-sh">$ find /etc -type d    &#65283;&#22312;/ etc&#30446;&#24405;&#19979;&#26597;&#25214;&#25152;&#26377;&#30340;&#30446;&#24405; 
$ find /etc -user yaoyuan     &#65283;&#22312;/etc&#30446;&#24405;&#19979;&#26597;&#25214;&#25991;&#20214;&#23646;&#20027;&#20026;yaoyuan&#30340;&#25991;&#20214; 
$ find . -size +1000000c      &#65283;&#22312;&#24403;&#21069;&#30446;&#24405;&#19979;&#26597;&#25214;&#25991;&#20214;&#38271;&#24230;&#22823;&#20110;1 M&#23383;&#33410;&#30340;&#25991;&#20214;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-33" class="outline-3">
<h3 id="sec-6-33">whereis</h3>
<div class="outline-text-3" id="text-6-33">
<p>
whereis命令会在指定的目录中查找符合条件的文件，文件应的属性应属于原始代码，二进制文件，或是帮助文件. 
</p>

<p>
the path to look for:
</p>
<div class="org-src-container">

<pre class="src src-sh">/bin /etc /sbin /usr/bin
/usr/etc /usr/games  /usr/include  /usr/lib
...
</pre>
</div>

<p>
选项： 
</p>
<div class="org-src-container">

<pre class="src src-sh">-b      &#21482;&#26597;&#25214;&#20108;&#36827;&#21046;&#25991;&#20214; 
-B      &#21482;&#22312;&#35774;&#32622;&#30340;&#30446;&#24405;&#19979;&#26597;&#25214;&#20108;&#36827;&#21046;&#25991;&#20214; 
-f      &#19981;&#26174;&#31034;&#25991;&#20214;&#21517;&#21069;&#30340;&#36335;&#24452;&#21517;&#31216; 
-m      &#21482;&#26597;&#25214;&#35828;&#26126;&#25991;&#20214; 
-M      &#21482;&#22312;&#35774;&#32622;&#30340;&#30446;&#24405;&#19979;&#26597;&#25214;&#35828;&#26126;&#25991;&#20214; 
-s      &#21482;&#26597;&#25214;&#21407;&#22987;&#20195;&#30721;&#25991;&#20214; 
-S      &#21482;&#22312;&#35774;&#32622;&#30340;&#30446;&#24405;&#19979;&#26597;&#25214;&#21407;&#22987;&#20195;&#30721;&#25991;&#20214; 
-u      &#26597;&#25214;&#19981;&#21253;&#21547;&#25351;&#23450;&#31867;&#22411;&#30340;&#25991;&#20214;
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="sec-6-33-1" name="sec-6-33-1"></a>whereis例子<br  /><div class="outline-text-4" id="text-6-33-1">
<div class="org-src-container">

<pre class="src src-sh">$ whereis mysql 
mysql: /usr/bin/mysql /etc/mysql /usr/share/mysql/usr/share/man/man1/mysql.1.gz
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-6-34" class="outline-3">
<h3 id="sec-6-34">locate</h3>
<div class="outline-text-3" id="text-6-34">
<p>
locate命令用于查找符合条件的文件，它会去保存文件与目录名称的数据库内，查找符合条件的文件或目录 
</p>
<div class="org-src-container">

<pre class="src src-sh">&#36873;&#39033;&#65306; 
-u      &#24314;&#31435;&#25968;&#25454;&#24211;&#65292;&#30001;&#26681;&#30446;&#24405;&#24320;&#22987; 
-U      &#24314;&#31435;&#25968;&#25454;&#24211;&#65292;&#21487;&#20197;&#25351;&#23450;&#24320;&#22987;&#30340;&#20301;&#32622; 
-e      &#23558;&#25490;&#38500;&#22312;&#23547;&#25214;&#30340;&#33539;&#22260;&#20043;&#22806; 
-f      &#23558;&#29305;&#23450;&#30340;&#26723;&#26696;&#31995;&#32479;&#25490;&#38500;&#22312;&#22806; 
-q      &#23433;&#38745;&#27169;&#24335;&#65292;&#19981;&#20250;&#26174;&#31034;&#20219;&#20309;&#38169;&#35823;&#35759;&#24687; 
-n      &#33267;&#22810;&#26174;&#31034;n&#20010;&#36755;&#20986; 
-r      &#20351;&#29992;&#27491;&#35268;&#36816;&#31639;&#24335; &#20570;&#23547;&#25214;&#30340;&#26465;&#20214; 
-o      &#25351;&#23450;&#25968;&#25454;&#24211;&#23384;&#30340;&#21517;&#31216; 
-d      &#25351;&#23450;&#25968;&#25454;&#24211;&#30340;&#36335;&#24452; 
-h      &#26174;&#31034;&#36741;&#21161;&#35759;&#24687; 
-v      &#26174;&#31034;&#26356;&#22810;&#30340;&#35759;&#24687; 
-V      &#26174;&#31034;&#31243;&#24207;&#30340;&#29256;&#26412;&#35759;&#24687;
</pre>
</div>
<p>
（locate命令可以在搜寻数据库时快速找到档案，数据库由updatedb程序来更新，updatedb是由cron daemon周期性建立的，locate命令在搜寻数据库时比由整个由硬盘资料来搜寻资料来得快，但较差劲的是locate所找到的档案若是最近才建立或刚更名的，可能会找不到，在内定值中，updatedb每天会跑一次，可以由修改crontab来更新设定值。(etc/crontab) 
　　locate指定用在搜寻符合条件的档案，它会去储存档案与目录名称的数据库内，寻找合乎范本样式条件的档案或目录录，可以使用特殊字元（如"*"或"?"等）来指定范本样式，如指定范本为kcpa*ner, locate会找出所有起始字串为kcpa且结尾为ner的档案或目录，如名称为kcpartner若目录录名称为kcpa<sub>ner则会列出该目录下包括子目录在内的所有档案。</sub> ） 
</p>

<p>
locate例子： 
</p>
<div class="org-src-container">

<pre class="src src-sh">$ locate inittab 
/usr/lib/upstart/migrate-inittab.pl 
/usr/share/terminfo/a/ansi+inittabs
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-35" class="outline-3">
<h3 id="sec-6-35">which</h3>
<div class="outline-text-3" id="text-6-35">
<p>
which 和where 相似，只是我们所设置的环境变量$PATH中设置好的路径中寻找；比如； 
</p>
<div class="org-src-container">

<pre class="src src-sh">[root@localhost ~]# which fdisk  
/sbin/fdisk
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-36" class="outline-3">
<h3 id="sec-6-36">who</h3>
</div>
<div id="outline-container-sec-6-37" class="outline-3">
<h3 id="sec-6-37">whoami</h3>
</div>
<div id="outline-container-sec-6-38" class="outline-3">
<h3 id="sec-6-38">whois</h3>
</div>
<div id="outline-container-sec-6-39" class="outline-3">
<h3 id="sec-6-39">xlsatoms</h3>
<div class="outline-text-3" id="text-6-39">
<p>
功能说明：列出X Server定义的成分。
</p>

<p>
语　　法：xlsatoms [-display&lt;显示器编号&gt;][-format&lt;输出格式&gt;][-name&lt;成分名称&gt;][-range&lt;列表范围&gt;]
</p>

<p>
补充说明：执行xlsatoms指令会列出X Server内部所有定义的成分，每个成分都有其编号，您可利用参数设置列表范围，或直接指定欲查询的成分名称。
</p>

<p>
参　　数：
  -display&lt;显示器编号&gt;   指定X Server连接的显示器编号，该编号由"0"开始计算， 依序递增。
  -format&lt;输出格式&gt;   设置成分清单的列表格式，您可使用控制字符改变显示样式。
  -name&lt;成分名称&gt;   列出指定的成分。
  -range&lt;列表范围&gt;   设置成分清单的列表范围。
</p>
</div>
</div>

<div id="outline-container-sec-6-40" class="outline-3">
<h3 id="sec-6-40">xlsclients</h3>
<div class="outline-text-3" id="text-6-40">
<p>
功能说明：列出显示器中的客户端应用程序。
</p>

<p>
语　　法：xlsclients [-al][-display&lt;显示器编号&gt;][-m&lt;最大指令长度&gt;]
</p>

<p>
补充说明：执行xlsclients指令可列出某个显示器中，正在执行的客户端应用程序信息。
</p>

<p>
参　　数：
  -a   列出所有显示器的客户端应用程序信息。
  -display&lt;显示器编号&gt;   指定X Server连接的显示器编号，该编号由"0"开始计算，依序递增。
  -l   使用详细格式列表。
  -m&lt;最大指令长度&gt;   设置显示指令信息的最大长度，单位以字符计算。
</p>
</div>
</div>

<div id="outline-container-sec-6-41" class="outline-3">
<h3 id="sec-6-41">xlsfonts</h3>
<div class="outline-text-3" id="text-6-41">
<p>
功能说明：列出X Server使用的字体。
</p>

<p>
语　　法：xlsfonts [-1Clmou][-display&lt;主机名称或IP地址&gt;:&lt;显示器编号&gt;][-fn&lt;范本样式&gt;][-ll][-lll][-n&lt;显示栏位数&gt;][-w&lt;每列字符数&gt;]
</p>

<p>
补充说明：执行xlsfonts指令会显示目前X Server可使用的字体，也能使用范本样式仅列出的符合条件的字体。
</p>

<p>
参　　数：
</p>
<div class="org-src-container">

<pre class="src src-sh">-1   &#20165;&#29992;&#21333;&#19968;&#26639;&#20301;&#21015;&#20986;&#23383;&#20307;&#28165;&#21333;&#12290;
-C   &#20351;&#29992;&#22810;&#20010;&#26639;&#20301;&#21015;&#20986;&#23383;&#20307;&#28165;&#21333;&#12290;
-display&lt;&#20027;&#26426;&#21517;&#31216;&#25110;IP&#22320;&#22336;&gt;:&lt;&#26174;&#31034;&#22120;&#32534;&#21495;&gt;   &#25351;&#23450;&#26174;&#31034;XF86Setup&#35774;&#32622;&#30011;&#38754;&#30340;&#20027;&#26426;&#21517;&#31216;&#20197;&#21450;&#27442;&#25918;&#22312;&#35813;&#20027;&#26426;&#26426;&#19978;&#30340;&#21738;&#20010;&#26174;&#31034;&#22120;&#30011;&#38754;&#12290;
-fn&lt;&#33539;&#26412;&#26679;&#24335;&gt;   &#21482;&#21015;&#20986;&#31526;&#21512;&#33539;&#26412;&#26679;&#24335;&#25351;&#23450;&#30340;&#26465;&#20214;&#30340;&#23383;&#20307;&#12290;
-l   &#38500;&#23383;&#20307;&#21517;&#31216;&#22806;&#65292;&#21516;&#26102;&#21015;&#20986;&#23383;&#20307;&#30340;&#23646;&#24615;&#12290;
-ll   &#27492;&#21442;&#25968;&#30340;&#25928;&#26524;&#21644;&#25351;&#23450;<span style="color: #ffa07a;">"l"</span>&#21442;&#25968;&#31867;&#20284;&#65292;&#20294;&#26174;&#31034;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;
-lll   &#27492;&#21442;&#25968;&#30340;&#25928;&#26524;&#21644;&#25351;&#23450;<span style="color: #ffa07a;">"ll"</span>&#21442;&#25968;&#31867;&#20284;&#65292;&#20294;&#26174;&#31034;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;
-m   &#37197;&#21512;&#21442;&#25968;<span style="color: #ffa07a;">"-l"</span>&#20351;&#29992;&#26102;&#65292;&#19968;&#24182;&#21015;&#20986;&#23383;&#20307;&#22823;&#23567;&#30340;&#19978;&#19979;&#38480;&#12290;
-n&lt;&#26174;&#31034;&#26639;&#20301;&#25968;&gt;   &#35774;&#32622;&#27599;&#21015;&#26174;&#31034;&#30340;&#26639;&#20301;&#25968;&#12290;
-o   &#20197;OpenFont&#30340;&#24418;&#24335;&#21015;&#20986;&#23383;&#20307;&#28165;&#21333;&#12290;
-u   &#21015;&#20986;&#23383;&#20307;&#28165;&#21333;&#26102;&#19981;&#20381;&#29031;&#20854;&#21517;&#31216;&#25490;&#24207;&#12290;
-w&lt;&#27599;&#21015;&#23383;&#31526;&#25968;&gt;   &#35774;&#32622;&#27599;&#21015;&#30340;&#26368;&#22823;&#23383;&#31526;&#25968;&#12290;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-42" class="outline-3">
<h3 id="sec-6-42">zip</h3>
<div class="outline-text-3" id="text-6-42">
<p>
linux zip 命令详解功能说明：压缩文件。语 法：zip [-AcdDfFghjJKlLmoqrSTuvVwXyz$][-b &lt;工作目录&gt;][-ll][-n &lt;字尾字符串&gt;][-t &lt;日期时间&gt;][-&lt;压缩效率&gt;][压缩文件][文件&#x2026;][-i &lt;范本样式&gt;][-x &lt;范本样式&gt;] 
补充说明：zip是个使用广泛的压缩程序，文件经它压缩后会另外产生具有".zip"扩展名的压缩文件。参 数： 
</p>
<p class="verse">
-A 调整可执行的自动解压缩文件。<br  />
-b&lt;工作目录&gt; 指定暂时存放文件的目录。<br  />
-c 替每个被压缩的文件加上注释。<br  />
-d 从压缩文件内删除指定的文件。<br  />
-D 压缩文件内不建立目录名称。<br  />
-f 此参数的效果和指定"-u"参数类似，但不仅更新既有文件，如果某些文件原本不存在于压缩文件内，使用本参数会一并将其加入压缩文件中。<br  />
-F 尝试修复已损坏的压缩文件。<br  />
-g 将文件压缩后附加在既有的压缩文件之后，而非另行建立新的压缩文件。<br  />
-h 在线帮助。<br  />
-i&lt;范本样式&gt; 只压缩符合条件的文件。<br  />
-j 只保存文件名称及其内容，而不存放任何目录名称。<br  />
-J 删除压缩文件前面不必要的数据。<br  />
-k 使用MS-DOS兼容格式的文件名称。<br  />
-l 压缩文件时，把LF字符置换成LF+CR字符。<br  />
-ll 压缩文件时，把LF+CR字符置换成LF字符。<br  />
-L 显示版权信息。<br  />
-m 将文件压缩并加入压缩文件后，删除原始文件，即把文件移到压缩文件中。<br  />
-n&lt;字尾字符串&gt; 不压缩具有特定字尾字符串的文件。<br  />
-o 以压缩文件内拥有最新更改时间的文件为准，将压缩文件的更改时间设成和该文件相同。<br  />
-q 不显示指令执行过程。<br  />
-r 递归处理，将指定目录下的所有文件和子目录一并处理。<br  />
-S 包含系统和隐藏文件。<br  />
-t&lt;日期时间&gt; 把压缩文件的日期设成指定的日期。<br  />
-T 检查备份文件内的每个文件是否正确无误。<br  />
-u 更换较新的文件到压缩文件内。<br  />
-v 显示指令执行过程或显示版本信息。<br  />
-V 保存VMS操作系统的文件属性。<br  />
-w 在文件名称里假如版本编号，本参数仅在VMS操作系统下有效。<br  />
-x&lt;范本样式&gt; 压缩时排除符合条件的文件。<br  />
-X 不保存额外的文件属性。<br  />
-y 直接保存符号连接，而非该连接所指向的文件，本参数仅在UNIX之类的系统下有效。<br  />
-z 替压缩文件加上注释。<br  />
-$ 保存第一个被压缩文件所在磁盘的卷册名称。<br  />
-&lt;压缩效率&gt; 压缩效率是一个介于1-9的数值。<br  />
</p>
<p>
linux unzip 命令详解
</p>

<p>
功能说明：解压缩zip文件
</p>

<p>
语 法：unzip [-cflptuvz][-agCjLMnoqsVX][-P &lt;密码&gt;][.zip文件][文件][-d &lt;目录&gt;][-x &lt;文件&gt;] 或 unzip [-Z]
</p>

<p>
补充说明：unzip为.zip压缩文件的解压缩程序。
</p>

<p>
参 数：
</p>

<p>
-c 将解压缩的结果显示到屏幕上，并对字符做适当的转换。
</p>

<p>
-f 更新现有的文件。
</p>

<p>
-l 显示压缩文件内所包含的文件。
</p>

<p>
-p 与-c参数类似，会将解压缩的结果显示到屏幕上，但不会执行任何的转换。
</p>

<p>
-t 检查压缩文件是否正确。
</p>

<p>
-u 与-f参数类似，但是除了更新现有的文件外，也会将压缩文件中的其他文件解压缩到目录中。
</p>

<p>
-v 执行是时显示详细的信息。
</p>

<p>
-z 仅显示压缩文件的备注文字。
</p>

<p>
-a 对文本文件进行必要的字符转换。
</p>

<p>
-b 不要对文本文件进行字符转换。
</p>

<p>
-C 压缩文件中的文件名称区分大小写。
</p>

<p>
-j 不处理压缩文件中原有的目录路径。
</p>

<p>
-L 将压缩文件中的全部文件名改为小写。
</p>

<p>
-M 将输出结果送到more程序处理。
</p>

<p>
-n 解压缩时不要覆盖原有的文件。
</p>

<p>
-o 不必先询问用户，unzip执行后覆盖原有文件。
</p>

<p>
-P&lt;密码&gt; 使用zip的密码选项。
</p>

<p>
-q 执行时不显示任何信息。
</p>

<p>
-s 将文件名中的空白字符转换为底线字符。
</p>

<p>
-V 保留VMS的文件版本信息。
</p>

<p>
-X 解压缩时同时回存文件原来的UID/GID。
</p>

<p>
[.zip文件] 指定.zip压缩文件。
</p>

<p>
[文件] 指定要处理.zip压缩文件中的哪些文件。
</p>

<p>
-d&lt;目录&gt; 指定文件解压缩后所要存储的目录。
</p>

<p>
-x&lt;文件&gt; 指定不要处理.zip压缩文件中的哪些文件。
</p>

<p>
-Z unzip -Z等于执行zipinfo指令
</p>

<p>
范例：
</p>
<div class="org-src-container">

<pre class="src src-sh">zip&#21629;&#20196;&#21487;&#20197;&#29992;&#26469;&#23558;&#25991;&#20214;&#21387;&#32553;&#25104;&#20026;&#24120;&#29992;&#30340;zip&#26684;&#24335;&#12290;unzip&#21629;&#20196;&#21017;&#29992;&#26469;&#35299;&#21387;&#32553;zip&#25991;&#20214;&#12290;

1. &#25105;&#24819;&#25226;&#19968;&#20010;&#25991;&#20214;abc.txt&#21644;&#19968;&#20010;&#30446;&#24405;dir1&#21387;&#32553;&#25104;&#20026;yasuo.zip&#65306;

&#65283; zip -r yasuo.zip abc.txt dir1

2.&#25105;&#19979;&#36733;&#20102;&#19968;&#20010;yasuo.zip&#25991;&#20214;&#65292;&#24819;&#35299;&#21387;&#32553;&#65306;

<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">unzip yasuo.zip</span>

3.&#25105;&#24403;&#21069;&#30446;&#24405;&#19979;&#26377;abc1.zip&#65292;abc2.zip&#21644;abc3.zip&#65292;&#25105;&#24819;&#19968;&#36215;&#35299;&#21387;&#32553;&#23427;&#20204;&#65306;

&#65283; unzip abc<span style="color: #ffa07a;">\?</span>.zip

&#27880;&#37322;&#65306;?&#34920;&#31034;&#19968;&#20010;&#23383;&#31526;&#65292;&#22914;&#26524;&#29992;*&#34920;&#31034;&#20219;&#24847;&#22810;&#20010;&#23383;&#31526;&#12290;

4.&#25105;&#26377;&#19968;&#20010;&#24456;&#22823;&#30340;&#21387;&#32553;&#25991;&#20214;large.zip&#65292;&#25105;&#19981;&#24819;&#35299;&#21387;&#32553;&#65292;&#21482;&#24819;&#30475;&#30475;&#23427;&#37324;&#38754;&#26377;&#20160;&#20040;&#65306;

<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">unzip -v large.zip</span>

5.&#25105;&#19979;&#36733;&#20102;&#19968;&#20010;&#21387;&#32553;&#25991;&#20214;large.zip&#65292;&#24819;&#39564;&#35777;&#19968;&#19979;&#36825;&#20010;&#21387;&#32553;&#25991;&#20214;&#26159;&#21542;&#19979;&#36733;&#23436;&#20840;&#20102;

<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">unzip -t large.zip</span>

6.&#25105;&#29992;-v&#36873;&#39033;&#21457;&#29616;music.zip&#21387;&#32553;&#25991;&#20214;&#37324;&#38754;&#26377;&#24456;&#22810;&#30446;&#24405;&#21644;&#23376;&#30446;&#24405;&#65292;&#24182;&#19988;&#23376;&#30446;&#24405;&#20013;&#20854;&#23454;&#37117;&#26159;&#27468;&#26354;mp3&#25991;&#20214;&#65292;&#25105;&#24819;&#25226;&#36825;&#20123;&#25991;&#20214;&#37117;&#19979;&#36733;&#21040;&#31532;&#19968;&#32423;&#30446;&#24405;&#65292;&#32780;&#19981;&#26159;&#19968;&#23618;&#19968;&#23618;&#24314;&#30446;&#24405;&#65306;

<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">unzip -j music.zip</span>
</pre>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
<a href="http://ubuntuforums.org/showthread.php?t=2011612">http://ubuntuforums.org/showthread.php?t=2011612</a>
</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara">
<a href="http://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html">http://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html</a>
</p></div>

<div class="footdef"><sup><a id="fn.3" name="fn.3" class="footnum" href="#fnr.3">3</a></sup> <p class="footpara">
<a href="http://www.cnblogs.com/allen8807/archive/2010/11/10/1874001.html">http://www.cnblogs.com/allen8807/archive/2010/11/10/1874001.html</a>
</p></div>

<div class="footdef"><sup><a id="fn.4" name="fn.4" class="footnum" href="#fnr.4">4</a></sup> <p class="footpara">
<a href="http://blog.csdn.net/wh62592855/article/details/6332540">http://blog.csdn.net/wh62592855/article/details/6332540</a>
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2015-03-05 Thu 23:20</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
