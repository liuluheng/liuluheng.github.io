<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Comparing and Merging Files with GNU diff and patch Notes</title>
<!-- 2015-03-05 Thu 23:20 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link href="../../../assets/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../../../assets/bootstrap-responsive.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../../../assets/stylesheet.css" />
<script src="assets/js/bootstrap.min.js"></script>

<script type="text/javascript" src="assets/js/org-info.js">
/**
 *
 * @source: assets/js/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in assets/js/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in assets/js/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "2");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "0");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "#dddddd");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "0");
org_html_manager.set("VIEW", "showall");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Comparing and Merging Files with GNU diff and patch Notes</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Overview</a></li>
<li><a href="#sec-2">Chapter 1: What Comparison Means</a>
<ul>
<li><a href="#sec-2-1">1.1 Hunks</a></li>
<li><a href="#sec-2-2">1.2 Suppressing Differences in Blank and Tab Spacing</a></li>
<li><a href="#sec-2-3">1.3 Suppressing Differences in Blank Lines</a></li>
<li><a href="#sec-2-4">1.4 Suppressing Case Differences</a></li>
<li><a href="#sec-2-5">1.5 Suppressing Lines Matching a Regular Expression</a></li>
<li><a href="#sec-2-6">1.6 Summarizing Which Files Differ</a></li>
<li><a href="#sec-2-7">1.7 Binary Files and Forcing Text Comparisons</a></li>
</ul>
</li>
<li><a href="#sec-3">Chapter 2: diff Output Formats</a>
<ul>
<li><a href="#sec-3-1">2.2.1 Detailed Description of Normal Format</a></li>
<li><a href="#sec-3-2">2.3 Showing Differences in Their Context</a></li>
<li><a href="#sec-3-3">2.3.1 Context Format</a></li>
<li><a href="#sec-3-4">2.3.2 Unified Format</a></li>
<li><a href="#sec-3-5">2.3.3.1 Showing Lines That Match Regular Expressions</a></li>
<li><a href="#sec-3-6">2.3.3.2 Showing C Function Headings</a></li>
<li><a href="#sec-3-7">2.3.4 Showing Alternate File Names</a></li>
<li><a href="#sec-3-8">2.4 Showing Differences Side by Side</a></li>
<li><a href="#sec-3-9">2.6 Merging Files with If-then-else</a></li>
</ul>
</li>
<li><a href="#sec-4">Chapter 3: Incomplete Lines</a></li>
<li><a href="#sec-5">Chapter 4: Comparing Directories</a></li>
<li><a href="#sec-6">Chapter 5: Making diff Output Prettier</a>
<ul>
<li><a href="#sec-6-1">5.1 Preserving Tab Stop Alignment</a></li>
<li><a href="#sec-6-2">5.2 Paginating diff Output</a></li>
</ul>
</li>
<li><a href="#sec-7">Chapter 6: diff Performance Tradeoffs</a></li>
<li><a href="#sec-8">Chapter 7: Comparing Three Files</a></li>
<li><a href="#sec-9">Chapter 8: Merging From a Common Ancestor</a></li>
<li><a href="#sec-10">Chapter 9: Interactive Merging with sdiff</a></li>
<li><a href="#sec-11">Chapter 10: Merging with patch</a>
<ul>
<li><a href="#sec-11-1">10.1 Selecting the patch Input Format</a></li>
<li><a href="#sec-11-2">10.3.2 Applying Reversed Patches</a></li>
<li><a href="#sec-11-3">10.7 Applying Patches in Other Directories</a></li>
</ul>
</li>
<li><a href="#sec-12">Chapter 11: Tips for Making and Using Patches</a>
<ul>
<li><a href="#sec-12-1">11.1 Tips for Patch Producers</a></li>
</ul>
</li>
<li><a href="#sec-13">Chapter 13: Invoking diff</a>
<ul>
<li><a href="#sec-13-1">13.1 Options to diff</a></li>
</ul>
</li>
<li><a href="#sec-14">Chapter 15: Invoking patch</a>
<ul>
<li><a href="#sec-14-1">15.1 Options to patch</a></li>
</ul>
</li>
<li><a href="#sec-15">seldom use</a>
<ul>
<li><a href="#sec-15-1">2.6.1 Line Group Formats</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Overview</h2>
<div class="outline-text-2" id="text-1">
<p>
gnu diff was written by Paul Eggert, Mike Haertel, David Hayes,
Richard Stallman, and Len Tower. Wayne Davison designed and implemented
the unified output format. The basic algorithm is described in
“An O(ND) Difference Algorithm and its Variations”, Eugene W. Myers,
Algorithmica Vol. 1 No. 2, 1986, pp. 251–266; and in “A File Comparison
Program”, Webb Miller and Eugene W. Myers, Software—Practice
and Experience Vol. 15 No. 11, 1985, pp. 1025–1040. The algorithm was
independently discovered as described in “Algorithms for Approximate String Matching”, E. Ukkonen, Information and Control Vol. 64, 1985,
pp. 100–118.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Chapter 1: What Comparison Means</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">1.1 Hunks</h3>
<div class="outline-text-3" id="text-2-1">
<p>
When comparing two files, diff finds sequences of lines common to
both files, interspersed with groups of differing lines called
<i>hunks</i>.
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">1.2 Suppressing Differences in Blank and Tab Spacing</h3>
<div class="outline-text-3" id="text-2-2">
<p>
The ‘-E’ and ‘&#x2013;ignore-tab-expansion’ options ignore the distinction
between tabs and spaces on input. A tab is considered to be equivalent
to the number of spaces to the next tab stop. diff assumes that tab
stops are set every 8 print columns.
</p>

<p>
The ‘-b’ and ‘&#x2013;ignore-space-change’ options are stronger. They
ignore white space at line end, and consider all other sequences of one or
more white space characters to be equivalent.
</p>

<p>
<code>diff</code> considers the following two lines to be equivalent, where ‘$’
denotes the line end:
</p>
<p class="verse">
Here lyeth muche rychnesse in lytell space. &#x2013; John Heywood$<br  />
Here lyeth muche rychnesse in lytell space. &#x2013; John Heywood $<br  />
</p>

<p>
The ‘-w’ and ‘&#x2013;ignore-all-space’ options are stronger still. They
ignore difference even if one line has white space where the other line has
none.
</p>

<p>
<code>diff</code> considers the following two lines to be equivalent, where ‘$’ denotes the line end and ‘<sup>M’</sup>
denotes a carriage return:
</p>
<p class="verse">
Here lyeth muche rychnesse in lytell space.&#x2013; John Heywood$<br  />
&#xa0;He relyeth much erychnes seinly tells pace. &#x2013;John Heywood ^M$<br  />
</p>
</div>
</div>








<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">1.3 Suppressing Differences in Blank Lines</h3>
<div class="outline-text-3" id="text-2-3">
<p>
The ‘-B’ and ‘&#x2013;ignore-blank-lines’ options ignore insertions or
deletions of blank lines. These options affect only lines that are completely
empty; they do not affect lines that look empty but contain space or tab
characters.
</p>
</div>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4">1.4 Suppressing Case Differences</h3>
<div class="outline-text-3" id="text-2-4">
<p>
To request this, use the ‘-i’ or ‘&#x2013;ignore-case’ option.
</p>
</div>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5">1.5 Suppressing Lines Matching a Regular Expression</h3>
<div class="outline-text-3" id="text-2-5">
<p>
To ignore insertions and deletions of lines that match a grep-style regular
expression, use the ‘-I regexp’ or ‘&#x2013;ignore-matching-lines=regexp’
option. For example, ‘diff -I ’<sup>[[</sup>:digit:]]’’ ignores all changes to lines
beginning with a digit.
</p>

<p>
You can specify more than one regular expression for lines to ignore
by using more than one ‘-I’ option. diff tries to match each line against
each regular expression.
</p>
</div>
</div>
<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6">1.6 Summarizing Which Files Differ</h3>
<div class="outline-text-3" id="text-2-6">
<p>
diff simply reports whether files differ. The ‘-q’ and ‘&#x2013;brief’
options select this output format.
</p>

<p>
Unlike diff, cmp cannot compare directories; it can only compare two
files.
</p>
</div>
</div>
<div id="outline-container-sec-2-7" class="outline-3">
<h3 id="sec-2-7">1.7 Binary Files and Forcing Text Comparisons</h3>
<div class="outline-text-3" id="text-2-7">
<p>
You can force diff to consider all files to be text files, and compare them
line by line, by using the ‘-a’ or ‘&#x2013;text’ option.
</p>

<p>
You can also force diff to consider all files to be binary files, and
report only whether they differ (but not how). Use the ‘-q’ or ‘&#x2013;brief’
option for this.
</p>

<p>
Use the ‘&#x2013;binary’ option to force diff to read and write binary data
instead.
</p>

<p>
The ‘&#x2013;strip-trailing-cr’ causes diff to treat input lines that end
in carriage return followed by newline as if they end in plain newline
</p>
</div>
</div>
</div>












<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Chapter 2: diff Output Formats</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">2.2.1 Detailed Description of Normal Format</h3>
<div class="outline-text-3" id="text-3-1">
<p>
All line numbers are the original line numbers in each file. The types
of change commands are:
</p>

<ul class="org-ul">
<li><b>‘lar’</b>: Add the lines in range r of the second file after line l of the
first file. For example, ‘8a12,15’ means append lines 12–15 of file 2
after line 8 of file 1; or, if changing file 2 into file 1, delete lines 12–15 of file 2.
</li>
<li><b>‘fct’</b>: Replace the lines in range f of the first file with lines
in range t of the second file. This is like a combined add and
delete, but more compact. For example, ‘5,7c8,10’ means change lines
5–7 of file 1 to read as lines 8–10 of file 2; or, if changing file
2 into file 1, change lines 8–10 of file 2 to read as lines 5–7 of file 1.
</li>
<li><b>‘rdl’</b> Delete the lines in range r from the first file; line l is
where they would have appeared in the second file had they not been
deleted. For example, ‘5,7d3’ means delete lines 5–7 of file 1; or,
if changing file 2 into file 1, append lines 5–7 of file 1 after
line 3 of file 2.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">2.3 Showing Differences in Their Context</h3>
<div class="outline-text-3" id="text-3-2">
<p>
you will
also want to see the parts of the files near the lines that differ, to help you
understand exactly what has changed. These nearby parts of the files are
called the <i>context</i>.
</p>

<p>
gnu diff provides two output formats that show context around the
differing lines: context format and unified format.
</p>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3">2.3.1 Context Format</h3>
<div class="outline-text-3" id="text-3-3">
<p>
To select this output format, use the ‘-C lines’, ‘&#x2013;context[=lines]’,
or ‘-c’ option. The argument lines that some of these options take is
the number of lines of context to show.
</p>
</div>
<ul class="org-ul"><li><a id="sec-3-3-1" name="sec-3-3-1"></a>2.3.1.1 Detailed Description of Context Format<br  /><div class="outline-text-4" id="text-3-3-1">
<p>
The lines that differ between the two files start with one of
the following indicator characters, followed by a space character:
</p>

<ul class="org-ul">
<li>‘!’: A line that is part of a group of one or more lines that
changed between the two files. There is a corresponding group of
lines marked with ‘!’ in the part of this hunk for the other file.
</li>

<li>‘+’ An “inserted” line in the second file that corresponds to
nothing in the first file. 
</li>

<li>‘-’ A “deleted” line in the first file that corresponds to nothing
in the second file.
</li>
</ul>
</div>
</li></ul>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4">2.3.2 Unified Format</h3>
<div class="outline-text-3" id="text-3-4">
<p>
To select this
output format, use the ‘-U lines’, ‘&#x2013;unified[=lines]’, or ‘-u’ option. The
argument lines is the number of lines of context to show.
</p>
</div>

<ul class="org-ul"><li><a id="sec-3-4-1" name="sec-3-4-1"></a>2.3.2.1 Detailed Description of Unified Format<br  /><div class="outline-text-4" id="text-3-4-1">
<p>
Unified format hunks look like this:
</p>
<p class="verse">
@@ from-file-range to-file-range @@<br  />
line-from-either-file<br  />
line-from-either-file&#x2026;<br  />
</p>

<p>
The lines that actually differ between the two files have one of the
following indicator characters in the left print column:
</p>
<ul class="org-ul">
<li>‘+’ A line was added here to the first file.
</li>
<li>‘-’ A line was removed here from the first file.
</li>
</ul>
</div>
</li>
<li><a id="sec-3-4-2" name="sec-3-4-2"></a>2.3.2.2 An Example of Unified Format<br  /><div class="outline-text-4" id="text-3-4-2">
<div class="org-src-container">

<pre class="src src-sh">$ diff -u  test1 test2
--- test1       2012-09-26 22:55:50.875392031 +0800
+++ test2       2012-09-26 23:09:39.927172792 +0800
@@ -1,11 +1,13 @@
-The Way that can be told of is not the eternal Way;
-The name that can be named is not the eternal name.
 The Nameless is the origin of Heaven and Earth;
-The Named is the mother of all things.
+The named is the mother of all things.
+
 Therefore let there always be non-being,
 so we may see their subtlety,
 And let there always be being,
 so we may see their outcome.
 The two are the same,
 But after they are produced,
-they have different names.
<span style="color: #ffa07a;">\ </span>No newline at end of file
+they have different names.
+They both may be called deep and profound.
+Deeper and more profound,
+The door of all subtleties!
<span style="color: #ffa07a;">\ </span>No newline at end of file
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5">2.3.3.1 Showing Lines That Match Regular Expressions</h3>
<div class="outline-text-3" id="text-3-5">
<p>
use the ‘-F regexp’ or ‘&#x2013;show-function-line=regexp’ option.
</p>

<p>
Here are suggested regular expressions for some
common languages:
</p>
<div class="org-src-container">

<pre class="src src-sh">&#8216;^[[:alpha:]$<span style="color: #eedd82;">_</span>]&#8217;
   C, C++, Prolog
&#8216;^(&#8217;   Lisp
&#8216;^@node&#8217;    Texinfo
</pre>
</div>

<p>
The ‘-F’ and ‘&#x2013;show-function-line’ options find the nearest unchanged
line that precedes each hunk of differences and matches the given
regular expression.
</p>
</div>
</div>

<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6">2.3.3.2 Showing C Function Headings</h3>
<div class="outline-text-3" id="text-3-6">
<p>
To show in which functions differences occur for C and similar languages,
you can use the ‘-p’ or ‘&#x2013;show-c-function’ option.
</p>
</div>
</div>

<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7">2.3.4 Showing Alternate File Names</h3>
<div class="outline-text-3" id="text-3-7">
<p>
Here are the first two lines of the output from ‘diff -C 2
&#x2013;label=original &#x2013;label=modified lao tzu’:
</p>
<div class="org-src-container">

<pre class="src src-sh">*** original
--- modified
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-8" class="outline-3">
<h3 id="sec-3-8">2.4 Showing Differences Side by Side</h3>
<div class="outline-text-3" id="text-3-8">
<p>
The gutter contains one of the following markers:
</p>
<p class="verse">
white space<br  />
The corresponding lines are in common. That is, either the<br  />
lines are identical, or the difference is ignored because of one<br  />
of the ‘&#x2013;ignore’ options (see Section 1.2 [White Space],<br  />
page 6).<br  />
<br  />
‘|’   The corresponding lines differ, and they are either both complete<br  />
or both incomplete.<br  />
<br  />
‘&lt;’ The files differ and only the first file contains the line.<br  />
‘&gt;’ The files differ and only the second file contains the line.<br  />
‘(’ Only the first file contains the line, but the difference is<br  />
ignored.<br  />
‘)’ Only the second file contains the line, but the difference is<br  />
ignored.<br  />
‘\’ The corresponding lines differ, and only the first line is incomplete.<br  />
‘/’ The corresponding lines differ, and only the second line is<br  />
incomplete.<br  />
</p>
</div>
<ul class="org-ul"><li><a id="sec-3-8-1" name="sec-3-8-1"></a>2.4.1 Controlling Side by Side Format<br  /><div class="outline-text-4" id="text-3-8-1">
<p>
The ‘-y’ or ‘&#x2013;side-by-side’ option selects side by side format.
</p>

<p>
You can set the width of the output with the ‘-W columns’
or ‘&#x2013;width=columns’ option.
</p>

<p>
The ‘&#x2013;left-column’ option prints only the left column of two common
lines. The ‘&#x2013;suppress-common-lines’ option suppresses common
lines entirely
</p>
</div>
</li>

<li><a id="sec-3-8-2" name="sec-3-8-2"></a>2.4.2 An Example of Side by Side Format<br  /><div class="outline-text-4" id="text-3-8-2">
<p>
Here is the output of the command <code>‘diff -y -W 65 lao tzu’</code>.
</p>

<div class="org-src-container">

<pre class="src src-sh">The Way that can be told of i &lt;
The name that can be named is &lt;
The Nameless is the origin of   The Nameless is the origin of
The Named is the mother of al | The named is the mother of al
                              &gt;
Therefore let there always be   Therefore let there always be
so we may see their subtlety,   so we may see their subtlety,
And let there always be being   And let there always be being
so we may see their outcome.    so we may see their outcome.
The two are the same,           The two are the same,
But after they are produced,    But after they are produced,
they have different names.    <span style="color: #ffa07a;">\ </span>they have different names.
                              &gt; They both may be called deep 
                              &gt; Deeper and more profound,
                              &gt; The door of all subtleties!%
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-3-9" class="outline-3">
<h3 id="sec-3-9">2.6 Merging Files with If-then-else</h3>
<div class="outline-text-3" id="text-3-9">
<p>
To merge two files, use diff with the ‘-D name’ or ‘&#x2013;ifdef=name’
option. The argument name is the C preprocessor identifier to use in
the #ifdef and #ifndef directives.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Chapter 3: Incomplete Lines</h2>
<div class="outline-text-2" id="text-4">
<p>
When an input file ends in a non-newline character, its last line is
called an incomplete line because its last character is not a newline. All
other lines are called full lines and end in a newline character. Incomplete
lines do not match full lines unless differences in white space are
ignored
</p>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Chapter 4: Comparing Directories</h2>
<div class="outline-text-2" id="text-5">
<p>
if you use the ‘-s’ or ‘&#x2013;report-identical-files’ option, it reports
pairs of identical files.
</p>

<p>
if you use the ‘-r’ or ‘&#x2013;recursive’ option, it compares every
corresponding pair of files in the directory trees, as many levels deep as they go.
</p>

<p>
You can make diff act
as though the file existed but was empty in the other directory, so that it
outputs the entire contents of the file that actually exists. To do this, use the ‘-N’ or ‘&#x2013;new-file’
option.
</p>

<p>
If the older directory contains one or more large files that are not
in the newer directory, you can make the patch smaller by using the
‘&#x2013;unidirectional-new-file’ option instead of ‘-N’. This option is like
‘-N’ except that it only inserts the contents of files that appear in the
second directory but not the first
</p>

<p>
To ignore some files while comparing directories, use the ‘-x pattern’
or ‘&#x2013;exclude=pattern’ option. This option ignores any files or subdirectories
whose base names match the shell pattern pattern.
</p>

<p>
If you need to give this option many times, you can instead put
the patterns in a file, one pattern per line, and use the ‘-X file’ or
‘&#x2013;exclude-from=file’ option.
</p>

<p>
You can do
this by using the ‘-S file’ or ‘&#x2013;starting-file=file’ option. This compares
only the file file and all alphabetically later files in the topmost
directory level.
</p>

<p>
With
the ‘&#x2013;ignore-file-name-case’ option, diff ignores case differences
in file names, so that for example the contents of the file ‘Tao’ in one
directory are compared to the contents of the file ‘TAO’ in the other.
The ‘&#x2013;no-ignore-file-name-case’ option cancels the effect of the
‘&#x2013;ignore-file-name-case’ option, reverting to the default behavior.
</p>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Chapter 5: Making diff Output Prettier</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1">5.1 Preserving Tab Stop Alignment</h3>
<div class="outline-text-3" id="text-6-1">
<p>
The first way is to have diff convert all tabs into the correct number
of spaces before outputting them; select this method with the ‘-t’ or
‘&#x2013;expand-tabs’ option.
</p>
</div>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2">5.2 Paginating diff Output</h3>
<div class="outline-text-3" id="text-6-2">
<p>
The ‘-l’ and ‘&#x2013;paginate’ options do this by sending the diff
output through the pr program.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">Chapter 6: diff Performance Tradeoffs</h2>
<div class="outline-text-2" id="text-7">
<p>
When the files you are comparing are large and have small
groups of changes scattered throughout them, you can use the
‘&#x2013;speed-large-files’ option to make a different modification to the
algorithm that diff uses.
</p>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">Chapter 7: Comparing Three Files</h2>
<div class="outline-text-2" id="text-8">
<p>
  Three-way hunks have
plain ‘====’ lines, and two-way hunks have ‘1’, ‘2’, or ‘3’ appended to
specify which of the three input files differ in that hunk.
</p>

<p>
ut with the ‘-T’ or ‘&#x2013;initial-tab’ option,
diff3 uses a tab instead of two spaces;
</p>

<p>
Commands take the following forms:
</p>

<p>
‘<a href="la">la</a>’ This hunk appears after line l of file file, and contains no
lines in that file. To edit this file to yield the other files,
one must append hunk lines taken from the other files. For
example, ‘1:11a’ means that the hunk follows line 11 in the
first file and contains no lines from that file.
</p>

<p>
‘<a href="rc">rc</a>’ This hunk contains the lines in the range r of file file. The
range r is a comma-separated pair of line numbers, or just
one number if the range is a singleton. To edit this file to
yield the other files, one must change the specified lines to be
the lines taken from the other files. For example, ‘2:11,13c’
means that the hunk contains lines 11 through 13 from the
second file.
</p>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">Chapter 8: Merging From a Common Ancestor</h2>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10">Chapter 9: Interactive Merging with sdiff</h2>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11">Chapter 10: Merging with patch</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1">10.1 Selecting the patch Input Format</h3>
<div class="outline-text-3" id="text-11-1">
<p>
The output
formats listed here are the only ones that patch can understand.
‘-c’‘&#x2013;context’
context diff.
</p>

<p>
‘-e’‘&#x2013;ed’ ed script.
</p>

<p>
‘-n’‘&#x2013;normal’ normal diff.
</p>

<p>
‘-u’‘&#x2013;unified’
unified diff.
</p>
</div>
</div>

<div id="outline-container-sec-11-2" class="outline-3">
<h3 id="sec-11-2">10.3.2 Applying Reversed Patches</h3>
<div class="outline-text-3" id="text-11-2">
<p>
Sometimes people run diff with the new file first instead of second.
This creates a diff that is “reversed”. To apply such patches, give patch
the ‘-R’ or ‘&#x2013;reverse’ option.
</p>
</div>
</div>

<div id="outline-container-sec-11-3" class="outline-3">
<h3 id="sec-11-3">10.7 Applying Patches in Other Directories</h3>
<div class="outline-text-3" id="text-11-3">
<p>
The ‘-d directory’ or ‘&#x2013;directory=directory’ option to patch makes
directory directory the current directory for interpreting both file names
in the patch file, and file names given as arguments to other options
</p>

<p>
Sometimes the file names given in a patch contain leading directories,
but you keep your files in a directory different from the one given in the
patch. In those cases, you can use the <code>‘-pnumber’</code> or <code>‘--strip=number’</code>
option to set the file name strip count to number. The strip count tells
patch how many slashes, along with the directory names between them,
to strip from the front of file names. A sequence of one or more adjacent
slashes is counted as a single slash. By default, patch strips off all leading
directories, leaving just the base file names.
</p>

<p>
For example, suppose the file name in the patch file is
<code>‘/gnu/src/emacs/etc/NEWS’</code>. Using <code>‘-p0’</code> gives the entire file
name unmodified, <code>‘-p1’</code> gives <code>‘gnu/src/emacs/etc/NEWS’</code> (no leading
slash), <code>‘-p4’</code> gives <code>‘etc/NEWS’</code>, and not specifying <code>‘-p’</code> at all gives <code>‘NEWS’</code>.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12">Chapter 11: Tips for Making and Using Patches</h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1">11.1 Tips for Patch Producers</h3>
<div class="outline-text-3" id="text-12-1">
<p>
To generate the patch, use the command ‘diff -Naur old new’ where
old and new identify the old and new directories. The names old and
new should not contain any slashes. The ‘-N’ option lets the patch create
and remove files; ‘-a’ lets the patch update non-text files; ‘-u’ generates
useful time stamps and enough context; and ‘-r’ lets the patch update
subdirectories. Here is an example command, using Bourne shell syntax:
</p>
<div class="org-src-container">

<pre class="src src-sh">diff -Naur gcc-3.0.3 gcc-3.0.4
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13">Chapter 13: Invoking diff</h2>
<div class="outline-text-2" id="text-13">
</div><div id="outline-container-sec-13-1" class="outline-3">
<h3 id="sec-13-1">13.1 Options to diff</h3>
<div class="outline-text-3" id="text-13-1">
<p>
Brackets
([ and ]) indicate that an option takes an optional argument.
</p>
<p class="verse">
‘-a’<br  />
‘&#x2013;text’ Treat all files as text and compare them line-by-line, even<br  />
if they do not seem to be text. See Section 1.7 [Binary],<br  />
page 8.<br  />
<br  />
‘-b’<br  />
‘&#x2013;ignore-space-change’<br  />
Ignore changes in amount of white space. See Section 1.2<br  />
[White Space], page 6.<br  />
<br  />
‘-B’<br  />
‘&#x2013;ignore-blank-lines’<br  />
Ignore changes that just insert or delete blank lines. See<br  />
Section 1.3 [Blank Lines], page 7.<br  />
‘&#x2013;binary’ Read and write data in binary mode. See Section<br  />
1.7[Binary],page 8.<br  />
<br  />
‘-c’ Use the context output format, showing three lines of context.<br  />
See Section 2.3.1 [Context Format], page 14.<br  />
<br  />
‘-C lines’<br  />
‘&#x2013;context[=lines]’<br  />
Use the context output format, showing lines (an integer)<br  />
lines of context, or three if lines is not given. See Section<br  />
2.3.1 [Context Format], page 14. For proper operation,<br  />
patch typically needs at least two lines of context.<br  />
On older systems, diff supports an obsolete option ‘-lines’<br  />
that has effect when combined with ‘-c’ or ‘-p’. posix<br  />
1003.1-2001 (see Chapter 17 [Standards conformance],<br  />
page 97) does not allow this; use ‘-C lines’ instead.<br  />
<br  />
‘&#x2013;changed-group-format=format’<br  />
Use format to output a line group containing differing lines<br  />
from both files in if-then-else format. See Section 2.6.1 [Line<br  />
Group Formats], page 24.<br  />
<br  />
‘-d’<br  />
‘&#x2013;minimal’<br  />
Change the algorithm perhaps find a smaller set of changes.<br  />
This makes diff slower (sometimes much slower). See Chapter<br  />
6 [diff Performance], page 39.<br  />
<br  />
‘-D name’<br  />
‘&#x2013;ifdef=name’<br  />
Make merged ‘#ifdef’ format output, conditional on the<br  />
preprocessor macro name. See Section 2.6 [If-then-else],<br  />
page 24.<br  />
<br  />
‘-e’<br  />
‘&#x2013;ed’ Make output that is a valid ed script. See Section 2.5.1 [ed<br  />
Scripts], page 21.<br  />
<br  />
‘-E’<br  />
‘&#x2013;ignore-tab-expansion’<br  />
Ignore changes due to tab expansion. See Section 1.2 [White<br  />
Space], page 6.<br  />
<br  />
‘-f’<br  />
‘&#x2013;forward-ed’<br  />
Make output that looks vaguely like an ed script but has<br  />
changes in the order they appear in the file. See Section 2.5.2<br  />
[Forward ed], page 23.<br  />
<br  />
‘-F regexp’<br  />
‘&#x2013;show-function-line=regexp’<br  />
In context and unified format, for each hunk of differences,<br  />
show some of the last preceding line that matches regexp.<br  />
See Section 2.3.3.1 [Specified Headings], page 18.<br  />
<br  />
‘&#x2013;from-file=file’<br  />
Compare file to each operand; file may be a directory.<br  />
<br  />
‘&#x2013;help’ Output a summary of usage and then exit.<br  />
<br  />
‘&#x2013;horizon-lines=lines’<br  />
Do not discard the last lines lines of the common prefix and<br  />
the first lines lines of the common suffix. See Chapter 6 [diff<br  />
Performance], page 39.<br  />
<br  />
‘-i’<br  />
‘&#x2013;ignore-case’<br  />
Ignore changes in case; consider upper- and lower-case letters<br  />
equivalent. See Section 1.4 [Case Folding], page 7.<br  />
<br  />
‘-I regexp’<br  />
‘&#x2013;ignore-matching-lines=regexp’<br  />
Ignore changes that just insert or delete lines that match<br  />
regexp. See Section 1.5 [Specified Folding], page 7.<br  />
<br  />
‘&#x2013;ignore-file-name-case’<br  />
Ignore case when comparing file names during recursive comparison.<br  />
See Chapter 4 [Comparing Directories], page 35.<br  />
<br  />
‘-l’<br  />
‘&#x2013;paginate’<br  />
Pass the output through pr to paginate it. See Section 5.2<br  />
[Pagination], page 37.<br  />
<br  />
‘&#x2013;label=label’<br  />
Use label instead of the file name in the context format (see<br  />
Section 2.3.1 [Context Format], page 14) and unified format(see Section 2.3.2 [Unified Format], page 16) headers. See<br  />
Section 2.5.3 [RCS], page 23.<br  />
<br  />
‘&#x2013;left-column’<br  />
Print only the left column of two common lines in side by<br  />
side format. See Section 2.4.1 [Side by Side Format], page 20.<br  />
<br  />
‘&#x2013;line-format=format’<br  />
Use format to output all input lines in if-then-else format.<br  />
See Section 2.6.2 [Line Formats], page 27.<br  />
<br  />
‘-n’<br  />
‘&#x2013;rcs’ Output rcs-format diffs; like ‘-f’ except that each command<br  />
specifies the number of lines affected. See Section 2.5.3<br  />
[RCS], page 23.<br  />
<br  />
‘-N’<br  />
‘&#x2013;new-file’<br  />
In directory comparison, if a file is found in only one directory,<br  />
treat it as present but empty in the other directory.<br  />
See Chapter 4 [Comparing Directories], page 35.<br  />
<br  />
‘&#x2013;new-group-format=format’<br  />
Use format to output a group of lines taken from just the<br  />
second file in if-then-else format. See Section 2.6.1 [Line<br  />
Group Formats], page 24.<br  />
<br  />
‘&#x2013;new-line-format=format’<br  />
Use format to output a line taken from just the second<br  />
file in if-then-else format. See Section 2.6.2 [Line Formats],<br  />
page 27.<br  />
<br  />
‘&#x2013;old-group-format=format’<br  />
Use format to output a group of lines taken from just the<br  />
first file in if-then-else format. See Section 2.6.1 [Line Group<br  />
Formats], page 24.<br  />
<br  />
‘&#x2013;old-line-format=format’<br  />
Use format to output a line taken from just the first file in ifthen-<br  />
else format. See Section 2.6.2 [Line Formats], page 27<br  />
<br  />
‘-p’<br  />
‘&#x2013;show-c-function’<br  />
Show which C function each change is in. See Section 2.3.3.2<br  />
[C Function Headings], page 19.<br  />
<br  />
‘-q’<br  />
‘&#x2013;brief’ Report only whether the files differ, not the details of the<br  />
differences. See Section 1.6 [Brief], page 8.<br  />
<br  />
‘-r’<br  />
‘&#x2013;recursive’<br  />
When comparing directories, recursively compare any subdirectories<br  />
found. See Chapter 4 [Comparing Directories],<br  />
page 35.<br  />
<br  />
‘-s’<br  />
‘&#x2013;report-identical-files’<br  />
Report when two files are the same. See Chapter 4 [Comparing<br  />
Directories], page 35.<br  />
<br  />
‘-S file’<br  />
‘&#x2013;starting-file=file’<br  />
When comparing directories, start with the file file. This is<br  />
used for resuming an aborted comparison. See Chapter 4<br  />
[Comparing Directories], page 35.<br  />
<br  />
‘&#x2013;speed-large-files’<br  />
Use heuristics to speed handling of large files that have numerous<br  />
scattered small changes. See Chapter 6 [diff Performance],<br  />
page 39.<br  />
<br  />
‘&#x2013;strip-trailing-cr’<br  />
Strip any trailing carriage return at the end of an input line.<br  />
See Section 1.7 [Binary], page 8.<br  />
<br  />
‘&#x2013;suppress-common-lines’<br  />
Do not print common lines in side by side format. See Section<br  />
2.4.1 [Side by Side Format], page 20.<br  />
<br  />
‘-t’<br  />
‘&#x2013;expand-tabs’<br  />
Expand tabs to spaces in the output, to preserve the alignment<br  />
of tabs in the input files. See Section 5.1 [Tabs],<br  />
page 37.<br  />
<br  />
‘-T’<br  />
‘&#x2013;initial-tab’<br  />
Output a tab rather than a space before the text of a line in<br  />
normal or context format. This causes the alignment of tabs<br  />
in the line to look normal. See Section 5.1 [Tabs], page 37.<br  />
<br  />
‘&#x2013;to-file=file’<br  />
Compare each operand to file; file may be a directory.<br  />
‘-u’ Use the unified output format, showing three lines of context.<br  />
See Section 2.3.2 [Unified Format], page 16.<br  />
<br  />
‘&#x2013;unchanged-group-format=format’<br  />
Use format to output a group of common lines taken from<br  />
both files in if-then-else format. See Section 2.6.1 [Line<br  />
Group Formats], page 24.<br  />
<br  />
‘&#x2013;unchanged-line-format=format’<br  />
Use format to output a line common to both files in if-thenelse<br  />
format. See Section 2.6.2 [Line Formats], page 27.<br  />
<br  />
‘&#x2013;unidirectional-new-file’<br  />
When comparing directories, if a file appears only in the<br  />
second directory of the two, treat it as present but empty in<br  />
the other. See Chapter 4 [Comparing Directories], page 35.<br  />
<br  />
‘-U lines’<br  />
‘&#x2013;unified[=lines]’<br  />
Use the unified output format, showing lines (an integer)<br  />
lines of context, or three if lines is not given. See Section<br  />
2.3.2 [Unified Format], page 16. For proper operation,<br  />
patch typically needs at least two lines of context.<br  />
On older systems, diff supports an obsolete option ‘-lines’<br  />
that has effect when combined with ‘-u’. posix 1003.1-2001<br  />
(see Chapter 17 [Standards conformance], page 97) does not<br  />
allow this; use ‘-U lines’ instead.<br  />
<br  />
‘-v’<br  />
‘&#x2013;version’<br  />
Output version information and then exit.<br  />
<br  />
‘-w’<br  />
‘&#x2013;ignore-all-space’<br  />
Ignore white space when comparing lines. See Section 1.2<br  />
[White Space], page 6.<br  />
<br  />
‘-W columns’<br  />
‘&#x2013;width=columns’<br  />
Output at most columns (default 130) print columns per<br  />
line in side by side format. See Section 2.4.1 [Side by Side<br  />
Format], page 20.<br  />
<br  />
‘-x pattern’<br  />
‘&#x2013;exclude=pattern’<br  />
When comparing directories, ignore files and subdirectories<br  />
whose basenames match pattern. See Chapter 4 [Comparing<br  />
Directories], page 35.<br  />
<br  />
‘-X file’<br  />
‘&#x2013;exclude-from=file’<br  />
When comparing directories, ignore files and subdirectories<br  />
whose basenames match any pattern contained in file. See<br  />
Chapter 4 [Comparing Directories], page 35.<br  />
<br  />
‘-y’<br  />
‘&#x2013;side-by-side’<br  />
Use the side by side output format. See Section 2.4.1 [Side<br  />
by Side Format], page 20.<br  />
</p>
</div>
</div>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14">Chapter 15: Invoking patch</h2>
<div class="outline-text-2" id="text-14">
</div><div id="outline-container-sec-14-1" class="outline-3">
<h3 id="sec-14-1">15.1 Options to patch</h3>
<div class="outline-text-3" id="text-14-1">
<p>
Multiple single-letter options that do not take an argument can be
combined into a single command line argument with only one dash.
</p>
<p class="verse">
‘-b’<br  />
‘&#x2013;backup’ Back up the original contents of each file, even if backups<br  />
would normally not be made. See Section 10.8 [Backups],<br  />
page 60.<br  />
<br  />
‘-B prefix’<br  />
‘&#x2013;prefix=prefix’<br  />
Prepend prefix to backup file names. See Section 10.9<br  />
[Backup Names], page 60.<br  />
<br  />
‘&#x2013;backup-if-mismatch’<br  />
Back up the original contents of each file if the patch does not<br  />
exactly match the file. This is the default behavior when not<br  />
conforming to posix. See Section 10.8 [Backups], page 60.<br  />
<br  />
‘&#x2013;binary’ Read and write all files in binary mode, except for standard<br  />
output and ‘/dev/tty’. This option has no effect on posixconforming<br  />
systems like gnu/Linux. On systems where this<br  />
option makes a difference, the patch should be generated by<br  />
‘diff -a &#x2013;binary’. See Section 1.7 [Binary], page 8.<br  />
<br  />
‘-c’<br  />
‘&#x2013;context’<br  />
Interpret the patch file as a context diff. See Section 10.1<br  />
[patch Input], page 53.<br  />
<br  />
‘-d directory’<br  />
‘&#x2013;directory=directory’<br  />
Make directory directory the current directory for interpreting<br  />
both file names in the patch file, and file names given as<br  />
arguments to other options. See Section 10.7 [patch Directories],<br  />
page 59.<br  />
<br  />
‘-D name’<br  />
‘&#x2013;ifdef=name’<br  />
Make merged if-then-else output using name. See Section 2.6<br  />
[If-then-else], page 24.<br  />
<br  />
‘&#x2013;dry-run’<br  />
Print the results of applying the patches without actually<br  />
changing any files. See Section 10.3.4 [Dry Runs], page 56.<br  />
<br  />
‘-e’<br  />
‘&#x2013;ed’ Interpret the patch file as an ed script. See Section 10.1<br  />
[patch Input], page 53.<br  />
<br  />
‘-E’<br  />
‘&#x2013;remove-empty-files’<br  />
Remove output files that are empty after the patches have<br  />
been applied. See Section 10.4 [Creating and Removing],<br  />
page 57.<br  />
<br  />
‘-f’<br  />
‘&#x2013;force’ Assume that the user knows exactly what he or she is doing,<br  />
and do not ask any questions. See Section 10.11 [patch<br  />
Messages], page 61.<br  />
<br  />
‘-F lines’<br  />
‘&#x2013;fuzz=lines’<br  />
Set the maximum fuzz factor to lines. See Section 10.3.3<br  />
[Inexact], page 55.<br  />
<br  />
‘-g num’<br  />
‘&#x2013;get=num’<br  />
If num is positive, get input files from a revision control system<br  />
as necessary; if zero, do not get the files; if negative, ask<br  />
the user whether to get the files. See Section 10.2 [Revision<br  />
Control], page 54.<br  />
<br  />
‘&#x2013;help’ Output a summary of usage and then exit.<br  />
<br  />
‘-i patchfile’<br  />
‘&#x2013;input=patchfile’<br  />
Read the patch from patchfile rather than from standard<br  />
input. See Section 15.1 [patch Options], page 87.<br  />
<br  />
‘-l’<br  />
‘&#x2013;ignore-white-space’<br  />
Let any sequence of blanks (spaces or tabs) in the patch file<br  />
match any sequence of blanks in the input file. See Section<br  />
10.3.1 [Changed White Space], page 54.<br  />
<br  />
‘-n’<br  />
‘&#x2013;normal’ Interpret the patch file as a normal diff. See Section 10.1<br  />
[patch Input], page 53.<br  />
<br  />
‘-N’<br  />
‘&#x2013;forward’<br  />
Ignore patches that patch thinks are reversed or already<br  />
applied. See also ‘-R’. See Section 10.3.2 [Reversed Patches],<br  />
page 55.<br  />
<br  />
‘&#x2013;no-backup-if-mismatch’<br  />
Do not back up the original contents of files. This is the<br  />
default behavior when conforming to posix. See Section 10.8<br  />
[Backups], page 60.<br  />
<br  />
‘-o file’<br  />
‘&#x2013;output=file’<br  />
Use file as the output file name. See Section 15.1 [patch<br  />
Options], page 87.<br  />
<br  />
‘-pnumber’<br  />
‘&#x2013;strip=number’<br  />
Set the file name strip count to number. See Section 10.7<br  />
[patch Directories], page 59.<br  />
<br  />
‘&#x2013;posix’ Conform to posix, as if the POSIXLY<sub>CORRECT</sub> environment<br  />
variable had been set. See Section 10.12 [patch and POSIX],<br  />
page 63.<br  />
<br  />
‘&#x2013;quoting-style=word’<br  />
Use style word to quote names in diagnostics, as if the<br  />
QUOTING<sub>STYLE</sub> environment variable had been set to word.<br  />
See Section 10.11.3 [patch Quoting Style], page 62.<br  />
<br  />
‘-r reject-file’<br  />
‘&#x2013;reject-file=reject-file’<br  />
Use reject-file as the reject file name. See Section 10.10<br  />
[Reject Names], page 61.<br  />
<br  />
‘-R’<br  />
‘&#x2013;reverse’<br  />
Assume that this patch was created with the old and<br  />
new files swapped. See Section 10.3.2 [Reversed Patches],<br  />
page 55.<br  />
<br  />
‘-s’<br  />
‘&#x2013;quiet’<br  />
‘&#x2013;silent’ Work silently unless an error occurs. See Section 10.11 [patch<br  />
Messages], page 61.<br  />
<br  />
‘-t’<br  />
‘&#x2013;batch’ Do not ask any questions. See Section 10.11 [patch<br  />
Messages], page 61.<br  />
<br  />
‘-T’<br  />
‘&#x2013;set-time’<br  />
Set the modification and access times of patched files from<br  />
time stamps given in context diff headers, assuming that<br  />
the context diff headers use local time. See Section 10.5<br  />
[Patching Time Stamps], page 57.<br  />
<br  />
‘-u’<br  />
‘&#x2013;unified’<br  />
Interpret the patch file as a unified diff. See Section 10.1<br  />
[patch Input], page 53.<br  />
<br  />
‘-v’<br  />
‘&#x2013;version’<br  />
Output version information and then exit.<br  />
<br  />
‘-V backup-style’<br  />
‘&#x2013;version=control=backup-style’<br  />
Select the naming convention for backup file names. See<br  />
Section 10.9 [Backup Names], page 60.<br  />
<br  />
‘&#x2013;verbose’<br  />
Print more diagnostics than usual. See Section 10.11 [patch<br  />
Messages], page 61.<br  />
<br  />
‘-x number’<br  />
‘&#x2013;debug=number’<br  />
Set internal debugging flags. Of interest only to patch patchers.<br  />
<br  />
‘-Y prefix’<br  />
‘&#x2013;basename-prefix=prefix’<br  />
Prepend prefix to base names of backup files. See Section<br  />
10.9 [Backup Names], page 60.<br  />
<br  />
‘-z suffix’<br  />
‘&#x2013;suffix=suffix’<br  />
Use suffix as the backup extension instead of ‘.orig’ or ‘~’.<br  />
See Section 10.9 [Backup Names], page 60.<br  />
<br  />
‘-Z’<br  />
‘&#x2013;set-utc’<br  />
Set the modification and access times of patched files from<br  />
time stamps given in context diff headers, assuming that the<br  />
context diff headers use utc. See Section 10.5 [Patching<br  />
Time Stamps], page 57.<br  />
</p>
</div>
</div>
</div>


<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15">seldom use</h2>
<div class="outline-text-2" id="text-15">
</div><div id="outline-container-sec-15-1" class="outline-3">
<h3 id="sec-15-1">2.6.1 Line Group Formats</h3>
<div class="outline-text-3" id="text-15-1">
<p>
You should quote format, because it typically contains shell
metacharacters.
‘&#x2013;old-group-format=format’
These line groups are hunks containing only lines from the
first file. The default old group format is the same as the
changed group format if it is specified; otherwise it is a format
that outputs the line group as-is.
</p>

<p>
‘&#x2013;new-group-format=format’
These line groups are hunks containing only lines from the
second file. The default new group format is same as the
changed group format if it is specified; otherwise it is a format
that outputs the line group as-is.
</p>

<p>
‘&#x2013;changed-group-format=format’
These line groups are hunks containing lines from both files.
The default changed group format is the concatenation of
the old and new group formats.
</p>

<p>
‘&#x2013;unchanged-group-format=format’
These line groups contain lines common to both files. The
default unchanged group format is a format that outputs the
line group as-is.
</p>

<p>
In a line group format, ordinary characters represent themselves; conversion
specifications start with ‘%’ and have one of the following forms.
‘%&lt;’ stands for the lines from the first file, including the trailing
newline. Each line is formatted according to the old line
format (see Section 2.6.2 [Line Formats], page 27).
‘%&gt;’ stands for the lines from the second file, including the trailing
newline. Each line is formatted according to the new line
format.
‘%=’ stands for the lines common to both files, including the trailing
newline. Each line is formatted according to the unchanged
line format.
‘%%’ stands for ‘%’.
‘%c’C’’ where C is a single character, stands for C. C may not be a
backslash or an apostrophe. For example, ‘%c’:’’ stands for
a colon, even inside the then-part of an if-then-else format,
which a colon would normally terminate.
‘%c’\O’’ where O is a string of 1, 2, or 3 octal digits, stands for the
character with octal code O. For example, ‘%c’\0’’ stands
for a null character.
</p>

<p>
‘Fn’ where F is a printf conversion specification and n is one of
the following letters, stands for n’s value formatted with F.
‘e’ The line number of the line just before the
group in the old file.
‘f’ The line number of the first line in the group
in the old file; equals e + 1.
</p>

<p>
‘l’ The line number of the last line in the group in
the old file.
‘m’ The line number of the line just after the group
in the old file; equals l + 1.
‘n’ The number of lines in the group in the old file;
equals l - f + 1.
‘E,F,L,M,N ’
Likewise, for lines in the new file.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2015-03-05 Thu 23:20</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
