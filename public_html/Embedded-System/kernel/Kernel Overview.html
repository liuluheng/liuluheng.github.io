<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Linux Kernel Total</title>
<!-- 2015-03-05 Thu 23:20 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link href="../../assets/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../../assets/bootstrap-responsive.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../../assets/stylesheet.css" />
<script src="assets/js/bootstrap.min.js"></script>

<script type="text/javascript" src="assets/js/org-info.js">
/**
 *
 * @source: assets/js/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in assets/js/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in assets/js/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "2");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "0");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "#dddddd");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "0");
org_html_manager.set("VIEW", "showall");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Linux Kernel Total</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">General</a></li>
<li><a href="#sec-2">kernel download</a></li>
<li><a href="#sec-3">docs</a>
<ul>
<li><a href="#sec-3-1">docs</a></li>
<li><a href="#sec-3-2">wiki</a></li>
<li><a href="#sec-3-3">articles</a></li>
</ul>
</li>
<li><a href="#sec-4">ChinaUnix 内核源码版精华帖分类汇总</a></li>
<li><a href="#sec-5">水木社区  KernelTech版FAQ1.1</a></li>
<li><a href="#sec-6">Blogs</a></li>
<li><a href="#sec-7">Linux Cross Reference</a></li>
<li><a href="#sec-8">kernel blog</a></li>
<li><a href="#sec-9">The Linux Kernel API</a></li>
<li><a href="#sec-10">Embedded Linux Wiki</a></li>
<li><a href="#sec-11">free-electrons</a></li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">General</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="http://kernelnewbies.org/">http://kernelnewbies.org/</a>
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">kernel download</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>x86           <a href="http://www.kernel.org/">http://www.kernel.org/</a>
</li>
<li>ARM       <a href="http://www.arm.linux.org.uk/developer/">http://www.arm.linux.org.uk/developer/</a>
</li>
<li>PowerPC   <a href="http://penguinppc.org/">http://penguinppc.org/</a>
</li>
<li>MIPS          <a href="http://www.linux-mips.org/">http://www.linux-mips.org/</a>
</li>
<li>SuperH         <a href="http://linuxsh.sourceforge.net/">http://linuxsh.sourceforge.net/</a>
</li>
<li>M68K          <a href="http://www.linux-m68k.org/">http://www.linux-m68k.org/</a>
</li>
<li>non-MMU CPUs  <a href="http://www.uclinux.org/">http://www.uclinux.org/</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">docs</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">docs</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>The Linux documentation project
<a href="http://tldp.org/">http://tldp.org/</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">wiki</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><a href="http://www.linux-mips.org/wiki/Main_Page">http://www.linux-mips.org/wiki/Main_Page</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3">articles</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li><a href="http://www.linux.it/~rubini/docs/">http://www.linux.it/~rubini/docs/</a>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">ChinaUnix 内核源码版精华帖分类汇总</h2>
<div class="outline-text-2" id="text-4">
<p>
<a href="http://bbs.chinaunix.net/thread-1930079-1-1.html">http://bbs.chinaunix.net/thread-1930079-1-1.html</a>
</p>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">水木社区  KernelTech版FAQ1.1</h2>
<div class="outline-text-2" id="text-5">
<p class="verse">
1.资源问题<br  />
1.1 请推荐一些好的Linux内核参考书？<br  />
1.2 请推荐一些好的学习网站<br  />
1.3 本版ftp<br  />
<br  />
2. 源代码问题<br  />
2.1 如何得到某一版本的Linux内核源代码?<br  />
2.2 请问xx命令、xx库的源码是哪个文件？<br  />
2.3 linux-2.x.x.tar.gz.sign 文件有什么用途？<br  />
2.4 请推荐一些源代码查看工具？<br  />
2.5 内核patch如patch-2.6.3怎么用？<br  />
2.6 如何统计linux内核有多少行代码?<br  />
2.7 xx结构的定义在哪个内核源文件中？<br  />
2.8 <code>volatile</code> 和 <code>__volatile__</code> 是什么意思？<br  />
2.9 <code>do{ ... } while(0)</code> 是什么意思？<br  />
2.10 <code>list_entry</code> 的定义是怎么回事？<br  />
2.11 为什么有些内核变量找不到定义？<br  />
<br  />
3. 模块编程问题<br  />
3.1 模块编程需要注意什么？<br  />
3.2 为什么insmod一个模块时显示版本不匹配？<br  />
3.3 为什么出现Unresolved Symbol错误？<br  />
3.4 为什么出现no license错误？<br  />
3.5 为什么看不到用printk打印的信息？<br  />
<br  />
4. 内核开发问题<br  />
4.1 怎么制作、使用patch文件？<br  />
4.2 在内核中可以使用系统调用吗？<br  />
4.3 在内核中怎么打开并操作一个文件？<br  />
4.4 在内核中读写文件时为什么会出现EFAULT(-14)错误？<br  />
4.5 怎么在系统中增加一个自己的系统调用？<br  />
4.6 怎么在内核中加入我自己的驱动程序？<br  />
4.7 怎么通过程序得到cpu和mem使用率？<br  />
4.8 如何获得高精度的系统时间？<br  />
4.9 怎么进行系统性能调谐？<br  />
4.10 内核中怎么进行互斥？<br  />
<br  />
5. 其它问题<br  />
5.1 如何学习Linux内核？<br  />
5.2 如何下载精华区？<br  />
5.3 init进程是核心进程吗？init与初始进程是不是一回事？<br  />
5.4 initrd(.img)有什么用？<br  />
<br  />
6. 关于本FAQ<br  />
7. Changelog<br  />
</p>

<p class="verse">
1.资源问题<br  />
1.1 请推荐一些好的Linux内核参考书？<br  />
&#xa0;&#xa0;&#xa0;a.《Linux Device Drivers, 2nd Edition》，有中文译本<br  />
&#xa0;&#xa0;&#xa0;b.《Understanding the Linux Kernel, 3nd Edition》<br  />
&#xa0;&#xa0;&#xa0;c.《Linux内核源代码情景分析》，分上下两册<br  />
&#xa0;&#xa0;&#xa0;d.《边干边学－Linux内核指导》<br  />
&#xa0;&#xa0;&#xa0;e.《Linux内核2.4版源代码分析大全》<br  />
&#xa0;&#xa0;&#xa0;f.《Linux Kernel Development》<br  />
&#xa0;&#xa0;&#xa0;g.《IA-64 Linux Kernel: Design and Implementation》<br  />
&#xa0;&#xa0;&#xa0;注：a电子版可在<a href="http://www.oreilly.com/catalog/linuxdrive2/%E4%B8%8B%E8%BD%BD">http://www.oreilly.com/catalog/linuxdrive2/%E4%B8%8B%E8%BD%BD</a>；<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;f和g比较新，在国内比较难买到。<br  />
&#xa0;&#xa0;&#xa0;h./Documentation/DocBook &amp; /Documentation/kernel-docs.txt<br  />
<br  />
1.2请推荐一些好的学习网站<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1. 开源/文档/社区/信息资源<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.01 <a href="http://www.kernel.org">http://www.kernel.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux内核主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.02 <a href="http://www.gnu.org">http://www.gnu.org</a> or <a href="http://www.fsf.org">http://www.fsf.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;GNU/FSF主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.03 <a href="http://www.opensource.org">http://www.opensource.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Open Source权威网站<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.04 <a href="http://www.osdl.org">http://www.osdl.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;OSDL(Open Source Development Labs, Linus Torvalds的家)主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.05 <a href="http://www.sourceforge.net">http://www.sourceforge.net</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;大型开放源码软件网站<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.06 <a href="http://freshmeat.net/">http://freshmeat.net/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;大型开放源码软件网站<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.07 <a href="http://osdir.com">http://osdir.com</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;开放源码目录，提供许多开放源码软件的索引和链接<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.08 <a href="http://www.rpmfind.net">http://www.rpmfind.net</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;提供RPM包的搜索和链接<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.09 <a href="http://oss.sgi.com/projects/">http://oss.sgi.com/projects/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;SGI的开放源码Linux项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.10 <a href="http://oss.software.ibm.com/linux/">http://oss.software.ibm.com/linux/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;IBM的开放源码Linux项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.11 <a href="http://www-124.ibm.com/developerworks/oss/">http://www-124.ibm.com/developerworks/oss/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;IBM developerWorks的开放源码Linux项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.12 <a href="http://www.kerneltrap.org">http://www.kerneltrap.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;内核开发相关信息和论坛<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.13 <a href="http://kernelnewbies.org">http://kernelnewbies.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;很好的内核学习网站<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.14 <a href="http://www.kernelhacking.org/">http://www.kernelhacking.org/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;kernelhacking-HOWTO文档<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.15 <a href="http://www.tldp.org">http://www.tldp.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux文档<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.16 <a href="http://www.nongnu.org/lkdp/">http://www.nongnu.org/lkdp/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux内核文档<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.17 <a href="http://linux-mm.org/">http://linux-mm.org/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux内核mm文档<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.18 <a href="http://www.linuxforum.net">http://www.linuxforum.net</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;中国Linux论坛<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.19 <a href="http://www.aka.org.cn">http://www.aka.org.cn</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;中国信息技术论坛－阿卡（AKA）<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.20 <a href="http://www.lisoleg.net">http://www.lisoleg.net</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;利索脚(Linux Source Learning Group)<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.21 <a href="http://www.linuxfans.org/">http://www.linuxfans.org/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;中国Linux公社<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.22 <a href="http://www-900.ibm.com/developerWorks/cn/linux">http://www-900.ibm.com/developerWorks/cn/linux</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;IBM developerWorks Linux专区<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.23 <a href="http://www.linuxaid.com.cn">http://www.linuxaid.com.cn</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LinuxAid技术支持中心<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.24 <a href="http://lxr.linux.no/source/">http://lxr.linux.no/source/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Cross-Referencing Linux，可在线查看Linux内核源代码<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.25 <a href="http://www.linux.org">http://www.linux.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux信息资源<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.26 <a href="http://www.linuxdevices.com">http://www.linuxdevices.com</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;嵌入式Linux信息资源<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.27 <a href="http://www.linuxjournal.com/webindex.php">http://www.linuxjournal.com/webindex.php</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux Journal杂志在线文章<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.28 <a href="http://www.joyfire.net/">http://www.joyfire.net/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;本站joyfire大侠维护的站点<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.29 <a href="http://lwn.net">http://lwn.net</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux Weekly News<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1.30 <a href="http://www.ctyme.com/intr/int.htm">http://www.ctyme.com/intr/int.htm</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;关于BIOS系统调用，很全<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2. 项目资源<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.01 <a href="http://perso.wanadoo.es/xose/linux/linux_ports.html">http://perso.wanadoo.es/xose/linux/linux_ports.html</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux移植项目链接资源<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.02 <a href="http://www.uclinux.org">http://www.uclinux.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;uClinux主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.03 <a href="http://www.fsmlabs.com/">http://www.fsmlabs.com/</a> or <a href="http://www.rtlinux.org">http://www.rtlinux.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;RTLinux(Real-Time Linux)主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.04 <a href="http://mail.aero.polimi.it/~rtai/">http://mail.aero.polimi.it/~rtai/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;RTAI(Real Time Application Interface for Linux)主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.05 <a href="http://www.ittc.ku.edu/kurt/">http://www.ittc.ku.edu/kurt/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;KURT-Linux(Kansas University Real-Time Linux)主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.06 <a href="http://www.arm.linux.org.uk/">http://www.arm.linux.org.uk/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ARM Linux主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.07 <a href="http://www.linux-mips.org/">http://www.linux-mips.org/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux/MIPS主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.08 <a href="http://penguinppc.org/">http://penguinppc.org/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux/PowerPC主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.09 <a href="http://www.denx.de">http://www.denx.de</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Denx Software Engineering, PowerPC系列嵌入式Linux资源<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.10 <a href="http://www.netfilter.org/">http://www.netfilter.org/</a> or <a href="http://www.iptables.org/">http://www.iptables.org/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;netfilter/iptables项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.11 <a href="http://www.linuxfromscratch.org">http://www.linuxfromscratch.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LFS(Linux From Scratch)项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.12 <a href="http://www.uclibc.org">http://www.uclibc.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;uClibc(C library for developing embedded Linux systems)主页<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.13 <a href="http://www.LinuxVirtualServer.org">http://www.LinuxVirtualServer.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;章文嵩主持的Linux Virtual Server项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.14 <a href="http://linux-ha.org">http://linux-ha.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;High-Availability Linux项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.15 <a href="http://www.lids.org">http://www.lids.org</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;本站vertex大侠主持的LIDS(Linux Intrusion Detection System)项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.16 <a href="http://www.minigui.org/">http://www.minigui.org/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;本站Kongming大侠主持的MiniGUI项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.17 <a href="http://user-mode-linux.sourceforge.net/">http://user-mode-linux.sourceforge.net/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;User-Mode Linux项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.18 <a href="http://lse.sourceforge.net/">http://lse.sourceforge.net/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux Scalability Effort项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.19 <a href="http://linuxperf.nl.linux.org/">http://linuxperf.nl.linux.org/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux Performance Tuning项目<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.20 <a href="http://euclid.nmu.edu/~benchmark/">http://euclid.nmu.edu/~benchmark/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux Benchmark项目<br  />
1.3本版ftp<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<a href="ftp://kernel:kernel@kernel.trueice.net:8021/">ftp://kernel:kernel@kernel.trueice.net:8021/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/incoming/kerneltech.newsmth<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;目前我所能找到的内核方面的经典书籍电子版都有<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;特别感谢trueice网友提供本版ftp^_^<br  />
<br  />
2. 源代码问题<br  />
2.1 如何得到某一版本的Linux内核源代码?<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. <a href="http://www.kernel.org%E6%88%96ftp://ftp.kernel.org%EF%BC%8C%E8%BF%99%E6%98%AFLinux%E5%86%85%E6%A0%B8%E7%89%88%E6%9C%AC%E7%9A%84%E5%8F%91%E5%B8%83">http://www.kernel.org%E6%88%96ftp://ftp.kernel.org%EF%BC%8C%E8%BF%99%E6%98%AFLinux%E5%86%85%E6%A0%B8%E7%89%88%E6%9C%AC%E7%9A%84%E5%8F%91%E5%B8%83</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;网站。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 很多镜像或本地网站也提供部分Linux内核版本的下载，多用ftp搜索引擎。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. 一般的Linux发行版如Redhat之类会随盘提供相应的内核源代码，不过这个源代<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;码往往是改动过的，与标准Linux内核有差异。<br  />
<br  />
2.2 请问xx命令、xx库的源码是哪个文件？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 一个系统除了内核以外，还需要有shell、gcc等一系列工具和命令以及C库等一<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;系列库，这些作为应用程序其源代码都不在内核中，需要另外下载相应的源代码。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 对于Redhat系统，可以用rpm -qf命令来查找某一命令所在的软件包，然后再找<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;相应的源代码包安装。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. gnu.org有很多软件源代码如bash/glibc/binutils/make/gcc的源代码。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;d. 可在<a href="http://www.rpmfind.net%E6%88%96http://www.google.com%E5%8E%BB%E6%90%9C%E4%B8%80%E6%90%9C">http://www.rpmfind.net%E6%88%96http://www.google.com%E5%8E%BB%E6%90%9C%E4%B8%80%E6%90%9C</a>。<br  />
<br  />
2.3 linux-2.x.x.tar.gz.sign 文件有什么用途？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;这是一个数字签名文件，用来校验linux-2.x.x.tar.gz这个文件在签名后是没有<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;被第三方修改过,更详细的信息参考<a href="http://www.kernel.org/signature.html">http://www.kernel.org/signature.html</a>。<br  />
<br  />
2.4 请推荐一些源代码查看工具？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. Windows系统可以用Source Insight，Linux系统可以用Source Navigator。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. vim或emacs编辑器，配合cscope、ctags、etags等交叉索引工具。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. vim或emacs编辑器，配合grep、egrep等文本搜索工具，不过最好要对源代码目<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;录结构有所熟悉<br  />
&#xa0;&#xa0;&#xa0;&#xa0;d. LXR，以网页的形式通过浏览器浏览，安装复杂，可从<a href="http://lxr.linux.no/%E4%B8%8B">http://lxr.linux.no/%E4%B8%8B</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;载该工具也可以直接访问<a href="http://lxr.linux.no/source/%E5%9C%A8%E7%BA%BF%E9%98%85%E8%AF%BBLinux%E5%86%85%E6%A0%B8%E6%BA%90">http://lxr.linux.no/source/%E5%9C%A8%E7%BA%BF%E9%98%85%E8%AF%BBLinux%E5%86%85%E6%A0%B8%E6%BA%90</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;代码。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;e. GNU global,可以在命令行用，也可以生成hypertext，类似lxr，但更省事。<br  />
<br  />
2.5 内核patch如patch-2.6.3怎么用？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 内核patch一般是针对前一个版本，如patch-2.6.3是针对2.6.2的内核。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 内核patch一般是和ChangeLog对应，如patch-2.6.3对应于ChangeLog-2.6.3。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. 在内核patch中查找Makefile关键字可得到相关信息，如在patch-2.6.0中有：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;diff -Nru a/Makefile b/Makefile<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#x2014; a/Makefile  Wed Dec 17 19:00:07 2003<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<del>+</del> b/Makefile  Wed Dec 17 19:00:07 2003<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;@@ -1,7 +1,7 @@<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;VERSION = 2<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;PATCHLEVEL = 6<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;SUBLEVEL = 0<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;-EXTRAVERSION = -test11<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;+EXTRAVERSION =<br  />
&#xa0;&#xa0;&#xa0;&#xa0;d. 找到了针对的内核就可以用patch来升级内核了。<br  />
<br  />
2.6 如何统计linux内核有多少行代码?<br  />
&#xa0;&#xa0;&#xa0;&#xa0;尝试以下shell命令：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;find /usr/src/linux-2.x.x  -name "*.[chS]" | xargs cat | wc -l<br  />
<br  />
2.7 xx结构的定义在哪个内核源文件中？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 请使用源码查看工具，见问题2.4。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 如果用grep等文本搜索工具，主要在include/linux和include/asm两个目录下<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;搜索。<br  />
<br  />
2.8 volatile和_<sub>volatile</sub>_<sub>是什么意思？</sub><br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. volatile是C语言定义的关键字，gcc为了需要又定义了_<sub>volatile</sub>_<sub>，它和</sub><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;volatile表达的是同一意思。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. volatile的本意是"易变的"，由于访问寄存器的速度快于访存，所以编译器一般<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;都会作优化以减少访存。如果变量加上volatile修饰，则编译器就不会对此变量<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;的读写操作进行优化，即不通过寄存器缓冲而直接访存。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. <span class="underline"><span class="underline">asm</span></span> _<sub>volatile</sub>_<sub>一起指示编译器不要改动优化后面的汇编语句。</sub><br  />
&#xa0;&#xa0;&#xa0;&#xa0;d.一般说来，volatile用在如下的几个地方：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;i)中断服务程序中修改的供其它程序检测的变量需要加volatile；<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ii)多任务环境下各任务间共享的标志应该加volatile；<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;iii)存储器映射的硬件寄存器通常也要加volatile说明，因为每次对它的读写都可能由不同意义；<br  />
<br  />
2.9 do{ &#x2026; } while(0)是什么意思？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 主要是为了避免宏在不同情况展开可能会出现的一些错误。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 在<a href="http://www.kernelnewbies.org/faq/%E4%B8%8A%E6%9C%89%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D">http://www.kernelnewbies.org/faq/%E4%B8%8A%E6%9C%89%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D</a>。<br  />
<br  />
2.10 list<sub>entry的定义是怎么回事？</sub><br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. list<sub>entry的定义在内核源文件include</sub>/linux/list.h中：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;#define list<sub>entry</sub>(ptr, type, member) \<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;((type *)((char *)(ptr)-(unsigned long)(&amp;((type *)0)-&gt;member)))<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 其功能是根据list<sub>head型指针ptr换算成其宿主结构的起始地址，该宿主结构是</sub><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;type型的，而ptr在其宿主结构中定义为member成员。如下图：<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;req&#x2013;&gt;|type型对象起始地址<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;|<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;|&#x2026; &#x2026;<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ptr&#x2013;&gt;|ptr指针所指的member成员地址<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;|<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;|&#x2026; &#x2026;<br  />
<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ptr指向图中所示的位置，通过 <code>(unsigned long)(&amp;((type*)0)-&gt;member)</code> 得到ptr<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;和req之间的差值，ptr减去这个差值就得到了type型宿主结构的指针req，返回<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;类型为 <code>(type*)</code> 。<br  />
<br  />
2.11 为什么有些内核变量找不到定义？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 与section的起始地址和结束地址相关的变量（准确地说是常量）一般定义在arch/XXX/kernel/vmlinux.lds.S链接脚本里，<br  />
&#xa0;&#xa0;&#xa0;&#xa0;如 <code>__initramfs_start</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 一些变量和函数用宏封装过，原始的定义查找比较困难，如 <code>inb_p()</code> 等等。<br  />
<br  />
3. 模块编程问题<br  />
3.1 模块编程需要注意什么？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. Documentation/kbuild/目录下提供内核模块编程的核心资料<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 如果要用inline功能，需要在gcc编译选项中增加-O2<br  />
<br  />
3.2 为什么insmod一个模块时显示版本不匹配？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 某些时候用insmod -f能够成功加载，但需谨慎使用。<br  />
<br  />
3.3 为什么出现Unresolved Symbol错误？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 首先查看文件/proc/ksyms，看内核有没有输出这个符号，不同的内核版本如<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2.2和2.4输出的符号会有些变化。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 如果内核输出的符号带有版本控制信息如符号printk<sub>R12345678，则性质同</sub><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;问题3.2。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. 注意：现在有很多版本都不输出 <code>sys_call_table</code> 了，另想办法吧！<br  />
<br  />
3.4 为什么出现no license错误？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;在源文件加入下面一行（加在文件头部，尾部均可）：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;MODULE<sub>LICENSE</sub>("GPL");或者 MODULE<sub>LICENSE</sub>("Dual BSD/GPL");<br  />
&#xa0;&#xa0;&#xa0;&#xa0;试模块license而定。<br  />
<br  />
3.5 为什么看不到用printk打印的信息？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 打印消息受级别的限制,消息级别可以通过printk设置,如:<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>printk("&lt;n&gt;something");  /* 其中0&lt;=n&lt;=7 */</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;假设控制台的消息级别为m, 当n&lt;m时消息打印到控制台,否则不打印。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;这样一方面可以提高要打印消息本身的级别（数字越小级别越高），<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;另一方面可以改变控制台的消息级别(可从1到8),如改为8可用以下命令:<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code># echo "8" &gt; /proc/sys/kernel/printk</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 用dmesg命令看。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. 当系统运行klogd和syslogd时，内核消息就会由klogd分发到syslogd，<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;syslogd会根据配置文件/etc/syslog.conf作相应处理，具体可以查看syslogd<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;和syslog.conf的man页。<br  />
<br  />
<br  />
4. 内核开发问题<br  />
4.1 怎么制作、使用patch文件？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. patch文件是由diff命令生成的,使用patch文件用patch命令，具体可查看diff<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;和patch的man页和info。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. diff命令的常用选项组合是urN，如：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>diff -urN linux/ my_linux/ &gt;mypatch.diff</code><br  />
<br  />
4.2 在内核中可以使用系统调用吗？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 可以。内核源代码中就有使用系统调用的例子，如open()、execve()等。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 在内核中使用系统调用必须要在源文件中包括以下两行：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>#define __KERNEL_SYSCALLS__</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>#include &lt;linux/unistd.h&gt;</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. 内核中使用系统调用的相关定义可查看文件include/asm/unistd.h。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;如果要用的系统调用该文件中没有定义，可以按照其格式自行添加。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;d. 如果要在模块中使用系统调用，必须要自己定义errno如：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>int errno;</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;内核在lib/errno.c中定义了errno，但该符号不导出，所以模块编程时需要自己<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;定义errno，用以存放系统调用出错号。<br  />
<br  />
4.3 在内核中怎么打开并操作一个文件？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 直接用open()、read()等系统调用，见问题4.2。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 用 <code>filp_open()</code> 函数打开文件，得到 <code>struct file *</code> 的指针fp。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;使用指针fp进行相应操作，如读文件可以用 <code>fp-&gt;f_ops-&gt;read</code> 。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;最后用 <code>filp_close()</code> 函数关闭文件。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>filp_open()、filp_close()</code> 函数在 <code>fs/open.c</code> 定义，在 <code>include/linux/fs.h</code> 中<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;声明。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. 自己写包装函数，可参照文件fs/exec.c中的 <code>open_exec()</code> 和 <code>kernel_read()</code> 函数。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;在<a href="http://www.linuxforum.net/forum/showflat.php?Cat=&Board=linuxK&Number=363455&page=&view=&sb=&o=&vc=1%E4%B8%8A%E6%9C%89%E4%BA%9B%E4%BB%A3%E7%A0%81%E5%8F%AF%E4%BB%A5%E5%8F%82%E7%85%A7">http://www.linuxforum.net/forum/showflat.php?Cat=&Board=linuxK&Number=363455&page=&view=&sb=&o=&vc=1%E4%B8%8A%E6%9C%89%E4%BA%9B%E4%BB%A3%E7%A0%81%E5%8F%AF%E4%BB%A5%E5%8F%82%E7%85%A7</a>。<br  />
<br  />
4.4 在内核中读写文件时为什么会出现 <code>EFAULT(-14)</code> 错误？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 内核文件系统提供的read()和write()之类的函数，期望是对用户态程序服务的，<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;所以它会验证读写缓冲区不超过用户空间的上限即0xC000 0000。但现在内核中<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;要读写文件，缓冲区在内核中即地址会超过0xC000 0000。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 在读写文件前先得到当前fs： <code>mm_segment_t old_fs=get_fs()</code> ;<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;并设置当前fs为内核fs： <code>set_fs(KERNEL_DS)</code> ;<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;在读写文件后再恢复原先fs: <code>set_fs(old_fs)</code> ;<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>set_fs()</code> 、 <code>get_fs()</code> 等相关宏在文件include/asm/uaccess.h中定义。<br  />
<br  />
4.5 怎么在系统中增加一个自己的系统调用？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;去<a href="http://www.linuxaid.com.cn/engineer/ideal/kernel/new_syscall.htm">http://www.linuxaid.com.cn/engineer/ideal/kernel/new_syscall.htm</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;和<a href="http://www.xenotime.net/linux/syscall_ex/%E7%9C%8B%E7%9C%8B">http://www.xenotime.net/linux/syscall_ex/%E7%9C%8B%E7%9C%8B</a>。<br  />
<br  />
4.6 怎么在内核中加入自己的驱动程序？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 去<a href="http://www-900.ibm.com/developerWorks/cn/linux/kernel/l-kerconf/">http://www-900.ibm.com/developerWorks/cn/linux/kernel/l-kerconf/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;index.shtml看看，了解一下整个内核的配置编译系统。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 在相应位置建立自己的源码目录、文件、Makefile等。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. 修改上层Makefile，把自己的程序加入到内核编译系统中。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;d. 修改上层Config.in，把自己的程序加入到内核配置系统中。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;e. 确保自己的初始化函数被调用。有两种方法，一是显式调用，即在原来的系统<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;初始化函数中直接加入对自己的调用，如字符设备就在drivers/char/mem.c中的<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>chr_dev_init()</code> 函数中加入，块设备就在drivers/block/ll<sub>rw</sub><sub>blk</sub>.c中的<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>blk_dev_init()</code> 函数中加入。另一种方法是用initcall，用宏 <code>module_init</code> 来申<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;明你的初始化函数，操作系统在初始化到一定阶段后会自动通过init/main.c中<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;的 <code>do_initcalls()</code> 函数来统一调用这些初始化函数。 <code>module_init</code> 宏在文件<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>include/linux/init.h</code> 中定义。<br  />
<br  />
4.7 怎么通过程序得到cpu和mem使用率？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 这些信息的最终来源都是/proc目录下的文件，如/proc/stat等。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. procps包下的命令如top、vmstat等实现了这些功能，可以参照其源代码。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. procps包可从Redhat发行版中得到，也可从<a href="http://www.surriel.com/procps/">http://www.surriel.com/procps/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;处获得。<br  />
<br  />
4.8 如何获得高精度的系统时间？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. Linux中jiffy是时钟的基本单位，对于一般的系统来说配置成10ms。大多数时<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;钟相关的系统调用都是基于jiffy，所以精度不会太高。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 可以考虑使用TSC(time stamp counter)、rtc(real time clock)等寄存器来获得<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;高精度时钟，具体可查看相关的硬件手册。<br  />
<br  />
4.9 怎么进行系统性能调谐？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. IBM developworks:<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<a href="http://www-900.ibm.com/developerWorks/cn/linux/l-kperf/index.shtml">http://www-900.ibm.com/developerWorks/cn/linux/l-kperf/index.shtml</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<a href="http://www-900.ibm.com/developerWorks/cn/linux/management/tune/index.shtml">http://www-900.ibm.com/developerWorks/cn/linux/management/tune/index.shtml</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. Linux Performance Tuning项目:<a href="http://linuxperf.nl.linux.org/">http://linuxperf.nl.linux.org/</a><br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. <a href="http://www.fixdown.com/article/article/724.htm">http://www.fixdown.com/article/article/724.htm</a><br  />
<br  />
4.10 内核中怎么进行互斥？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;a. Linux内核中有两种机制实现互斥：semaphore和spinlock。semaphore是让进<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;程睡眠等待资源，这一般假设无法预测资源什么时候可以获得; <code>spin_lock</code> 一般<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;用在SMP中，它假设所等待的资源马上就会被释放，所以循环等待资源。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;semaphore只能用于非中断环境（典型的中断环境过程包括象timer之类的中断<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;服务程序,softirq等）的进程间互斥,spinlock可以用于所有的进程间包括不同<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;cpu的进程间的互斥,spinlock主要用于保护短小的临界区,使用时必须要特别注<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;意死锁问题。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;b. semaphore是通过进程调度来实现互斥的。进程请求获取semaphore时,如果<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;semaphore空闲则该进程获得semaphore，设置标志并返回；如果semaphore忙<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;(其它用户已经获得semaphore)则系统构建等待队列并通过进程调度机制让本进<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;程睡眠。进程释放semaphore时,系统按一定规则通过等待队列唤醒一个睡眠进<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;程。对semaphore可执行up()和down()操作，详见include/asm/semaphore.h文件。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;c. spinlock主要是为SMP互斥而引入的。在请求获取spinlock时,如果空闲则获得<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;spinlock,设置标志并返回。如果spinlock已经被其它用户获得而处于忙状态,<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;系统就会一直占用CPU资源，不停查询spinlock的状态直到获得spinlock。<br  />
<br  />
<br  />
5. 其它问题<br  />
5.1 如何学习Linux内核？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;请先阅读本版精华区内核学习目录的相关文章。<br  />
<br  />
5.2 如何下载精华区？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. 下载本站精华区详见BBShelp版置底文章“用户常见问题”。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 在本站精华区ftp上找KernelTech.html.tgz(或类似文件名)文件。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. 2004-4月份的精华区下载<br  />
&#xa0;&#xa0;&#xa0;<a href="ftp://youngcow.net/Special/smth%C2%BE%C2%AB%C2%BB%C2%AA%C3%87%C3%B8/2004-04-09CHM/KernelTech.chm">ftp://youngcow.net/Special/smth%C2%BE%C2%AB%C2%BB%C2%AA%C3%87%C3%B8/2004-04-09CHM/KernelTech.chm</a><br  />
5.3 init进程是核心进程吗？init与初始进程是不是一回事？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Linux操作系统在系统初始化之初就捏造了一个原始进程（原始进程在系统初始化<br  />
&#xa0;&#xa0;&#xa0;&#xa0;完毕后就演化成idle进程），当系统初始化进行到一定阶段，原始进程会创建(通<br  />
&#xa0;&#xa0;&#xa0;&#xa0;过 <code>kernel_thread()</code> 函数)出来init进程，init进程继续进行系统初始化工作并在最<br  />
&#xa0;&#xa0;&#xa0;&#xa0;后执行execve("/sbin/init",&#x2026;)，这样init就从原来的核心进程摇身一变成用户<br  />
&#xa0;&#xa0;&#xa0;&#xa0;进程（用户程序/sbin/init）了。init进程的pid为1，原始进程（idle进程）的<br  />
&#xa0;&#xa0;&#xa0;&#xa0;pid为0。所有其它的进程都由init进程派生，用ps或pstree命令可以看到这一点。<br  />
<br  />
5.4 initrd(.img)有什么用？<br  />
&#xa0;&#xa0;&#xa0;&#xa0;a. initrd(.img)是一个文件系统映像，里面一般包含一些特殊的硬件模块尤其是存<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;储设备如scsi/raid/ext3模块，以便在保持内核足够小的同时又支持尽可能多的硬<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;件设备，常被安装程序使用。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;initrd(.img)也不是必需的，只要必要的模块编译进内核就可以不用initrd(.img)。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;b. 在使用了initrd(.img)时，系统引导的大致过程如下：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;1)Loader程序(如lilo和grub)加载内核和initrd(.img)<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;2)内核解压缩initrd(.img)为正常的RAM盘文件系统并挂接为根分区<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;3)执行linuxrc，在此过程中会加载硬件模块<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;4)在linuxrc终止后，真正的根文件系统被挂接<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;5)在根文件系统上完成正常的引导过程。对于正常的系统而言，执行/sbin/init，<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;这时控制就会转到正常的大家所熟知的启动过程。而对于安装程序，只需将控制<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;转到安装过程的第一阶段，由它完成后续的安装环境的加载，设备的进一步初始<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;化等操作。<br  />
&#xa0;&#xa0;&#xa0;&#xa0;c. 要使用initrd(.img)首先内核必须配置成支持initrd：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>CONFIG_BLK_DEV_RAM=y</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>CONFIG_BLK_DEV_INITRD=y</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;其次要在Loader脚本中增加相应指示。如在grub.conf中增加一行：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>initrd /boot/initrd-2.4.20.img</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;d. 可用mkinitrd命令创建initrd(.img)文件：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>mkinitrd  imagefilename  kernelversion</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;如对于2.4.20的内核可以：<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<code>mkinitrd /boot/initrd-2.4.20.img 2.4.20</code><br  />
&#xa0;&#xa0;&#xa0;&#xa0;e. 具体可查看Documentation/initrd.txt和man mkiinitrd。mkinitrd命令执行的详<br  />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;细过程可以直接查看/sbin/mkinitrd(shell脚本)文件。<br  />
</p>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Blogs</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li><a href="http://free-electrons.com/">http://free-electrons.com/</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">Linux Cross Reference</h2>
<div class="outline-text-2" id="text-7">
<p>
<a href="http://lxr.free-electrons.com/source/?v=2.6.29">http://lxr.free-electrons.com/source/?v=2.6.29</a>
</p>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">kernel blog</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li><a href="http://blog.csdn.net/gdt_a20/article/details/7219024">http://blog.csdn.net/gdt_a20/article/details/7219024</a>
</li>
<li><a href="http://blog.csdn.net/droidphone/article/details/7497787">http://blog.csdn.net/droidphone/article/details/7497787</a>
</li>
<li><a href="http://blog.csdn.net/fudan_abc/article/details/1751565">http://blog.csdn.net/fudan_abc/article/details/1751565</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">The Linux Kernel API</h2>
<div class="outline-text-2" id="text-9">
<ul class="org-ul">
<li><a href="http://gnugeneration.com/books/linux/2.6.20/kernel-api/index.html">http://gnugeneration.com/books/linux/2.6.20/kernel-api/index.html</a>
</li>
<li><a href="http://gnugeneration.com/">http://gnugeneration.com/</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10">Embedded Linux Wiki</h2>
<div class="outline-text-2" id="text-10">
<p>
<a href="http://elinux.org/Main_Page">http://elinux.org/Main_Page</a>
</p>
</div>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11">free-electrons</h2>
<div class="outline-text-2" id="text-11">
<p>
<a href="http://free-electrons.com/docs/">http://free-electrons.com/docs/</a>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2015-03-05 Thu 23:20</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
