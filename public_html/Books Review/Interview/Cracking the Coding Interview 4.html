<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Cracking the Coding Interview4 Notes</title>
<!-- 2015-03-05 Thu 23:21 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link href="../../assets/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../../assets/bootstrap-responsive.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../../assets/stylesheet.css" />
<script src="assets/js/bootstrap.min.js"></script>

<script type="text/javascript" src="assets/js/org-info.js">
/**
 *
 * @source: assets/js/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in assets/js/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in assets/js/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "2");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "0");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "#dddddd");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "0");
org_html_manager.set("VIEW", "showall");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Cracking the Coding Interview4 Notes</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Site</a></li>
<li><a href="#sec-2">Before the Interview</a>
<ul>
<li><a href="#sec-2-1">What questions should you ask the interviewer?</a></li>
</ul>
</li>
<li><a href="#sec-3">The Interview and Beyond</a>
<ul>
<li><a href="#sec-3-1">Five Steps to a Technical Questions</a></li>
<li><a href="#sec-3-2">Step 1: Ask Questions</a></li>
<li><a href="#sec-3-3">Step 2: Design an Algorithm</a></li>
<li><a href="#sec-3-4">Step 3: Pseudo-Code</a></li>
<li><a href="#sec-3-5">Step 4: Code</a></li>
<li><a href="#sec-3-6">Step 5: Test</a></li>
<li><a href="#sec-3-7">Five Algorithm Approaches</a></li>
</ul>
</li>
<li><a href="#sec-4">Questions</a>
<ul>
<li><a href="#sec-4-1">Chapter 7</a></li>
<li><a href="#sec-4-2">Chapter 8</a></li>
<li><a href="#sec-4-3">Chapter 11</a></li>
<li><a href="#sec-4-4">Chapter 13</a></li>
<li><a href="#sec-4-5">Chapter 14</a></li>
<li><a href="#sec-4-6">Chapter 16</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Site</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li><a href="http://www.careercup.com/">http://www.careercup.com/</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Before the Interview</h2>
<div class="outline-text-2" id="text-2">
<p>
Resume screeners look for the same things that interviewers do:
»»Are you smart?
»»Can you code?
</p>

<p>
Writing Strong Bullets: For each role, try to discuss your accomplishments with the following approach: “Accomplished X by implementing Y which led to Z.” Here’s an example:
</p>

<p>
»»“Reduced object rendering time by 75% by applying Floyd’s algorithm, leading to a 10% reduction in system boot time.”
Here’s another example with an alternate wording:
</p>

<p>
»»“Increased average match accuracy from 1.2 to 1.5 by implementing a
new comparison algorithm based on windiff.”
</p>

<p>
Languages: Knowing which languages to list on your resume is always a tricky thing. Do you list everything you’ve ever worked with? Or only the ones that you’re more comfortable with (even though that might only be one or two languages)? I recommend the following compromise: list most languages you’ve used, but add your experience level. This approach is shown below:
</p>

<p>
»»“Languages: Java (expert), C++ (proficient), JavaScript (prior
experience), C (prior experience)”
</p>
</div>



<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">What questions should you ask the interviewer?</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Most interviewers will give you a chance to ask them questions. The quality of your questions will be a factor, whether subconsciously or consciously, in their decisions.
Some questions may come to you during the interview, but you can - and should - prepare questions in advance. Doing research on the company or team may help you with preparing questions.
Questions can be divided into three different categories:
</p>

<p>
Genuine Questions: These are the questions you actually want to know. Here are a few ideas of questions that are valuable to many candidates:
</p>

<ol class="org-ol">
<li>“How much of your day do you spend coding?”
</li>
<li>“How many meetings do you have every week?”
</li>
<li>“What is the ratio of testers to developers to product managers? What is the interaction like? How does project planning happen on the team?”
</li>
</ol>

<p>
Insightful Questions: These questions are designed to demonstrate your deep knowledge of programming or technologies.
</p>
<ol class="org-ol">
<li>“I noticed that you use technology X. How do you handle problem Y?”
</li>
<li>“Why did the product choose to use the X protocol over the Y protocol? I know it has benefits like A, B, C, but many companies choose not to use it because of issue D.”
</li>
</ol>

<p>
Passion Questions: These questions are designed to demonstrate your passion for technology.
</p>
<ol class="org-ol">
<li>“I’m very interested in scalability. Did you come in with a background in this, or what opportunities are there to learn about it?”
</li>
<li>“I’m not familiar with technology X, but it sounds like a very interesting solution. Could you tell me a bit more about how it works?”
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">The Interview and Beyond</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">Five Steps to a Technical Questions</h3>
<div class="outline-text-3" id="text-3-1">
<p>
A technical interview question can be solved utilizing a five step approach:
</p>
<ol class="org-ol">
<li>Ask your interviewer questions to resolve ambiguity.
</li>
<li>Design an Algorithm
</li>
<li>Write pseudo-code first, but make sure to tell your interviewer that you’re writing pseudo-code! Otherwise, he/she may think that you’re never planning to write “real” code, and many interviewers will hold that against you.
</li>
<li>Write your code, not too slow and not too fast.
</li>
<li>Test your code and carefully fix any mistakes.
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">Step 1: Ask Questions</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Good questions might be things like: What are the data types? How much data is there? What assumptions do you need to solve the problem? Who is the user?
Example: “Design an algorithm to sort a list.”»»Question: What sort of list? An array? A linked list?
»»Answer: An array.
»»Question: What does the array hold? Numbers? Characters? Strings?
»»Answer: Numbers.
»Question: And are the numbers integers?
»»Answer: Yes.
»»Question: Where did the numbers come from? Are they IDs? Values of something?
»»Answer: They are the ages of customers.
»»Question: And how many customers are there?
»»Answer: About a million.
We now have a pretty different problem: sort an array containing a
million integers between 0 and 130. How do we solve this? Just create
an array with 130 elements and count the number of ages at each value.
</p>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3">Step 2: Design an Algorithm</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Designing an algorithm can be tough, but our five approaches to algorithms can help you out (see pg 34). While you’re designing your algorithm, don’t forget to think about:
»»What are the space and time complexities?
»»What happens if there is a lot of data?
»»Does your design cause other issues? (i.e., if you’re creating a modified version of a binary search tree, did your design impact the time for insert / find / delete?)
»»If there are other issues, did you make the right trade-offs?
»»If they gave you specific data (e.g., mentioned that the data is
ages, or in sorted order), have you leveraged that information?
There’s probably a reason that you’re given it.
</p>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4">Step 3: Pseudo-Code</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Writing pseudo-code first can help you outline your thoughts clearly
and reduce the number of mistakes you commit. But, make sure to tell
your interviewer that you’re writing pseudo-code first and that you’ll
follow it up with “real” code. Many candidates will write pseudo-code
in order to ‘escape’ writing real code, and you certainly don’t want
to be confused with those candidates.
</p>
</div>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5">Step 4: Code</h3>
<div class="outline-text-3" id="text-3-5">
<p>
You don’t need to rush through your code; in fact, this will most likely hurt you. Just go at a nice, slow methodical pace. Also, remember this advice:
»»Use Data Structures Generously: Where relevant, use a good data
structure or define your own. For example, if you’re asked a problem
involving finding the minimum age for a group of people, consider
defining a data structure to represent a Person. This shows your interviewer that you care about good object oriented design.
</p>

<p>
»»Don’t Crowd Your Coding: This is a minor thing, but it can really
help. When you’re writing code on a whiteboard, start in the upper
left hand corner – not in the middle. This will give you plenty of
space to write your answer.
</p>
</div>
</div>

<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6">Step 5: Test</h3>
<div class="outline-text-3" id="text-3-6">
<p>
Yes, you need to test your code! Consider testing for:
»»Extreme cases: 0, negative, null, maximums, etc
»»User error: What happens if the user passes in null or a negative value?
»»General cases: Test the normal case.
If the algorithm is complicated or highly numerical (bit shifting, arithmetic, etc), consider testing while you’re writing the code rather than just at the end.
Also, when you find mistakes (which you will), carefully think through
why the bug is occuring. One of the worst things I saw while
interviewing was candidates who recognized a mistake and tried making
“random” changes to fix the error.
</p>
</div>
</div>








<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7">Five Algorithm Approaches</h3>
<div class="outline-text-3" id="text-3-7">
</div><ul class="org-ul"><li><a id="sec-3-7-1" name="sec-3-7-1"></a>APPROACH I: EXAMPLIFY<br  /><div class="outline-text-4" id="text-3-7-1">
<p>
Description: Write out specific examples of the problem, and see if
you can figure out a general rule.
</p>
</div>
</li>
<li><a id="sec-3-7-2" name="sec-3-7-2"></a>APPROACH II: PATTERN MATCHING<br  /><div class="outline-text-4" id="text-3-7-2">
<p>
Description: Consider what problems the algorithm is similar to, and
figure out if you can modify the solution to develop an algorithm for
this problem.
</p>
</div>
</li>
<li><a id="sec-3-7-3" name="sec-3-7-3"></a>APPROACH III: SIMPLIFY &amp; GENERALIZE<br  /><div class="outline-text-4" id="text-3-7-3">
<p>
Description: Change a constraint (data type, size, etc) to simplify
the problem. Then try to solve it. Once you have an algorithm for the
“simplified” problem, generalize the problem again.
</p>
</div>
</li>
<li><a id="sec-3-7-4" name="sec-3-7-4"></a>APPROACH IV: BASE CASE AND BUILD<br  /><div class="outline-text-4" id="text-3-7-4">
<p>
Description: Solve the algorithm first for a base case (e.g., just one
element). Then, try to solve it for elements one and two, assuming
that you have the answer for element one. Then, try to solve it for
elements one, two and three, assuming that you have the answer to
elements one and two.
</p>
</div>
</li>
<li><a id="sec-3-7-5" name="sec-3-7-5"></a>APPROACH V: DATA STRUCTURE BRAINSTORM<br  /><div class="outline-text-4" id="text-3-7-5">
<p>
Description: This is hacky, but it often works. Simply run through a list of data structures and try to apply each one.
Example: Numbers are randomly generated and stored into an (expanding) array. How would you keep track of the median?
Data Structure Brainstorm:
»»Linked list? Probably not – linked lists tend not to do very well with accessing and sorting numbers.
»»Array? Maybe, but you already have an array. Could you somehow keep the elements sorted? That’s probably expensive. Let’s hold off on this and return to it if it’s needed.
»»Binary tree? This is possible, since binary trees do fairly well with ordering. In fact, if the binary search tree is perfectly balanced, the top might be the median. But, be careful – if there’s an even number of elements, the median is actually the average of the middle two elements. The middle two elements can’t both be at the top. This is probably a workable algorithm, but let’s come back to it.
»»Heap? A heap is really good at basic ordering and keeping track of max and mins. This is actually interesting – if you had two heaps, you could keep track of the biggest half and the smallest half of the elements. The biggest half is kept in a min heap, such that the smallest element in the biggest half is at the root. The smallest half is kept in a max heap, such that the biggest element of the smallest half is at the root. Now, with these data structures, you have the potential median elements at the roots. If the heaps are no longer the same size, you can quickly “rebalance” the heaps by popping an element off the one heap and pushing it onto the other.
Note that the more problems you do, the better instinct you will
develop about which data structure to apply.
</p>
</div>
</li></ul>
</div>
</div>


<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Questions</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">Chapter 7</h3>
<div class="outline-text-3" id="text-4-1">
</div><ul class="org-ul"><li><a id="sec-4-1-1" name="sec-4-1-1"></a>7.9<br  /><div class="outline-text-4" id="text-4-1-1">
<p>
data block allocation -&gt; “Practical File System Design” or B+ trees
</p>
</div>
</li></ul>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2">Chapter 8</h3>
<div class="outline-text-3" id="text-4-2">
</div><ul class="org-ul"><li><a id="sec-4-2-1" name="sec-4-2-1"></a>8.1 Fibonacci number<br  /><div class="outline-text-4" id="text-4-2-1">
<p>
you may read about the (most efficient) matrix-based algorithm at <a href="http://en.wikipedia.org/wiki/Fibonacci_number#Matrix_form">http://en.wikipedia.org/wiki/Fibonacci_number#Matrix_form</a>
</p>
</div>
</li></ul>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3">Chapter 11</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Elevator algorithms could elimate random bouncing from track to track.
</p>
</div>
</div>



<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4">Chapter 13</h3>
<div class="outline-text-3" id="text-4-4">
</div><ul class="org-ul"><li><a id="sec-4-4-1" name="sec-4-4-1"></a>13.5 What is the significance of the keyword “volatile” in C?<br  /><div class="outline-text-4" id="text-4-4-1">
<p>
SOLUTION
Volatile informs the compiler that the value of the variable can
change from the outside, without any update done by the code.
Declaring a simple volatile variable:
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #00ffff;">volatile</span> <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">x</span>;
<span style="color: #98fb98;">int</span> <span style="color: #00ffff;">volatile</span> <span style="color: #eedd82;">x</span>;
</pre>
</div>
<p>
Declaring a pointer variable for a volatile memory (only the pointer
address is volatile):
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #00ffff;">volatile</span> <span style="color: #98fb98;">int</span> * <span style="color: #eedd82;">x</span>;
<span style="color: #98fb98;">int</span> <span style="color: #00ffff;">volatile</span> * <span style="color: #eedd82;">x</span>;
</pre>
</div>
<p>
Declaring a volatile pointer variable for a non-volatile memory (only
memory contained is volatile):
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">int</span> * <span style="color: #00ffff;">volatile</span> <span style="color: #eedd82;">x</span>;
</pre>
</div>
<p>
Declaring a volatile variable pointer for a volatile memory (both
pointer address and memory contained are volatile):
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #00ffff;">volatile</span> <span style="color: #98fb98;">int</span> * <span style="color: #00ffff;">volatile</span> <span style="color: #eedd82;">x</span>;
<span style="color: #98fb98;">int</span> <span style="color: #00ffff;">volatile</span> * <span style="color: #00ffff;">volatile</span> <span style="color: #eedd82;">x</span>;
</pre>
</div>
<p>
Volatile variables are not optimized, but this can actually be useful.
Imagine this function:
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">int</span> <span style="color: #eedd82;">opt</span> = 1;
<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">Fn</span>(<span style="color: #98fb98;">void</span>) {

<span style="color: #7fffd4;">start</span>:

<span style="color: #00ffff;">if</span> (opt == 1) <span style="color: #00ffff;">goto</span> <span style="color: #7fffd4;">start</span>;

<span style="color: #00ffff;">else</span> <span style="color: #00ffff;">break</span>;
}
</pre>
</div>
<p>
At first glance, our code appears to loop infinitely. The compiler
will try to optimize it to:
</p>
<div class="org-src-container">

<pre class="src src-c"><span style="color: #98fb98;">void</span> <span style="color: #87cefa;">Fn</span>(<span style="color: #98fb98;">void</span>) {

<span style="color: #7fffd4;">start</span>:

<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">opt</span> = 1;

<span style="color: #00ffff;">if</span> (<span style="color: #7fffd4;">true</span>)

<span style="color: #00ffff;">goto</span> <span style="color: #7fffd4;">start</span>;
}
</pre>
</div>
<p>
This becomes an infinite loop. However, an external program might
write ‘0’ to the location of variable opt. Volatile variables are also
useful when multi-threaded programs have global variables and any
thread can modify these shared variables. Of course, we don’t want
optimization on them.
</p>
</div>
</li></ul>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5">Chapter 14</h3>
<div class="outline-text-3" id="text-4-5">
</div><ul class="org-ul"><li><a id="sec-4-5-1" name="sec-4-5-1"></a>14.4 Explain the difference between templates in C++ and generics in Java.<br  /><div class="outline-text-4" id="text-4-5-1">
<p>
From <a href="http://en.wikipedia.org/wiki/Comparison_of_Java_and_C++#Templates_vs._Generics">http://en.wikipedia.org/wiki/Comparison_of_Java_and_C++#Templates_vs._Generics</a>
</p>
</div>
</li></ul>
</div>


<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6">Chapter 16</h3>
<div class="outline-text-3" id="text-4-6">
</div><ul class="org-ul"><li><a id="sec-4-6-1" name="sec-4-6-1"></a>16.1 Explain the following terms: virtual memory, page fault, thrashing.<br  /><div class="outline-text-4" id="text-4-6-1">
<p>
SOLUTION
</p>

<p>
Virtual memory is a computer system technique which gives an application program the im-
pression that it has contiguous working memory (an address space), while in fact it may be
physically fragmented and may even overflow on to disk storage. Systems that use this tech-
nique make programming of large applications easier and use real physical memory (e.g.
RAM) more efficiently than those without virtual memory.
<a href="http://en.wikipedia.org/wiki/Virtual_memory">http://en.wikipedia.org/wiki/Virtual_memory</a>
</p>

<p>
Page Fault: A page is a fixed-length block of memory that is used as a unit of transfer be-
tween physical memory and external storage like a disk, and a page fault is an interrupt (or
exception) to the software raised by the hardware, when a program accesses a page that is
mapped in address space, but not loaded in physical memory.
<a href="http://en.wikipedia.org/wiki/Page_fault">http://en.wikipedia.org/wiki/Page_fault</a>
</p>

<p>
Thrash is the term used to describe a degenerate situation on a computer where increas-
ing resources are used to do a decreasing amount of work. In this situation the system is
said to be thrashing. Usually it refers to two or more processes accessing a shared resource
repeatedly such that serious system performance degradation occurs because the system is
spending a disproportionate amount of time just accessing the shared resource. Resource
access time may generally be considered as wasted, since it does not contribute to the ad-
vancement of any process. In modern computers, thrashing may occur in the paging system
(if there is not ‘sufficient’ physical memory or the disk access time is overly long), or in the
communications system (especially in conflicts over internal bus access), etc.
<a href="http://en.wikipedia.org/wiki/Thrash_(computer_science)">http://en.wikipedia.org/wiki/Thrash_(computer_science)</a>
</p>
</div>
</li>


<li><a id="sec-4-6-2" name="sec-4-6-2"></a>16.2 What is a Branch Target buffer? Explain how it can be used in reducing bubble cycles in cases of branch misprediction.<br  /><div class="outline-text-4" id="text-4-6-2">
<p>
SOLUTION
</p>

<p>
Branch misprediction occurs when the CPU mispredicts the next instruction to be executed.
The CPU uses pipelining which allows several instructions to be processed simultaneously.
But during a conditional jump, the next instruction to be executed depends on the result of
the condition. Branch Prediction tries to guess the next instruction. However, if the guess is
wrong, we are penalized because the instruction which was executed must be discarded.
Branch Target Buffer (BTB) reduces the penalty by predicting the path of the branch, comput-
ing the target of the branch and caching the information used by the branch. There will be
no stalls if the branch entry found on BTB and the prediction is correct, otherwise the penalty
will be at least two cycles.
</p>
</div>
</li>


<li><a id="sec-4-6-3" name="sec-4-6-3"></a>16.3 Describe direct memory access (DMA). Can a user level buffer / pointer be used by kernel or drivers?<br  /><div class="outline-text-4" id="text-4-6-3">
<p>
SOLUTION
</p>

<p>
Direct Memory is a feature which provides direct access (read/write) to system memory with-
out interaction from the CPU. The “DMA Controller” manages this by requesting the System
bus access (DMA request) from CPU. CPU completes its current task and grants access by as-
serting DMA acknowledgement signal. Once it gets the access, it reads/writes the data and
returns back the system bus to the CPU by asserting the bus release signal. This transfer is
faster than the usual transfer by CPU. Between this time CPU is involved with processing task
which doesn’t require memory access.
By using DMA, drivers can access the memory allocated to the user level buffer / pointer.
</p>
</div>
</li>
<li><a id="sec-4-6-4" name="sec-4-6-4"></a>16.4 Write a step by step execution of things that happen after a user presses a key on the keyboard. Use as much detail as possible.<br  /><div class="outline-text-4" id="text-4-6-4">
<p>
SOLUTION
</p>

<ol class="org-ol">
<li>The keyboard sends a scan code of the key to the keyboard controller (Scan code for
key pressed and key released is different).
</li>
<li>The keyboard controller interprets the scan code and stores it in a buffer.
</li>
<li>The keyboard controller sends a hardware interrupt to the processor. This is done by
putting signal on “interrupt request line”: IRQ 1.
</li>
<li>The interrupt controller maps IRQ 1 into INT 9.
</li>
<li>An interrupt is a signal which tells the processor to stop what it was doing currently
and do some special task.
</li>
<li>The processor invokes the “Interrupt handler”. CPU fetches the address of “Interrupt
Service Routine” (ISR) from “Interrupt Vector Table” maintained by the OS (Processor
     use the IRQ number for this).
</li>
<li>The ISR reads the scan code from port 60h and decides whether to process it or pass
the control to program for taking action.
</li>
</ol>
</div>
</li>










<li><a id="sec-4-6-5" name="sec-4-6-5"></a>16.9 Write an aligned malloc &amp; free function that takes number of bytes and aligned byte<br  /><div class="outline-text-4" id="text-4-6-5">
<p>
(which is always power of 2)        
EXAMPLE
align<sub>malloc</sub> (1000,128) will return a memory address that is a multiple of 128 and
that points to memory of size 1000 bytes.
aligned<sub>free</sub>() will free memory allocated by align<sub>malloc</sub>.
</p>

<p>
SOLUTION
</p>
<ol class="org-ol">
<li></li>
</ol>
<p>
We will use malloc routine provided by C to implement the functionality.
Allocate memory of size (bytes required + alignment – 1 + sizeof(void*)) using malloc.
alignment: malloc can give us any address and we need to find a multiple of align-
ment.
(Therefore, at maximum multiple of alignment, we will be alignment-1 bytes away
from any location.)
sizeof(size<sub>t</sub>): We are returning a modified memory pointer to user, which is different
from the one that would be returned by malloc. We also need to extra space to store
the address given by malloc, so that we can free memory in aligned<sub>free</sub> by calling
free routine provided by C.
</p>
<ol class="org-ol">
<li>If it returns NULL, then aligned<sub>malloc</sub> will fail and we return NULL.
</li>
<li>Else, find the aligned memory address which is a multiple of alignment (call this p2).
</li>
<li>Store the address returned by malloc (e.g., p1 is just size<sub>t</sub> bytes ahead of p2), which
will be required by aligned<sub>free</sub>.
</li>
<li>Return p2.
</li>
</ol>

<div class="org-src-container">

<pre class="src src-c">         <span style="color: #98fb98;">void</span>* <span style="color: #87cefa;">aligned_malloc</span>(<span style="color: #98fb98;">size_t</span> <span style="color: #eedd82;">required_bytes</span>, <span style="color: #98fb98;">size_t</span> <span style="color: #eedd82;">alignment</span>) {
         <span style="color: #98fb98;">void</span>* <span style="color: #eedd82;">p1</span>; <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">original block</span>
         <span style="color: #98fb98;">void</span>** <span style="color: #eedd82;">p2</span>; <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">aligned block</span>
         <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">offset</span> = alignment - 1 + <span style="color: #00ffff;">sizeof</span>(<span style="color: #98fb98;">void</span>*);
         <span style="color: #00ffff;">if</span> ((p1 = (<span style="color: #98fb98;">void</span>*)malloc(required_bytes + offset)) == <span style="color: #7fffd4;">NULL</span>) {
         <span style="color: #00ffff;">return</span> <span style="color: #7fffd4;">NULL</span>;
         }
   p2 = (<span style="color: #98fb98;">void</span>**)(((<span style="color: #98fb98;">size_t</span>)(p1) + offset) &amp; ~(alignment - 1));
   p2[-1] = p1;
   <span style="color: #00ffff;">return</span> p2;
}
<span style="color: #98fb98;">void</span> <span style="color: #87cefa;">aligned_free</span>(<span style="color: #98fb98;">void</span> *<span style="color: #eedd82;">p</span>) {
free(((<span style="color: #98fb98;">void</span>**)p)[-1]);
}
</pre>
</div>
</div>
</li></ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2015-03-05 Thu 23:21</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
